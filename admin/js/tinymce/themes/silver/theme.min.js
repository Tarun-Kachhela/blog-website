!function(){"use strict";var N=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},g=function(n,o){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(o.apply(null,t))}},U=function(t){return function(){return t}},d=function(t){return t};function v(o){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r.concat(t);return o.apply(null,n)}}var t,e,n,o,r,s,i,m=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!n.apply(null,t)}},a=function(t){return function(){throw new Error(t)}},u=U(!1),c=U(!0),l=u,f=c,h=function(){return p},p=(o={fold:function(t,e){return t()},is:l,isSome:l,isNone:f,getOr:n=function(t){return t},getOrThunk:e=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){return undefined},or:n,orThunk:e,map:h,ap:h,each:function(){},bind:h,flatten:h,exists:l,forall:f,filter:h,equals:t=function(t){return t.isNone()},equals_:t,toArray:function(){return[]},toString:U("none()")},Object.freeze&&Object.freeze(o),o),b=function(n){var t=function(){return n},e=function(){return r},o=function(t){return t(n)},r={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:f,isNone:l,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return b(t(n))},ap:function(t){return t.fold(h,function(t){return b(t(n))})},each:function(t){t(n)},bind:o,flatten:t,exists:o,forall:o,filter:function(t){return t(n)?r:p},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(l,function(t){return e(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},P={some:b,none:h,from:function(t){return null===t||t===undefined?p:b(t)}},y=function(e){return function(t){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&Array.prototype.isPrototypeOf(t)?"array":"object"===e&&String.prototype.isPrototypeOf(t)?"string":e}(t)===e}},x=y("string"),w=y("object"),O=y("array"),z=y("boolean"),S=y("function"),k=y("number"),C=(r=Array.prototype.indexOf)===undefined?function(t,e){return I(t,e)}:function(t,e){return r.call(t,e)},M=function(t,e){return-1<C(t,e)},H=function(t,e){return F(t,e).isSome()},V=function(t,e){for(var n=[],o=0;o<t.length;o+=e){var r=t.slice(o,o+e);n.push(r)}return n},E=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r,t)}return o},T=function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n,t)},A=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o,t)&&n.push(i)}return n},B=function(t,e,n){return function(t,e){for(var n=t.length-1;0<=n;n--)e(t[n],n,t)}(t,function(t){n=e(n,t)}),n},D=function(t,e,n){return T(t,function(t){n=e(n,t)}),n},_=function(t,e){for(var n=0,o=t.length;n<o;n++){var r=t[n];if(e(r,n,t))return P.some(r)}return P.none()},F=function(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n,t))return P.some(n);return P.none()},I=function(t,e){for(var n=0,o=t.length;n<o;++n)if(t[n]===e)return n;return-1},L=Array.prototype.push,R=function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!Array.prototype.isPrototypeOf(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);L.apply(e,t[n])}return e},j=function(t,e){var n=E(t,e);return R(n)},W=function(t,e){for(var n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n,t))return!1;return!0},G=Array.prototype.slice,X=function(t){var e=G.call(t,0);return e.reverse(),e},Y=function(t,e){return A(t,function(t){return!M(e,t)})},q=function(t){return[t]},K=function(t){return 0===t.length?P.none():P.some(t[0])},J=function(t){return 0===t.length?P.none():P.some(t[t.length-1])},$=S(Array.from)?Array.from:function(t){return G.call(t)},Q=Object.keys,Z=Object.hasOwnProperty,tt=function(t,e){for(var n=Q(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i,t)}},et=function(t,o){return nt(t,function(t,e,n){return{k:e,v:o(t,e,n)}})},nt=function(o,r){var i={};return tt(o,function(t,e){var n=r(t,e,o);i[n.k]=n.v}),i},ot=function(t,n){var o=[];return tt(t,function(t,e){o.push(n(t,e))}),o},rt=function(t){return ot(t,function(t){return t})},it=function(t,e){return Z.call(t,e)},at=function(e){return function(t){return it(t,e)?P.from(t[e]):P.none()}},ut=function(t,e){return at(e)(t)},ct=function(t,e){var n={};return n[t]=e,n},st=function(n){return{is:function(t){return n===t},isValue:c,isError:u,getOr:U(n),getOrThunk:U(n),getOrDie:U(n),or:function(t){return st(n)},orThunk:function(t){return st(n)},fold:function(t,e){return e(n)},map:function(t){return st(t(n))},mapError:function(t){return st(n)},each:function(t){t(n)},bind:function(t){return t(n)},exists:function(t){return t(n)},forall:function(t){return t(n)},toOption:function(){return P.some(n)}}},lt=function(n){return{is:u,isValue:u,isError:c,getOr:d,getOrThunk:function(t){return t()},getOrDie:function(){return a(String(n))()},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,e){return t(n)},map:function(t){return lt(n)},mapError:function(t){return lt(t(n))},each:N,bind:function(t){return lt(n)},exists:u,forall:c,toOption:P.none}},ft={value:st,error:lt},dt=function(a){if(!O(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var u=[],n={};return T(a,function(t,o){var e=Q(t);if(1!==e.length)throw new Error("one and only one name per case");var r=e[0],i=t[r];if(n[r]!==undefined)throw new Error("duplicate key detected:"+r);if("cata"===r)throw new Error("cannot have a case named cata (sorry)");if(!O(i))throw new Error("case arguments must be an array");u.push(r),n[r]=function(){var t=arguments.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+r+". Expected "+i.length+" ("+i+"), got "+t);for(var n=new Array(t),e=0;e<n.length;e++)n[e]=arguments[e];return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[o].apply(null,n)},match:function(t){var e=Q(t);if(u.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+e.join(","));if(!W(u,function(t){return M(e,t)}))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+u.join(", "));return t[r].apply(null,n)},log:function(t){console.log(t,{constructors:u,constructor:r,params:n})}}}}),n},mt=(dt([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),Object.prototype.hasOwnProperty),ht=function(a){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},o=0;o<t.length;o++){var r=t[o];for(var i in r)mt.call(r,i)&&(n[i]=a(n[i],r[i]))}return n}},gt=ht(function(t,e){return w(t)&&w(e)?gt(t,e):e}),vt=ht(function(t,e){return e}),pt=function(t,e){return n=e,o={},tt(t,function(t,e){M(n,e)||(o[e]=t)}),o;var n,o},bt=function(t){return at(t)},yt=function(t,e){return n=t,o=e,function(t){return it(t,n)?t[n]:o};var n,o},xt=function(t,e){return ut(t,e)},wt=function(t,e){return ct(t,e)},zt=function(t){return e={},T(t,function(t){e[t.key]=t.value}),e;var e},St=function(t,e){var n,o,r,i,a,u=(n=[],o=[],T(t,function(t){t.fold(function(t){n.push(t)},function(t){o.push(t)})}),{errors:n,values:o});return 0<u.errors.length?(a=u.errors,g(ft.error,R)(a)):(i=e,0===(r=u.values).length?ft.value(i):ft.value(gt(i,vt.apply(undefined,r))))},kt=function(t,e){return it(n=t,o=e)&&n[o]!==undefined&&null!==n[o];var n,o},Ct=function(t){var e=t,n=function(){return e};return{get:n,set:function(t){e=t},clone:function(){return Ct(n())}}},Ot=function(t){for(var e=[],n=function(t){e.push(t)},o=0;o<t.length;o++)t[o].each(n);return e},Mt=function(t,e){for(var n=0;n<t.length;n++){var o=e(t[n],n);if(o.isSome())return o}return P.none()},Ht=U("touchstart"),Vt=U("touchmove"),Et=U("touchend"),Tt=U("mousedown"),At=U("mousemove"),Bt=U("mouseout"),Dt=U("mouseup"),_t=U("mouseover"),Ft=U("focusin"),It=U("focusout"),Lt=U("keydown"),Rt=U("keyup"),Nt=U("input"),Pt=U("change"),jt=U("click"),Ut=U("transitionend"),Wt=U("selectstart"),Gt=function(n){var o,r=!1;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r||(r=!0,o=n.apply(null,t)),o}},Xt=function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.test(e))return o}return undefined}(t,e);if(!n)return{major:0,minor:0};var o=function(t){return Number(e.replace(n,"$"+t))};return qt(o(1),o(2))},Yt=function(){return qt(0,0)},qt=function(t,e){return{major:t,minor:e}},Kt={nu:qt,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?Yt():Xt(t,n)},unknown:Yt},Jt="Firefox",$t=function(t,e){return function(){return e===t}},Qt=function(t){var e=t.current;return{current:e,version:t.version,isEdge:$t("Edge",e),isChrome:$t("Chrome",e),isIE:$t("IE",e),isOpera:$t("Opera",e),isFirefox:$t(Jt,e),isSafari:$t("Safari",e)}},Zt={unknown:function(){return Qt({current:undefined,version:Kt.unknown()})},nu:Qt,edge:U("Edge"),chrome:U("Chrome"),ie:U("IE"),opera:U("Opera"),firefox:U(Jt),safari:U("Safari")},te="Windows",ee="Android",ne="Solaris",oe="FreeBSD",re=function(t,e){return function(){return e===t}},ie=function(t){var e=t.current;return{current:e,version:t.version,isWindows:re(te,e),isiOS:re("iOS",e),isAndroid:re(ee,e),isOSX:re("OSX",e),isLinux:re("Linux",e),isSolaris:re(ne,e),isFreeBSD:re(oe,e)}},ae={unknown:function(){return ie({current:undefined,version:Kt.unknown()})},nu:ie,windows:U(te),ios:U("iOS"),android:U(ee),linux:U("Linux"),osx:U("OSX"),solaris:U(ne),freebsd:U(oe)},ue=function(t,e){var n=String(e).toLowerCase();return _(t,function(t){return t.search(n)})},ce=function(t,n){return ue(t,n).map(function(t){var e=Kt.detect(t.versionRegexes,n);return{current:t.name,version:e}})},se=function(t,n){return ue(t,n).map(function(t){var e=Kt.detect(t.versionRegexes,n);return{current:t.name,version:e}})},le=function(t,e){return-1!==t.indexOf(e)},fe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,de=function(e){return function(t){return le(t,e)}},me=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return le(t,"edge/")&&le(t,"chrome")&&le(t,"safari")&&le(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,fe],search:function(t){return le(t,"chrome")&&!le(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return le(t,"msie")||le(t,"trident")}},{name:"Opera",versionRegexes:[fe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:de("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:de("firefox")},{name:"Safari",versionRegexes:[fe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(le(t,"safari")||le(t,"mobile/"))&&le(t,"applewebkit")}}],he=[{name:"Windows",search:de("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return le(t,"iphone")||le(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:de("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:de("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:de("linux"),versionRegexes:[]},{name:"Solaris",search:de("sunos"),versionRegexes:[]},{name:"FreeBSD",search:de("freebsd"),versionRegexes:[]}],ge={browsers:U(me),oses:U(he)},ve=function(t){var e,n,o,r,i,a,u,c,s,l,f,d=ge.browsers(),m=ge.oses(),h=ce(d,t).fold(Zt.unknown,Zt.nu),g=se(m,t).fold(ae.unknown,ae.nu);return{browser:h,os:g,deviceType:(n=h,o=t,r=(e=g).isiOS()&&!0===/ipad/i.test(o),i=e.isiOS()&&!r,a=e.isAndroid()&&3===e.version.major,u=e.isAndroid()&&4===e.version.major,c=r||a||u&&!0===/mobile/i.test(o),s=e.isiOS()||e.isAndroid(),l=s&&!c,f=n.isSafari()&&e.isiOS()&&!1===/safari/i.test(o),{isiPad:U(r),isiPhone:U(i),isTablet:U(c),isPhone:U(l),isTouch:U(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:U(f)})}},pe={detect:Gt(function(){var t=navigator.userAgent;return ve(t)})},be={tap:U("alloy.tap")},ye=U("alloy.focus"),xe=U("alloy.blur.post"),we=U("alloy.paste.post"),ze=U("alloy.receive"),Se=U("alloy.execute"),ke=U("alloy.focus.item"),Ce=be.tap,Oe=pe.detect().deviceType.isTouch()?be.tap:jt,Me=U("alloy.longpress"),He=U("alloy.sandbox.close"),Ve=U("alloy.typeahead.cancel"),Ee=U("alloy.system.init"),Te=U("alloy.system.scroll"),Ae=U("alloy.system.attached"),Be=U("alloy.system.detached"),De=U("alloy.system.dismissRequested"),_e=U("alloy.focusmanager.shifted"),Fe=U("alloy.slotcontainer.visibility"),Ie=U("alloy.change.tab"),Le=U("alloy.dismiss.tab"),Re=function(t){if(null===t||t===undefined)throw new Error("Node cannot be null or undefined");return{dom:U(t)}},Ne={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Re(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return Re(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return Re(n)},fromDom:Re,fromPoint:function(t,e,n){var o=t.dom();return P.from(o.elementFromPoint(e,n)).map(Re)}},Pe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(e.length!==n.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+n.length+" arguments");var o={};return T(e,function(t,e){o[t]=U(n[e])}),o}},je=function(t){return t.slice(0).sort()},Ue=function(e,t){if(!O(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");T(t,function(t){if(!x(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")})},We=function(r,i){var n,a=r.concat(i);if(0===a.length)throw new Error("You must specify at least one required or optional field.");return Ue("required",r),Ue("optional",i),n=je(a),_(n,function(t,e){return e<n.length-1&&t===n[e+1]}).each(function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+n.join(", ")+"].")}),function(e){var n=Q(e);W(r,function(t){return M(n,t)})||function(t,e){throw new Error("All required keys ("+je(t).join(", ")+") were not specified. Specified keys were: "+je(e).join(", ")+".")}(r,n);var t=A(n,function(t){return!M(a,t)});0<t.length&&function(t){throw new Error("Unsupported keys for object: "+je(t).join(", "))}(t);var o={};return T(r,function(t){o[t]=U(e[t])}),T(i,function(t){o[t]=U(Object.prototype.hasOwnProperty.call(e,t)?P.some(e[t]):P.none())}),o}},Ge="undefined"!=typeof window?window:Function("return this;")(),Xe=function(t,e){return function(t,e){for(var n=e!==undefined&&null!==e?e:Ge,o=0;o<t.length&&n!==undefined&&null!==n;++o)n=n[t[o]];return n}(t.split("."),e)},Ye={getOrDie:function(t,e){var n=Xe(t,e);if(n===undefined||null===n)throw t+" not available on this browser";return n}},qe=(Node.ATTRIBUTE_NODE,Node.CDATA_SECTION_NODE,Node.COMMENT_NODE,Node.DOCUMENT_NODE),Ke=(Node.DOCUMENT_TYPE_NODE,Node.DOCUMENT_FRAGMENT_NODE,Node.ELEMENT_NODE),Je=Node.TEXT_NODE,$e=(Node.PROCESSING_INSTRUCTION_NODE,Node.ENTITY_REFERENCE_NODE,Node.ENTITY_NODE,Node.NOTATION_NODE,Ke),Qe=qe,Ze=function(t,e){var n=t.dom();if(n.nodeType!==$e)return!1;if(n.matches!==undefined)return n.matches(e);if(n.msMatchesSelector!==undefined)return n.msMatchesSelector(e);if(n.webkitMatchesSelector!==undefined)return n.webkitMatchesSelector(e);if(n.mozMatchesSelector!==undefined)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},tn=function(t){return t.nodeType!==$e&&t.nodeType!==Qe||0===t.childElementCount},en=function(t,e){var n=e===undefined?document:e.dom();return tn(n)?[]:E(n.querySelectorAll(t),Ne.fromDom)},nn=function(t,e){return t.dom()===e.dom()},on=(pe.detect().browser.isIE(),function(t){return Ne.fromDom(t.dom().ownerDocument)}),rn=function(t){var e=t.dom().ownerDocument.defaultView;return Ne.fromDom(e)},an=function(t){var e=t.dom();return P.from(e.parentNode).map(Ne.fromDom)},un=function(t){var e=t.dom();return P.from(e.offsetParent).map(Ne.fromDom)},cn=function(t){var e=t.dom();return E(e.childNodes,Ne.fromDom)},sn=function(t,e){var n=t.dom().childNodes;return P.from(n[e]).map(Ne.fromDom)},ln=(Pe("element","offset"),function(e,n){an(e).each(function(t){t.dom().insertBefore(n.dom(),e.dom())})}),fn=function(t,e){var n;(n=t.dom(),P.from(n.nextSibling).map(Ne.fromDom)).fold(function(){an(t).each(function(t){mn(t,e)})},function(t){ln(t,e)})},dn=function(e,n){sn(e,0).fold(function(){mn(e,n)},function(t){e.dom().insertBefore(n.dom(),t.dom())})},mn=function(t,e){t.dom().appendChild(e.dom())},hn=function(e,t){T(t,function(t){mn(e,t)})},gn=function(t){t.dom().textContent="",T(cn(t),function(t){vn(t)})},vn=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},pn=function(t){return t.dom().innerHTML},bn=function(t,e){var n,o,r=on(t).dom(),i=Ne.fromDom(r.createDocumentFragment()),a=(n=e,(o=(r||document).createElement("div")).innerHTML=n,cn(Ne.fromDom(o)));hn(i,a),gn(t),mn(t,i)},yn=function(t){return t.dom().nodeName.toLowerCase()},xn=function(e){return function(t){return t.dom().nodeType===e}},wn=xn(Ke),zn=xn(Je),Sn=xn(qe),kn=function(t,e,n){if(!(x(n)||z(n)||k(n)))throw console.error("Invalid call to Attr.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Cn=function(t,e,n){kn(t.dom(),e,n)},On=function(t,e){var n=t.dom();tt(e,function(t,e){kn(n,e,t)})},Mn=function(t,e){var n=t.dom().getAttribute(e);return null===n?undefined:n},Hn=function(t,e){var n=t.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Vn=function(t,e){t.dom().removeAttribute(e)},En=function(t){return e=t,n=!1,Ne.fromDom(e.dom().cloneNode(n));var e,n},Tn=function(t){var e,n,o,r=En(t);return e=r,n=Ne.fromTag("div"),o=Ne.fromDom(e.dom().cloneNode(!0)),mn(n,o),pn(n)},An=function(t){return Tn(t)},Bn="unknown",Dn="__CHROME_INSPECTOR_CONNECTION_TO_ALLOY__";(i=s||(s={}))[i.STOP=0]="STOP",i[i.NORMAL=1]="NORMAL",i[i.LOGGING=2]="LOGGING";var _n=Ct({}),Fn=function(e,t,n){var o,r,i,a;switch(xt(_n.get(),e).orThunk(function(){var t=Q(_n.get());return Mt(t,function(t){return-1<e.indexOf(t)?P.some(_n.get()[t]):P.none()})}).getOr(s.NORMAL)){case s.NORMAL:return n(Pn());case s.LOGGING:var u=(o=e,r=t,i=[],a=(new Date).getTime(),{logEventCut:function(t,e,n){i.push({outcome:"cut",target:e,purpose:n})},logEventStopped:function(t,e,n){i.push({outcome:"stopped",target:e,purpose:n})},logNoParent:function(t,e,n){i.push({outcome:"no-parent",target:e,purpose:n})},logEventNoHandlers:function(t,e){i.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(t,e,n){i.push({outcome:"response",purpose:n,target:e})},write:function(){var t=(new Date).getTime();M(["mousemove","mouseover","mouseout",Ee()],o)||console.log(o,{event:o,time:t-a,target:r.dom(),sequence:E(i,function(t){return M(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+An(t.target)+")":t.outcome})})}}),c=n(u);return u.write(),c;case s.STOP:return!0}},In=["alloy/data/Fields","alloy/debugging/Debugging"],Ln=function(t,e,n){return Fn(t,e,n)},Rn=function(){if(window[Dn]!==undefined)return window[Dn];var e=function(t,e){var n=_n.get();n[t]=e,_n.set(n)};return window[Dn]={systems:{},lookup:function(e){var n=window[Dn].systems,t=Q(n);return Mt(t,function(t){return n[t].getByUid(e).toOption().map(function(t){return wt(An(t.element()),(e=function(n){var t=n.spec();return{"(original.spec)":t,"(dom.ref)":n.element().dom(),"(element)":An(n.element()),"(initComponents)":E(t.components!==undefined?t.components:[],e),"(components)":E(n.components(),e),"(bound.events)":ot(n.events(),function(t,e){return[e]}).join(", "),"(behaviours)":t.behaviours!==undefined?et(t.behaviours,function(t,e){return t===undefined?"--revoked--":{config:t.configAsRaw(),"original-config":t.initialConfig,state:n.readState(e)}}):"none"}})(t));var e})}).orThunk(function(){return P.some({error:"Systems ("+t.join(", ")+") did not contain uid: "+e})})},events:{setToNormal:function(t){e(t,s.NORMAL)},setToLogging:function(t){e(t,s.LOGGING)},setToStop:function(t){e(t,s.STOP)}}},window[Dn]},Nn=function(t,e){Rn().systems[t]=e},Pn=U({logEventCut:N,logEventStopped:N,logNoParent:N,logEventNoHandlers:N,logEventResponse:N,write:N}),jn=0,Un=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++jn+String(e)},Wn=tinymce.util.Tools.resolve("tinymce.ThemeManager"),Gn=function(){return(Gn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function Xn(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&(n[o[r]]=t[o[r]])}return n}var Yn,qn,Kn=dt([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Jn=function(t){return Kn.defaultedThunk(U(t))},$n=Kn.strict,Qn=Kn.asOption,Zn=Kn.defaultedThunk,to=Kn.mergeWithThunk;(qn=Yn||(Yn={}))[qn.Error=0]="Error",qn[qn.Value=1]="Value";var eo=function(t,e,n){return t.stype===Yn.Error?e(t.serror):n(t.svalue)},no=function(t){return{stype:Yn.Value,svalue:t}},oo=function(t){return{stype:Yn.Error,serror:t}},ro=function(t){return t.fold(oo,no)},io=function(t){return eo(t,ft.error,ft.value)},ao=no,uo=function(t){var e=[],n=[];return T(t,function(t){eo(t,function(t){return n.push(t)},function(t){return e.push(t)})}),{values:e,errors:n}},co=oo,so=function(t,e){return t.stype===Yn.Value?e(t.svalue):t},lo=function(t,e){return t.stype===Yn.Error?e(t.serror):t},fo=function(t,e){return t.stype===Yn.Value?{stype:Yn.Value,svalue:e(t.svalue)}:t},mo=function(t,e){return t.stype===Yn.Error?{stype:Yn.Error,serror:e(t.serror)}:t},ho=function(t){return g(co,R)(t)},go=function(t,e){var n,o,r=uo(t);return 0<r.errors.length?ho(r.errors):(n=r.values,o=e,0<n.length?ao(gt(o,vt.apply(undefined,n))):ao(o))},vo=function(t){var e=uo(t);return 0<e.errors.length?ho(e.errors):ao(e.values)},po=dt([{setOf:["validator","valueType"]},{arrOf:["valueType"]},{objOf:["fields"]},{itemOf:["validator"]},{choiceOf:["key","branches"]},{thunk:["description"]},{func:["args","outputSchema"]}]),bo=dt([{field:["name","presence","type"]},{state:["name"]}]),yo=function(){return Ye.getOrDie("JSON")},xo=function(t,e,n){return yo().stringify(t,e,n)},wo=function(t){return w(t)&&100<Q(t).length?" removed due to size":xo(t,null,2)},zo=function(t,e){return co([{path:t,getErrorInfo:e}])},So=dt([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),ko=function(n,o,r){return ut(o,r).fold(function(){return t=r,e=o,zo(n,function(){return'Could not find valid *strict* value for "'+t+'" in '+wo(e)});var t,e},ao)},Co=function(t,e,n){var o=ut(t,e).fold(function(){return n(t)},d);return ao(o)},Oo=function(u,c,t,s){return t.fold(function(r,n,t,o){var i=function(t){var e=o.extract(u.concat([r]),s,t);return fo(e,function(t){return ct(n,s(t))})},a=function(t){return t.fold(function(){var t=ct(n,s(P.none()));return ao(t)},function(t){var e=o.extract(u.concat([r]),s,t);return fo(e,function(t){return ct(n,s(P.some(t)))})})};return t.fold(function(){return so(ko(u,c,r),i)},function(t){return so(Co(c,r,t),i)},function(){return so(ao(ut(c,r)),a)},function(t){return so((n=t,o=ut(e=c,r).map(function(t){return!0===t?n(e):t}),ao(o)),a);var e,n,o},function(t){var e=t(c),n=fo(Co(c,r,U({})),function(t){return gt(e,t)});return so(n,i)})},function(t,e){var n=e(c);return ao(ct(t,s(n)))})},Mo=function(o){return{extract:function(n,t,e){return lo(o(e,t),function(t){return e=t,zo(n,function(){return e});var e})},toString:function(){return"val"},toDsl:function(){return po.itemOf(o)}}},Ho=function(t){var c=Vo(t),s=B(t,function(e,t){return t.fold(function(t){return gt(e,wt(t,!0))},U(e))},{});return{extract:function(t,e,n){var o,r,i,a=z(n)?[]:(r=Q(o=n),A(r,function(t){return kt(o,t)})),u=A(a,function(t){return!kt(s,t)});return 0===u.length?c.extract(t,e,n):(i=u,zo(t,function(){return"There are unsupported fields: ["+i.join(", ")+"] specified"}))},toString:c.toString,toDsl:c.toDsl}},Vo=function(u){return{extract:function(t,e,n){return o=t,r=n,i=e,a=E(u,function(t){return Oo(o,r,t,i)}),go(a,{});var o,r,i,a},toString:function(){return"obj{\n"+E(u,function(t){return t.fold(function(t,e,n,o){return t+" -> "+o.toString()},function(t,e){return"state("+t+")"})}).join("\n")+"}"},toDsl:function(){return po.objOf(E(u,function(t){return t.fold(function(t,e,n,o){return bo.field(t,n,o)},function(t,e){return bo.state(t)})}))}}},Eo=function(r){return{extract:function(n,o,t){var e=E(t,function(t,e){return r.extract(n.concat(["["+e+"]"]),o,t)});return vo(e)},toString:function(){return"array("+r.toString()+")"},toDsl:function(){return po.arrOf(r)}}},To=function(u,c){return{extract:function(n,o,r){var t,e,i=Q(r),a=(t=n,e=i,Eo(Mo(u)).extract(t,d,e));return so(a,function(t){var e=E(t,function(t){return So.field(t,t,$n(),c)});return Vo(e).extract(n,o,r)})},toString:function(){return"setOf("+c.toString()+")"},toDsl:function(){return po.setOf(u,c)}}},Ao=U(Mo(ao)),Bo=g(Eo,Vo),Do=So.state,_o=So.field,Fo=function(n,e,o,r,i){return xt(r,i).fold(function(){return t=r,e=i,zo(n,function(){return'The chosen schema: "'+e+'" did not exist in branches: '+wo(t)});var t,e},function(t){return Vo(t).extract(n.concat(["branch: "+i]),e,o)})},Io=function(r,i){return{extract:function(e,n,o){return xt(o,r).fold(function(){return t=r,zo(e,function(){return'Choice schema did not contain choice key: "'+t+'"'});var t},function(t){return Fo(e,n,o,i,t)})},toString:function(){return"chooseOn("+r+"). Possible values: "+Q(i)},toDsl:function(){return po.choiceOf(r,i)}}},Lo=Mo(ao),Ro=function(e){return Mo(function(t){return e(t).fold(co,ao)})},No=function(e,t){return To(function(t){return ro(e(t))},t)},Po=function(t,e,n){return io((o=t,r=d,i=n,a=e.extract([o],r,i),mo(a,function(t){return{input:i,errors:t}})));var o,r,i,a},jo=function(t){return t.fold(function(t){throw new Error(Wo(t))},d)},Uo=function(t,e,n){return jo(Po(t,e,n))},Wo=function(t){return"Errors: \n"+(e=t.errors,n=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):e,E(n,function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()}))+"\n\nInput object: "+wo(t.input);var e,n},Go=function(t,e){return Io(t,e)},Xo=U(Lo),Yo=function(n,o){return Mo(function(t){var e=typeof t;return n(t)?ao(t):co("Expected type: "+o+" but got: "+e)})},qo=Yo(k,"number"),Ko=Yo(x,"string"),Jo=Yo(z,"boolean"),$o=Yo(S,"function"),Qo=function(e){return Ro(function(t){return M(e,t)?ft.value(t):ft.error('Unsupported value: "'+t+'", choose one of "'+e.join(", ")+'".')})},Zo=function(t){return _o(t,t,$n(),Ao())},tr=function(t,e){return _o(t,t,$n(),e)},er=function(t){return tr(t,Ko)},nr=function(t,e){return _o(t,t,$n(),Qo(e))},or=function(t){return tr(t,$o)},rr=function(t,e){return _o(t,t,$n(),Vo(e))},ir=function(t,e){return _o(t,t,$n(),Bo(e))},ar=function(t,e){return _o(t,t,$n(),Eo(e))},ur=function(t){return _o(t,t,Qn(),Ao())},cr=function(t,e){return _o(t,t,Qn(),e)},sr=function(t){return cr(t,Ko)},lr=function(t){return cr(t,$o)},fr=function(t,e){return _o(t,t,Qn(),Vo(e))},dr=function(t,e){return _o(t,t,Jn(e),Ao())},mr=function(t,e,n){return _o(t,t,Jn(e),n)},hr=function(t,e){return mr(t,e,qo)},gr=function(t,e){return mr(t,e,Ko)},vr=function(t,e,n){return mr(t,e,Qo(n))},pr=function(t,e){return mr(t,e,Jo)},br=function(t,e){return mr(t,e,$o)},yr=function(t,e,n){return _o(t,t,Jn(e),Vo(n))},xr=function(t,e){return Do(t,e)},wr=function(t,e){return nn(t.element(),e.event().target())},zr=function(t){if(!kt(t,"can")&&!kt(t,"abort")&&!kt(t,"run"))throw new Error("EventHandler defined by: "+xo(t,null,2)+" does not have can, abort, or run!");return Uo("Extracting event.handler",Ho([dr("can",U(!0)),dr("abort",U(!1)),dr("run",N)]),t)},Sr=function(n){var e,o,r,i,t=(e=n,o=function(t){return t.can},function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return D(e,function(t,e){return t&&o(e).apply(undefined,n)},!0)}),a=(r=n,i=function(t){return t.abort},function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return D(r,function(t,e){return t||i(e).apply(undefined,n)},!1)});return zr({can:t,abort:a,run:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];T(n,function(t){t.run.apply(undefined,e)})}})},kr=function(t,e){Hr(t,t.element(),e,{})},Cr=function(t,e,n){Hr(t,t.element(),e,n)},Or=function(t){kr(t,Se())},Mr=function(t,e,n){Hr(t,e,n,{})},Hr=function(t,e,n,o){var r=Gn({target:e},o);t.getSystem().triggerEvent(n,e,et(r,U))},Vr=function(t,e,n,o){t.getSystem().triggerEvent(n,e,o.event())};function Er(t,e,n,o,r){return t(n,o)?P.some(n):S(r)&&r(n)?P.none():e(n,o,r)}var Tr,Ar,Br,Dr=function(t){var e=zn(t)?t.dom().parentNode:t.dom();return e!==undefined&&null!==e&&e.ownerDocument.body.contains(e)},_r=Gt(function(){return Fr(Ne.fromDom(document))}),Fr=function(t){var e=t.dom().body;if(null===e||e===undefined)throw new Error("Body is not available yet");return Ne.fromDom(e)},Ir=function(t,e,n){for(var o=t.dom(),r=S(n)?n:U(!1);o.parentNode;){o=o.parentNode;var i=Ne.fromDom(o);if(e(i))return P.some(i);if(r(i))break}return P.none()},Lr=function(t,e,n){return Er(function(t){return e(t)},Ir,t,e,n)},Rr=function(t,o){var r=function(t){for(var e=0;e<t.childNodes.length;e++){if(o(Ne.fromDom(t.childNodes[e])))return P.some(Ne.fromDom(t.childNodes[e]));var n=r(t.childNodes[e]);if(n.isSome())return n}return P.none()};return r(t.dom())},Nr=function(t,e,n){return Lr(t,function(t){return e(t).isSome()},n).bind(e)},Pr=function(t){return zt(t)},jr=function(t,e){return{key:t,value:zr({abort:e})}},Ur=function(t){return{key:t,value:zr({run:function(t,e){e.event().prevent()}})}},Wr=function(t,e){return{key:t,value:zr({run:e})}},Gr=function(t,e,n){return{key:t,value:zr({run:function(t){e.apply(undefined,[t].concat(n))}})}},Xr=function(t){return function(n){return{key:t,value:zr({run:function(t,e){wr(t,e)&&n(t,e)}})}}},Yr=function(t,e,n){var o,r,i=e.partUids[n];return r=i,Wr(o=t,function(t,e){t.getSystem().getByUid(r).each(function(t){Vr(t,t.element(),o,e)})})},qr=function(t,r){return Wr(t,function(e,t){var n=t.event(),o=e.getSystem().getByDom(n.target()).fold(function(){return Nr(n.target(),function(t){return e.getSystem().getByDom(t).toOption()},U(!1)).getOr(e)},function(t){return t});r(e,o,t)})},Kr=function(t){return Wr(t,function(t,e){e.cut()})},Jr=function(t){return Wr(t,function(t,e){e.stop()})},$r=function(t,e){return Xr(t)(e)},Qr=Xr(Ae()),Zr=Xr(Be()),ti=Xr(Ee()),ei=(Tr=Se(),function(t){return Wr(Tr,t)}),ni=Pr([(Ar=ye(),Br=function(t,e){var n,o,r=e.event().originator(),i=e.event().target();return o=i,!(nn(n=r,t.element())&&!nn(n,o)&&(console.warn(ye()+" did not get interpreted by the desired target. \nOriginator: "+An(r)+"\nTarget: "+An(i)+"\nCheck the "+ye()+" event handlers"),1))},{key:Ar,value:zr({can:Br})})]),oi=Object.freeze({events:ni}),ri=U("alloy-id-"),ii=U("data-alloy-id"),ai=ri(),ui=ii(),ci=function(t,e){Object.defineProperty(t.dom(),ui,{value:e,writable:!0})},si=function(t){var e=wn(t)?t.dom()[ui]:null;return P.from(e)},li=function(t){return Un(t)},fi=d,di=function(e){var t=function(t){return function(){throw new Error("The component must be in a context to send: "+t+"\n"+An(e().element())+" is not in context.")}};return{debugInfo:U("fake"),triggerEvent:t("triggerEvent"),triggerFocus:t("triggerFocus"),triggerEscape:t("triggerEscape"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),broadcast:t("broadcast"),broadcastOn:t("broadcastOn"),broadcastEvent:t("broadcastEvent"),isConnected:U(!1)}},mi=di(),hi=function(t){return E(t,function(t){return o=e="/*",r=(n=t).length-e.length,""!==o&&(n.length<o.length||n.substr(r,r+o.length)!==o)?t:t.substring(0,t.length-"/*".length);var e,n,o,r})},gi=function(t,e){var n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:hi(i)}},t},vi=Un("alloy-premade"),pi=function(t){return wt(vi,t)},bi=function(o){return t=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return o.apply(undefined,[t.getApis()].concat([t].concat(e)))},e=o.toString(),n=e.indexOf(")")+1,r=e.indexOf("("),i=e.substring(r+1,n-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:hi(i.slice(1))}},t;var t,e,n,r,i},yi={init:function(){return xi({readState:function(){return"No State required"}})}},xi=function(t){return t},wi=function(t,r){var i={};return tt(t,function(t,o){tt(t,function(t,e){var n=yt(e,[])(i);i[e]=n.concat([r(o,t)])})}),i},zi=function(t){return{classes:t.classes!==undefined?t.classes:[],attributes:t.attributes!==undefined?t.attributes:{},styles:t.styles!==undefined?t.styles:{}}},Si=function(t,e){return n=v.apply(undefined,[t.handler].concat(e)),o=t.purpose(),{cHandler:n,purpose:U(o)};var n,o},ki=function(t){return t.cHandler},Ci=function(t,e){return{name:U(t),handler:U(e)}},Oi=function(t,e,n){var o,r,i=Gn({},n,(o=t,r={},T(e,function(t){r[t.name()]=t.handlers(o)}),r));return wi(i,Ci)},Mi=function(t){var e,i=S(e=t)?{can:U(!0),abort:U(!1),run:e}:e;return function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=[t,e].concat(n);i.abort.apply(undefined,r)?e.stop():i.can.apply(undefined,r)&&i.run.apply(undefined,r)}},Hi=function(t,e,n){var o,r,i=e[n];return i?function(a,u,t,c){var e=t.slice(0);try{var n=e.sort(function(t,e){var n=t[u](),o=e[u](),r=c.indexOf(n),i=c.indexOf(o);if(-1===r)throw new Error("The ordering for "+a+" does not have an entry for "+n+".\nOrder specified: "+xo(c,null,2));if(-1===i)throw new Error("The ordering for "+a+" does not have an entry for "+o+".\nOrder specified: "+xo(c,null,2));return r<i?-1:i<r?1:0});return ft.value(n)}catch(o){return ft.error([o])}}("Event: "+n,"name",t,i).map(function(t){var e=E(t,function(t){return t.handler()});return Sr(e)}):(o=n,r=t,ft.error(["The event ("+o+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+xo(E(r,function(t){return t.name()}),null,2)]))},Vi=function(t,i){var e=ot(t,function(o,r){return(1===o.length?ft.value(o[0].handler()):Hi(o,i,r)).map(function(t){var e=Mi(t),n=1<o.length?A(i,function(e){return M(o,function(t){return t.name()===e})}).join(" > "):o[0].name();return wt(r,{handler:e,purpose:U(n)})})});return St(e,{})},Ei=function(t){return Po("custom.definition",Vo([_o("dom","dom",$n(),Vo([Zo("tag"),dr("styles",{}),dr("classes",[]),dr("attributes",{}),ur("value"),ur("innerHtml")])),Zo("components"),Zo("uid"),dr("events",{}),dr("apis",{}),_o("eventOrder","eventOrder",(e={"alloy.execute":["disabling","alloy.base.behaviour","toggling","typeaheadevents"],"alloy.focus":["alloy.base.behaviour","focusing","keying"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing"],mousedown:["focusing","alloy.base.behaviour","item-type-events"],mouseover:["item-type-events","tooltipping"]},Kn.mergeWithThunk(U(e))),Xo()),ur("domModification")]),t);var e},Ti=function(t,e){var n=Mn(t,e);return n===undefined||""===n?[]:n.split(" ")},Ai=function(t){return t.dom().classList!==undefined},Bi=function(t,e){return r=e,i=Ti(n=t,o="class").concat([r]),Cn(n,o,i.join(" ")),!0;var n,o,r,i},Di=function(t,e){return r=e,0<(i=A(Ti(n=t,o="class"),function(t){return t!==r})).length?Cn(n,o,i.join(" ")):Vn(n,o),!1;var n,o,r,i},_i=function(t,e){Ai(t)?t.dom().classList.add(e):Bi(t,e)},Fi=function(t){0===(Ai(t)?t.dom().classList:Ti(t,"class")).length&&Vn(t,"class")},Ii=function(t,e){Ai(t)?t.dom().classList.remove(e):Di(t,e),Fi(t)},Li=function(t,e){return Ai(t)&&t.dom().classList.contains(e)},Ri=function(e,t){T(t,function(t){_i(e,t)})},Ni=function(e,t){T(t,function(t){Ii(e,t)})},Pi=function(t){return t.style!==undefined},ji=function(t,e,n){if(!x(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Pi(t)&&t.style.setProperty(e,n)},Ui=function(t,e){Pi(t)&&t.style.removeProperty(e)},Wi=function(t,e,n){var o=t.dom();ji(o,e,n)},Gi=function(t,e){var n=t.dom();tt(e,function(t,e){ji(n,e,t)})},Xi=function(t,e){var n=t.dom(),o=window.getComputedStyle(n).getPropertyValue(e),r=""!==o||Dr(t)?o:Yi(n,e);return null===r?undefined:r},Yi=function(t,e){return Pi(t)?t.style.getPropertyValue(e):""},qi=function(t,e){var n=t.dom(),o=Yi(n,e);return P.from(o).filter(function(t){return 0<t.length})},Ki=function(t,e,n){var o=Ne.fromTag(t);return Wi(o,e,n),qi(o,e).isSome()},Ji=function(t,e){var n=t.dom();Ui(n,e),Hn(t,"style")&&""===Mn(t,"style").replace(/^\s+|\s+$/g,"")&&Vn(t,"style")},$i=function(t){return t.dom().offsetWidth},Qi=function(t){return t.dom().value},Zi=function(t,e){if(e===undefined)throw new Error("Value.set was undefined");t.dom().value=e},ta=function(t,e){return n=t,r=E(o=e,function(t){return fr(t.name(),[Zo("config"),dr("state",yi)])}),i=Po("component.behaviours",Vo(r),n.behaviours).fold(function(t){throw new Error(Wo(t)+"\nComplete spec:\n"+xo(n,null,2))},function(t){return t}),{list:o,data:et(i,function(t){var e=t.map(function(t){return{config:t.config,state:t.state.init(t.config)}});return function(){return e}})};var n,o,r,i},ea=function(t){var e,n,o,r=(e=t,n=yt("behaviours",{})(e),o=A(Q(n),function(t){return n[t]!==undefined}),E(o,function(t){return n[t].me}));return ta(t,r)},na=function(t,e,n){var o,r,i,a=Gn({},(o=t).dom,{uid:o.uid,domChildren:E(o.components,function(t){return t.element()})}),u=t.domModification.fold(function(){return zi({})},zi),c={"alloy.base.modification":u},s=0<e.length?function(e,t,n,o){var r=Gn({},t);T(n,function(t){r[t.name()]=t.exhibit(e,o)});var i=wi(r,function(t,e){return{name:t,modification:e}}),a=function(t){return B(t,function(t,e){return Gn({},e.modification,t)},{})},u=B(i.classes,function(t,e){return e.modification.concat(t)},[]),c=a(i.attributes),s=a(i.styles);return zi({classes:u,attributes:c,styles:s})}(n,c,e,a):u;return i=s,Gn({},r=a,{attributes:Gn({},r.attributes,i.attributes),styles:Gn({},r.styles,i.styles),classes:r.classes.concat(i.classes)})},oa=function(t,e,n){var o,r,i,a,u,c,s={"alloy.base.behaviour":(o=t,o.events)};return(r=n,i=t.eventOrder,a=e,u=s,c=Oi(r,a,u),Vi(c,i)).getOrDie()},ra=function(n){var t=function(){return l},o=Ct(mi),e=jo(Ei(n)),r=ea(n),i=r.list,a=r.data,u=function(t){var e=Ne.fromTag(t.tag);On(e,t.attributes),Ri(e,t.classes),Gi(e,t.styles),t.innerHtml.each(function(t){return bn(e,t)});var n=t.domChildren;return hn(e,n),t.value.each(function(t){Zi(e,t)}),t.uid,ci(e,t.uid),e}(na(e,i,a)),c=oa(e,i,a),s=Ct(e.components),l={getSystem:o.get,config:function(t){var e=a;return(S(e[t.name()])?e[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+xo(n,null,2))})()},hasConfigured:function(t){return S(a[t.name()])},spec:U(n),readState:function(t){return a[t]().map(function(t){return t.state.readState()}).getOr("not enabled")},getApis:function(){return e.apis},connect:function(t){o.set(t)},disconnect:function(){o.set(di(t))},element:U(u),syncComponents:function(){var t=cn(u),e=j(t,function(t){return o.get().getByDom(t).fold(function(){return[]},function(t){return[t]})});s.set(e)},components:s.get,events:U(c)};return l},ia=function(t){var e,n,o=fi(t),r=o.events,i=Xn(o,["events"]),a=(e=i,n=yt("components",[])(e),E(n,sa)),u=Gn({},i,{events:Gn({},oi,r),components:a});return ft.value(ra(u))},aa=function(t){var e=Ne.fromText(t);return ua({element:e})},ua=function(t){var e=Uo("external.component",Ho([Zo("element"),ur("uid")]),t),n=Ct(di());e.uid.each(function(t){ci(e.element,t)});var o={getSystem:n.get,config:P.none,hasConfigured:U(!1),connect:function(t){n.set(t)},disconnect:function(){n.set(di(function(){return o}))},getApis:function(){return{}},element:U(e.element),spec:U(t),readState:U("No state"),syncComponents:N,components:U([]),events:U({})};return pi(o)},ca=li,sa=function(e){return(t=e,xt(t,vi)).fold(function(){var t=e.hasOwnProperty("uid")?e:Gn({uid:ca("")},e);return ia(t).getOrDie()},function(t){return t});var t},la=pi,fa=function(t,e,n){return Ir(t,function(t){return Ze(t,e)},n)},da=function(t,e){return n=e,r=(o=t)===undefined?document:o.dom(),tn(r)?P.none():P.from(r.querySelector(n)).map(Ne.fromDom);var n,o,r},ma=function(t,e,n){return Er(Ze,fa,t,e,n)},ha=function(e,t){return(n=t,Lr(n,function(t){if(!wn(t))return!1;var e=Mn(t,"id");return e!==undefined&&-1<e.indexOf("aria-owns")}).bind(function(t){var e=Mn(t,"id"),n=on(t);return da(n,'[aria-owns="'+e+'"]')})).exists(function(t){return ga(e,t)});var n},ga=function(e,t){return n=t,r=U(!(o=function(t){return nn(t,e.element())})),Lr(n,o,r).isSome()||ha(e,t);var n,o,r},va=U([Zo("menu"),Zo("selectedMenu")]),pa=U([Zo("item"),Zo("selectedItem")]),ba=(U(Vo(pa().concat(va()))),U(Vo(pa()))),ya=rr("initSize",[Zo("numColumns"),Zo("numRows")]),xa=function(){return rr("markers",[Zo("backgroundMenu")].concat(va()).concat(pa()))},wa=function(t){return rr("markers",E(t,Zo))},za=function(t,e,n){return function(){var t=new Error;if(t.stack!==undefined){var e=t.stack.split("\n");_(e,function(e){return 0<e.indexOf("alloy")&&!H(In,function(t){return-1<e.indexOf(t)})}).getOr(Bn)}}(),_o(e,e,n,Ro(function(n){return ft.value(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(undefined,t)})}))},Sa=function(t){return za(0,t,Jn(N))},ka=function(t){return za(0,t,Jn(P.none))},Ca=function(t){return za(0,t,$n())},Oa=function(t){return za(0,t,$n())},Ma=function(t,e){return xr(t,U(e))},Ha=function(t){return xr(t,d)},Va=U(ya),Ea=function(n,o,r){return ti(function(t,e){r(t,n,o)})},Ta=function(t,e,n,o,r,i){var a,u,c=Ho(t),s=fr(e,[(a="config",u=t,_o(a,a,Qn(),Ho(u)))]);return Da(c,s,e,n,o,r,i)},Aa=function(r,i,a){var t,e,n,o,u,c;return t=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var o=[n].concat(t);return n.config({name:U(r)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+r+". Using API: "+a)},function(t){var e=Array.prototype.slice.call(o,1);return i.apply(undefined,[n,t.config,t.state].concat(e))})},e=a,n=i.toString(),o=n.indexOf(")")+1,u=n.indexOf("("),c=n.substring(u+1,o-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:e,parameters:hi(c.slice(0,1).concat(c.slice(3)))}},t},Ba=function(t){return{key:t,value:undefined}},Da=function(n,t,o,r,e,i,a){var u=function(t){return kt(t,o)?t[o]():P.none()},c=et(e,function(t,e){return Aa(o,t,e)}),s=et(i,function(t,e){return gi(t,e)}),l=Gn({},s,c,{revoke:v(Ba,o),config:function(t){var e=Uo(o+"-config",n,t);return{key:o,value:{config:e,me:l,configAsRaw:Gt(function(){return Uo(o+"-config",n,t)}),initialConfig:t,state:a}}},schema:function(){return t},exhibit:function(t,n){return u(t).bind(function(e){return xt(r,"exhibit").map(function(t){return t(n,e.config,e.state)})}).getOr(zi({}))},name:function(){return o},handlers:function(t){return u(t).map(function(t){return yt("events",function(t,e){return{}})(r)(t.config,t.state)}).getOr({})}});return l},_a=function(t){return zt(t)},Fa=Ho([Zo("fields"),Zo("name"),dr("active",{}),dr("apis",{}),dr("state",yi),dr("extra",{})]),Ia=function(t){var e=Uo("Creating behaviour: "+t.name,Fa,t);return Ta(e.fields,e.name,e.active,e.apis,e.extra,e.state)},La=Ho([Zo("branchKey"),Zo("branches"),Zo("name"),dr("active",{}),dr("apis",{}),dr("state",yi),dr("extra",{})]),Ra=function(t){var e,n,o,r,i,a,u,c,s=Uo("Creating behaviour: "+t.name,La,t);return e=Go(s.branchKey,s.branches),n=s.name,o=s.active,r=s.apis,i=s.extra,a=s.state,c=fr(n,[cr("config",u=e)]),Da(u,c,n,o,r,i,a)},Na=U(undefined),Pa=Object.freeze({events:function(u){return Pr([Wr(ze(),function(r,i){var t,e,a=u.channels,n=Q(a),o=(t=n,(e=i).universal()?t:A(t,function(t){return M(e.channels(),t)}));T(o,function(t){var e=a[t],n=e.schema,o=Uo("channel["+t+"] data\nReceiver: "+An(r.element()),n,i.data());e.onReceive(r,o)})})])}}),ja=[tr("channels",No(ft.value,Ho([Ca("onReceive"),dr("schema",Xo())])))],Ua=Ia({fields:ja,name:"receiving",active:Pa}),Wa=Object.freeze({exhibit:function(t,e){return zi({classes:[],styles:e.useFixed?{}:{position:"relative"}})}}),Ga=function(n,o){return{left:U(n),top:U(o),translate:function(t,e){return Ga(n+t,o+e)}}},Xa=Ga,Ya=function(t,e){return t!==undefined?t:e!==undefined?e:0},qa=function(t){var e,n,o=t.dom().ownerDocument,r=o.body,i=(e=Ne.fromDom(o),(n=e.dom())===n.window&&e instanceof Window?e:Sn(e)?n.defaultView||n.parentWindow:null),a=o.documentElement,u=Ya(i.pageYOffset,a.scrollTop),c=Ya(i.pageXOffset,a.scrollLeft),s=Ya(a.clientTop,r.clientTop),l=Ya(a.clientLeft,r.clientLeft);return Ka(t).translate(c-l,u-s)},Ka=function(t){var e,n,o,r=t.dom(),i=r.ownerDocument,a=i.body,u=Ne.fromDom(i.documentElement);return a===r?Xa(a.offsetLeft,a.offsetTop):(e=t,n=u||Ne.fromDom(document.documentElement),Ir(e,v(nn,n)).isSome()?(o=r.getBoundingClientRect(),Xa(o.left,o.top)):Xa(0,0))},Ja=(pe.detect().browser.isSafari(),function(t){var e=t!==undefined?t.dom():document,n=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return Xa(n,o)});function $a(o,r){var t=function(t){var e=r(t);if(e<=0||null===e){var n=Xi(t,o);return parseFloat(n)||0}return e},i=function(r,t){return D(t,function(t,e){var n=Xi(r,e),o=n===undefined?0:parseInt(n,10);return isNaN(o)?t:t+o},0)};return{set:function(t,e){if(!k(e)&&!e.match(/^[0-9]+$/))throw new Error(o+".set accepts only positive integer values. Value was "+e);var n=t.dom();Pi(n)&&(n.style[o]=e+"px")},get:t,getOuter:t,aggregate:i,max:function(t,e,n){var o=i(t,n);return o<e?e-o:0}}}var Qa,Za,tu=$a("width",function(t){return t.dom().offsetWidth}),eu=function(t){return tu.get(t)},nu=function(t){return tu.getOuter(t)},ou=$a("height",function(t){var e=t.dom();return Dr(t)?e.getBoundingClientRect().height:e.offsetHeight}),ru=function(t){return ou.get(t)},iu=function(t){return ou.getOuter(t)},au=We(["x","y","width","height","maxHeight","direction","classes","label","candidateYforTest"],[]),uu=Pe("position","left","top","right","bottom"),cu=dt([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),su=cu.southeast,lu=cu.southwest,fu=cu.northeast,du=cu.northwest,mu=cu.south,hu=cu.north,gu=cu.east,vu=cu.west,pu=Pe("point","width","height"),bu=Pe("x","y","width","height"),yu=function(t,e,n,o){return{x:U(t),y:U(e),width:U(n),height:U(o),right:U(t+n),bottom:U(e+o)}},xu=function(t){var e=qa(t),n=nu(t),o=iu(t);return yu(e.left(),e.top(),n,o)},wu=function(o,t){return o.view(t).fold(U([]),function(t){var e=o.owner(t),n=wu(o,e);return[t].concat(n)})},zu=Object.freeze({view:function(t){return(t.dom()===document?P.none():P.from(t.dom().defaultView.frameElement)).map(Ne.fromDom)},owner:function(t){return on(t)}}),Su=function(o){var t,e,n,r,i=Ne.fromDom(document),a=Ja(i);return(t=o,n=(e=zu).owner(t),r=wu(e,n),P.some(r)).fold(v(qa,o),function(t){var e=Ka(o),n=B(t,function(t,e){var n=Ka(e);return{left:t.left+n.left(),top:t.top+n.top()}},{left:0,top:0});return Xa(n.left+e.left()+a.left(),n.top+e.top()+a.top())})},ku=function(){var t=window.innerWidth,e=window.innerHeight,n=Ne.fromDom(document),o=Ja(n);return yu(o.left(),o.top(),t,e)},Cu=dt([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Ou=function(t,e,n,o,r,i){var a,u,c,s,l,f,d,m,h,g=e.x()-n,v=e.y()-o,p=r-(g+e.width()),b=i-(v+e.height()),y=P.some(g),x=P.some(v),w=P.some(p),z=P.some(b),S=P.none();return a=e.direction(),u=function(){return uu(t,y,x,S,S)},c=function(){return uu(t,S,x,w,S)},s=function(){return uu(t,y,S,S,z)},l=function(){return uu(t,S,S,w,z)},f=function(){return uu(t,y,x,S,S)},d=function(){return uu(t,y,S,S,z)},m=function(){return uu(t,y,x,S,S)},h=function(){return uu(t,S,x,w,S)},a.fold(u,c,s,l,f,d,m,h)},Mu=function(t,e){var n=v(Su,e),o=t.fold(n,n,function(){var t=Ja();return Su(e).translate(-t.left(),-t.top())}),r=nu(e),i=iu(e);return yu(o.left(),o.top(),r,i)},Hu=Cu.relative,Vu=Cu.fixed,Eu=Pe("anchorBox","origin"),Tu=dt([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),Au=function(t,I,L,R,N){var P=L.width(),j=L.height(),o=function(t,o,r,i){var e,n,a,u,c,s,l,f,d,m,h,g,v,p,b,y,x,w,z,S,k,C,O,M,H,V,E,T,A,B,D,_,F=t(I,L,R);return(n=P,a=j,u=N,d=(e=F).x(),m=e.y(),h=e.bubble().offset().left(),g=e.bubble().offset().top(),v=u.x(),p=u.y(),b=u.width(),y=u.height(),S=p<=(w=m+g),k=(z=v<=(x=d+h))&&S,C=x+n<=v+b&&w+a<=p+y,O=z?Math.min(n,v+b-x):Math.abs(v-(x+n)),M=S?Math.min(a,p+y-w):Math.abs(p-(w+a)),H=u.x()+u.width(),V=Math.max(u.x(),x),E=Math.min(V,H),A=U((T=S?w:w+(a-M))+M-p),B=U(p+y-T),c=e.direction(),l=s=B,f=A,D=c.fold(s,s,f,f,s,f,l,l),_=au({x:E,y:T,width:O,height:M,maxHeight:D,direction:e.direction(),classes:{on:e.bubble().classesOn(),off:e.bubble().classesOff()},label:e.label(),candidateYforTest:w}),k&&C?Tu.fit(_):Tu.nofit(_,O,M)).fold(Tu.fit,function(t,e,n){return i<n||r<e?Tu.nofit(t,e,n):Tu.nofit(o,r,i)})};return D(t,function(t,e){var n=v(o,e);return t.fold(Tu.fit,n)},Tu.nofit(au({x:I.x(),y:I.y(),width:L.width(),height:L.height(),maxHeight:L.height(),direction:su(),classes:[],label:"none",candidateYforTest:I.y()}),-1,-1)).fold(d,d)},Bu=function(t,e,n,o){Ji(e,"max-height");var r,i={width:U(nu(r=e)),height:U(iu(r))};return Au(o.preference(),t,i,n,o.bounds())},Du=function(t,e,n){var o,r,i,a,u,c=function(t){return t+"px"},s=(o=n.origin(),r=e,o.fold(function(){return uu("absolute",P.some(r.x()),P.some(r.y()),P.none(),P.none())},function(t,e,n,o){return Ou("absolute",r,t,e,n,o)},function(t,e,n,o){return Ou("fixed",r,t,e,n,o)}));i=t,a={position:P.some(s.position()),left:s.left().map(c),top:s.top().map(c),right:s.right().map(c),bottom:s.bottom().map(c)},u=i.dom(),tt(a,function(t,e){t.fold(function(){Ui(u,e)},function(t){ji(u,e,t)})})},_u=function(t,e){var n,o,r;n=t,o=Math.floor(e),r=ou.max(n,o,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]),Wi(n,"max-height",r+"px")},Fu=U(function(t,e){_u(t,e),Gi(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Iu=U(function(t,e){_u(t,e)}),Lu=We(["bounds","origin","preference","maxHeightFunction"],[]),Ru=function(t,e,n,o,r,i){var a,u,c,s,l,f=(a=i,u="maxHeightFunction",c=Fu(),a[u]===undefined?c:a[u]),d=t.anchorBox(),m=t.origin(),h=Lu({bounds:(s=m,l=r,l.fold(function(){return s.fold(ku,ku,yu)},function(t){return s.fold(t,t,yu)})),origin:m,preference:o,maxHeightFunction:f});Nu(d,e,n,h)},Nu=function(t,e,n,o){var r,i,a,u,c=Bu(t,e,n,o);Du(e,c,o),r=e,i=c.classes(),Ni(r,i.off),Ri(r,i.on),a=e,u=c,o.maxHeightFunction()(a,u.maxHeight())},Pu=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],ju=function(t,e,n){var r=function(t){return xt(n,t).getOr([])},o=function(t,e,n){var o=Y(Pu,n);return{offset:function(){return Xa(t,e)},classesOn:function(){return j(n,r)},classesOff:function(){return j(o,r)}}};return{southeast:function(){return o(-t,e,["top","alignLeft"])},southwest:function(){return o(t,e,["top","alignRight"])},south:function(){return o(-t/2,e,["top","alignCentre"])},northeast:function(){return o(-t,-e,["bottom","alignLeft"])},northwest:function(){return o(t,-e,["bottom","alignRight"])},north:function(){return o(-t/2,-e,["bottom","alignCentre"])},east:function(){return o(t,-e/2,["valignCentre","left"])},west:function(){return o(-t,-e/2,["valignCentre","right"])}}},Uu=function(){return ju(0,0,{})},Wu=Pe("x","y","bubble","direction","label"),Gu=function(t){return t.x()},Xu=function(t,e){return t.x()+t.width()/2-e.width()/2},Yu=function(t,e){return t.x()+t.width()-e.width()},qu=function(t,e){return t.y()-e.height()},Ku=function(t){return t.y()+t.height()},Ju=function(t,e){return t.y()+t.height()/2-e.height()/2},$u=function(t,e,n){return Wu(Gu(t),Ku(t),n.southeast(),su(),"layout-se")},Qu=function(t,e,n){return Wu(Yu(t,e),Ku(t),n.southwest(),lu(),"layout-sw")},Zu=function(t,e,n){return Wu(Gu(t),qu(t,e),n.northeast(),fu(),"layout-ne")},tc=function(t,e,n){return Wu(Yu(t,e),qu(t,e),n.northwest(),du(),"layout-nw")},ec=function(t,e,n){return Wu(Xu(t,e),qu(t,e),n.north(),hu(),"layout-n")},nc=function(t,e,n){return Wu(Xu(t,e),Ku(t),n.south(),mu(),"layout-s")},oc=function(t,e,n){return Wu((o=t).x()+o.width(),Ju(t,e),n.east(),gu(),"layout-e");var o},rc=function(t,e,n){return Wu((o=e,t.x()-o.width()),Ju(t,e),n.west(),vu(),"layout-w");var o},ic=function(){return[$u,Qu,Zu,tc,nc,ec,oc,rc]},ac=function(){return[Qu,$u,tc,Zu,nc,ec,oc,rc]},uc=function(t){return t},cc=function(e,n){return function(t){return"rtl"===sc(t)?n:e}},sc=function(t){return"rtl"===Xi(t,"direction")?"rtl":"ltr"},lc=function(){return fr("layouts",[Zo("onLtr"),Zo("onRtl")])},fc=function(e,t,n,o){var r=t.layouts.map(function(t){return t.onLtr(e)}).getOr(n),i=t.layouts.map(function(t){return t.onRtl(e)}).getOr(o);return cc(r,i)(e)},dc=[Zo("hotspot"),lc(),Ma("placement",function(t,e,n){var o=e.hotspot,r=Mu(n,o.element()),i=fc(t.element(),e,ic(),ac());return P.some(uc({anchorBox:r,bubble:Uu(),overrides:{},layouts:i,placer:P.none()}))})],mc=[Zo("x"),Zo("y"),dr("height",0),dr("width",0),dr("bubble",Uu()),lc(),Ma("placement",function(t,e,n){var o=yu(e.x,e.y,e.width,e.height),r=fc(t.element(),e,ic(),ac());return P.some(uc({anchorBox:o,bubble:e.bubble,overrides:{},layouts:r,placer:P.none()}))})],hc=(dt([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),dt([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}])),gc=Pe("start","soffset","finish","foffset"),vc=(hc.domRange,hc.relative,hc.exact),pc=function(t,e,n,o){var r,i,a,u,c,s=(i=e,a=n,u=o,(c=on(r=t).dom().createRange()).setStart(r.dom(),i),c.setEnd(a.dom(),u),c),l=nn(t,n)&&e===o;return s.collapsed&&!l},bc=function(t,e,n){var o,r,i=t.document.createRange();return o=i,e.fold(function(t){o.setStartBefore(t.dom())},function(t,e){o.setStart(t.dom(),e)},function(t){o.setStartAfter(t.dom())}),r=i,n.fold(function(t){r.setEndBefore(t.dom())},function(t,e){r.setEnd(t.dom(),e)},function(t){r.setEndAfter(t.dom())}),i},yc=function(t,e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(o.dom(),r),i},xc=function(t){return{left:U(t.left),top:U(t.top),right:U(t.right),bottom:U(t.bottom),width:U(t.width),height:U(t.height)}},wc=dt([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),zc=function(t,e,n){return e(Ne.fromDom(n.startContainer),n.startOffset,Ne.fromDom(n.endContainer),n.endOffset)},Sc=function(t,e){var r,n,o,i=(r=t,e.match({domRange:function(t){return{ltr:U(t),rtl:P.none}},relative:function(t,e){return{ltr:Gt(function(){return bc(r,t,e)}),rtl:Gt(function(){return P.some(bc(r,e,t))})}},exact:function(t,e,n,o){return{ltr:Gt(function(){return yc(r,t,e,n,o)}),rtl:Gt(function(){return P.some(yc(r,n,o,t,e))})}}}));return(o=(n=i).ltr()).collapsed?n.rtl().filter(function(t){return!1===t.collapsed}).map(function(t){return wc.rtl(Ne.fromDom(t.endContainer),t.endOffset,Ne.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return zc(0,wc.ltr,o)}):zc(0,wc.ltr,o)},kc=function aV(n,o){var r=function(t){return n(t)?P.from(t.dom().nodeValue):P.none()},t=pe.detect().browser,e=t.isIE()&&10===t.version.major?function(t){try{return r(t)}catch(e){return P.none()}}:r;return{get:function(t){if(!n(t))throw new Error("Can only get "+o+" value of a "+o+" node");return e(t).getOr("")},getOption:e,set:function(t,e){if(!n(t))throw new Error("Can only set raw "+o+" value of a "+o+" node");t.dom().nodeValue=e}}}(zn,"text"),Cc=function(t){return kc.get(t)},Oc=(document.caretPositionFromPoint||document.caretRangeFromPoint,function(t,e){return en(e,t)}),Mc=function(t){var e=Ne.fromDom(t.anchorNode),n=Ne.fromDom(t.focusNode);return pc(e,t.anchorOffset,n,t.focusOffset)?P.some(gc(Ne.fromDom(t.anchorNode),t.anchorOffset,Ne.fromDom(t.focusNode),t.focusOffset)):function(t){if(0<t.rangeCount){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return P.some(gc(Ne.fromDom(e.startContainer),e.startOffset,Ne.fromDom(n.endContainer),n.endOffset))}return P.none()}(t)},Hc=function(t,e){var i,n,o,r,a=Sc(i=t,e).match({ltr:function(t,e,n,o){var r=i.document.createRange();return r.setStart(t.dom(),e),r.setEnd(n.dom(),o),r},rtl:function(t,e,n,o){var r=i.document.createRange();return r.setStart(n.dom(),o),r.setEnd(t.dom(),e),r}});return o=(n=a).getClientRects(),0<(r=0<o.length?o[0]:n.getBoundingClientRect()).width||0<r.height?P.some(r).map(xc):P.none()},Vc=Pe("element","offset"),Ec=dt([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Tc=function(t){return t.fold(function(t){return t},function(t,e,n){return t.translate(-e,-n)})},Ac=function(t){return t.fold(function(t){return t},function(t,e,n){return t})},Bc=function(t){return D(t,function(t,e){return t.translate(e.left(),e.top())},Xa(0,0))},Dc=function(t){var e=E(t,Ac);return Bc(e)},_c=Ec.screen,Fc=Ec.absolute,Ic=function(t,e,n){var o,r,i,a=on(t.element()),u=Ja(a),c=(o=t,r=n,i=rn(r.root).dom(),P.from(i.frameElement).map(Ne.fromDom).filter(function(t){var e=on(t),n=on(o.element());return nn(e,n)}).map(qa)).getOr(u);return Fc(c,u.left(),u.top())},Lc=function(t,e,n,o){var r=t,i=e,a=n,u=o;t<0&&(r=0,a=n+t),e<0&&(i=0,u=o+e);var c=_c(Xa(r,i));return P.some(pu(c,a,u))},Rc=function(t,c,s,l,f){return t.map(function(t){var e,n,o,r=[c,t.point()],i=(e=function(){return Dc(r)},n=function(){return Dc(r)},o=function(){return t=E(r,Tc),Bc(t);var t},l.fold(e,n,o)),a=bu(i.left(),i.top(),t.width(),t.height()),u=fc(f,s,s.showAbove?[Zu,tc,$u,Qu,ec,nc]:[$u,Qu,Zu,tc,nc,nc],s.showAbove?[tc,Zu,Qu,$u,ec,nc]:[Qu,$u,tc,Zu,nc,ec]);return uc({anchorBox:a,bubble:s.bubble.getOr(Uu()),overrides:s.overrides,layouts:u,placer:P.none()})})},Nc=Pe("element","offset"),Pc=function(t,e){return zn(t)?Nc(t,e):function(t,e){var n=cn(t);if(0===n.length)return Vc(t,e);if(e<n.length)return Vc(n[e],0);var o=n[n.length-1],r=zn(o)?Cc(o).length:cn(o).length;return Vc(o,r)}(t,e)},jc=function(e,t){return t.getSelection.getOrThunk(function(){return function(){return t=e,P.from(t.getSelection()).filter(function(t){return 0<t.rangeCount}).bind(Mc);var t}})().map(function(t){var e=Pc(t.start(),t.soffset()),n=Pc(t.finish(),t.foffset());return gc(e.element(),e.offset(),n.element(),n.offset())})},Uc=[ur("getSelection"),Zo("root"),ur("bubble"),lc(),dr("overrides",{}),dr("showAbove",!1),Ma("placement",function(t,e,n){var o=rn(e.root).dom(),r=Ic(t,0,e),i=jc(o,e).bind(function(t){var e;return Hc(o,(e=t,hc.exact(e.start(),e.soffset(),e.finish(),e.foffset()))).orThunk(function(){var e=Ne.fromText("\ufeff");return ln(t.start(),e),Hc(o,vc(e,0,e,1)).map(function(t){return vn(e),t})}).bind(function(t){return Lc(t.left(),t.top(),t.width(),t.height())})}),a=jc(o,e).bind(function(t){return wn(t.start())?P.some(t.start()):an(t.start())}).getOr(t.element());return Rc(i,r,e,n,a)})],Wc=[Zo("node"),Zo("root"),ur("bubble"),lc(),dr("overrides",{}),dr("showAbove",!1),Ma("placement",function(r,i,a){var u=Ic(r,0,i);return i.node.bind(function(t){var e=t.dom().getBoundingClientRect(),n=Lc(e.left,e.top,e.width,e.height),o=i.node.getOr(r.element());return Rc(n,u,i,a,o)})})],Gc=function(t){return t.x()+t.width()},Xc=function(t,e){return t.x()-e.width()},Yc=function(t,e){return t.y()-e.height()+t.height()},qc=function(t){return t.y()},Kc=function(t,e,n){return Wu(Gc(t),qc(t),n.southeast(),su(),"link-layout-se")},Jc=function(t,e,n){return Wu(Xc(t,e),qc(t),n.southwest(),lu(),"link-layout-sw")},$c=function(t,e,n){return Wu(Gc(t),Yc(t,e),n.northeast(),fu(),"link-layout-ne")},Qc=function(t,e,n){return Wu(Xc(t,e),Yc(t,e),n.northwest(),du(),"link-layout-nw")},Zc=[Zo("item"),lc(),Ma("placement",function(t,e,n){var o=Mu(n,e.item.element()),r=fc(t.element(),e,[Kc,Jc,$c,Qc],[Jc,Kc,Qc,$c]);return P.some(uc({anchorBox:o,bubble:Uu(),overrides:{},layouts:r,placer:P.none()}))})],ts=Go("anchor",{selection:Uc,node:Wc,hotspot:dc,submenu:Zc,makeshift:mc}),es=function(t,e,n,o,r){var i,a=(i=n.anchorBox,Eu(i,e));Ru(a,r.element(),n.bubble,n.layouts,o,n.overrides)},ns=function(e,t,n,o,r,i){var a=Uo("positioning anchor.info",ts,o);Wi(r.element(),"position","fixed");var u=qi(r.element(),"visibility");Wi(r.element(),"visibility","hidden");var c,s,l,f=t.useFixed?Vu(0,0,window.innerWidth,window.innerHeight):(s=qa((c=e).element()),l=c.element().dom().getBoundingClientRect(),Hu(s.left(),s.top(),l.width,l.height)),d=a.placement,m=i.map(function(t){return function(){return xu(t)}}).or(t.getBounds);d(e,a,f).each(function(t){t.placer.getOr(es)(e,f,t,m,r)}),u.fold(function(){Ji(r.element(),"visibility")},function(t){Wi(r.element(),"visibility",t)}),qi(r.element(),"left").isNone()&&qi(r.element(),"top").isNone()&&qi(r.element(),"right").isNone()&&qi(r.element(),"bottom").isNone()&&qi(r.element(),"position").is("fixed")&&Ji(r.element(),"position")},os=Object.freeze({position:function(t,e,n,o,r){var i=P.none();ns(t,e,n,o,r,i)},positionWithin:ns,getMode:function(t,e,n){return e.useFixed?"fixed":"absolute"}}),rs=[dr("useFixed",!1),ur("getBounds")],is=Ia({fields:rs,name:"positioning",active:Wa,apis:os}),as=function(t){kr(t,Be());var e=t.components();T(e,as)},us=function(t){var e=t.components();T(e,us),kr(t,Ae())},cs=function(t,e){ss(t,e,mn)},ss=function(t,e,n){t.getSystem().addToWorld(e),n(t.element(),e.element()),Dr(t.element())&&us(e),t.syncComponents()},ls=function(t){as(t),vn(t.element()),t.getSystem().removeFromWorld(t)},fs=function(e){var t=an(e.element()).bind(function(t){return e.getSystem().getByDom(t).fold(P.none,P.some)});ls(e),t.each(function(t){t.syncComponents()})},ds=function(t){var e=t.components();T(e,ls),gn(t.element()),t.syncComponents()},ms=function(t,e){hs(t,e,mn)},hs=function(t,e,n){n(t,e.element());var o=cn(e.element());T(o,function(t){e.getByDom(t).each(us)})},gs=function(e){var t=cn(e.element());T(t,function(t){e.getByDom(t).each(as)}),vn(e.element())},vs=function(t,e,n,o){var r=function(e,t,n,o){n.get().each(function(t){ds(e)});var r=t.getAttachPoint(e);cs(r,e);var i=e.getSystem().build(o);return cs(e,i),n.set(i),i}(t,e,n,o);return e.onOpen(t,r),r},ps=function(e,n,o){o.get().each(function(t){ds(e),fs(e),n.onClose(e,t),o.clear()})},bs=function(t,e,n){return n.isOpen()},ys=function(t,e,n){var o,r,i,a,u=e.getAttachPoint(t);Wi(t.element(),"position",is.getMode(u)),o=t,r="visibility",i=e.cloakVisibilityAttr,a="hidden",qi(o.element(),r).fold(function(){Vn(o.element(),i)},function(t){Cn(o.element(),i,t)}),Wi(o.element(),r,a)},xs=function(t,e,n){var o;o=t.element(),H(["top","left","right","bottom"],function(t){return qi(o,t).isSome()})||Ji(t.element(),"position"),function(t,e,n){if(Hn(t.element(),n)){var o=Mn(t.element(),n);Wi(t.element(),e,o)}else Ji(t.element(),e)}(t,"visibility",e.cloakVisibilityAttr)},ws=Object.freeze({cloak:ys,decloak:xs,open:vs,openWhileCloaked:function(t,e,n,o,r){ys(t,e,n),vs(t,e,n,o),r(),xs(t,e,n)},close:ps,isOpen:bs,isPartOf:function(e,n,t,o){return bs(0,0,t)&&t.get().exists(function(t){return n.isPartOf(e,t,o)})},getState:function(t,e,n){return n.get()}}),zs=Object.freeze({events:function(n,o){return Pr([Wr(He(),function(t,e){ps(t,n,o)})])}}),Ss=[Sa("onOpen"),Sa("onClose"),Zo("isPartOf"),Zo("getAttachPoint"),dr("cloakVisibilityAttr","data-precloak-visibility")],ks=Ia({fields:Ss,name:"sandboxing",active:zs,apis:ws,state:Object.freeze({init:function(){var e=Ct(P.none()),t=U("not-implemented");return xi({readState:t,isOpen:function(){return e.get().isSome()},clear:function(){e.set(P.none())},set:function(t){e.set(P.some(t))},get:function(t){return e.get()}})}})}),Cs=U("dismiss.popups"),Os=U("mouse.released"),Ms=Ho([dr("isExtraPart",U(!1)),fr("fireEventInstead",[dr("event",De())])]),Hs=function(t){var e=Vs(t);return Ua.config(e)},Vs=function(t){var n=Uo("Dismissal",Ms,t);return{channels:wt(Cs(),{schema:Ho([Zo("target")]),onReceive:function(e,t){ks.isOpen(e)&&(ks.isPartOf(e,t.target)||n.isExtraPart(e,t.target)||n.fireEventInstead.fold(function(){return ks.close(e)},function(t){return kr(e,t.event)}))}})}},Es=function(o,t){return yr(o,{},E(t,function(t){return e=t.name(),n="Cannot configure "+t.name()+" for "+o,_o(e,e,Qn(),Mo(function(t){return co("The field: "+e+" is forbidden. "+n)}));var e,n}).concat([xr("dump",d)]))},Ts=function(t){return t.dump},As=function(t,e){return Gn({},t.dump,_a(e))},Bs=Es,Ds=As,_s="placeholder",Fs=dt([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Is=function(t,e,n,o){return n.uiType===_s?(i=n,a=o,(r=t).exists(function(t){return t!==i.owner})?Fs.single(!0,U(i)):xt(a,i.name).fold(function(){throw new Error("Unknown placeholder component: "+i.name+"\nKnown: ["+Q(a)+"]\nNamespace: "+r.getOr("none")+"\nSpec: "+xo(i,null,2))},function(t){return t.replace()})):Fs.single(!1,U(n));var r,i,a},Ls=function(i,a,u,c){return Is(i,0,u,c).fold(function(t,e){var n=e(a,u.config,u.validated),o=xt(n,"components").getOr([]),r=j(o,function(t){return Ls(i,a,t,c)});return[Gn({},n,{components:r})]},function(t,e){var n=e(a,u.config,u.validated);return u.validated.preprocess.getOr(d)(n)})},Rs=function(e,n,t,o){var r,i,a,u=et(o,function(t,e){return o=t,r=!1,{name:U(n=e),required:function(){return o.fold(function(t,e){return t},function(t,e){return t})},used:function(){return r},replace:function(){if(!0===r)throw new Error("Trying to use the same placeholder more than once: "+n);return r=!0,o}};var n,o,r}),c=(r=e,i=n,a=u,j(t,function(t){return Ls(r,i,t,a)}));return tt(u,function(t){if(!1===t.used()&&t.required())throw new Error("Placeholder: "+t.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+xo(n.components,null,2))}),c},Ns=Fs.single,Ps=Fs.multiple,js=U(_s),Us=dt([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Ws=dr("factory",{sketch:d}),Gs=dr("schema",[]),Xs=Zo("name"),Ys=_o("pname","pname",Zn(function(t){return"<alloy."+Un(t.name)+">"}),Xo()),qs=xr("schema",function(){return[ur("preprocess")]}),Ks=dr("defaults",U({})),Js=dr("overrides",U({})),$s=Vo([Ws,Gs,Xs,Ys,Ks,Js]),Qs=Vo([Ws,Gs,Xs,Ks,Js]),Zs=Vo([Ws,Gs,Xs,Ys,Ks,Js]),tl=Vo([Ws,qs,Xs,Zo("unit"),Ys,Ks,Js]),el=function(t){return t.fold(P.some,P.none,P.some,P.some)},nl=function(t){var e=function(t){return t.name};return t.fold(e,e,e,e)},ol=function(n,o){return function(t){var e=Uo("Converting part type",o,t);return n(e)}},rl=ol(Us.required,$s),il=ol(Us.external,Qs),al=ol(Us.optional,Zs),ul=ol(Us.group,tl),cl=U("entirety"),sl=Object.freeze({required:rl,external:il,optional:al,group:ul,asNamedPart:el,name:nl,asCommon:function(t){return t.fold(d,d,d,d)},original:cl}),ll=function(t,e,n,o){return gt(e.defaults(t,n,o),n,{uid:t.partUids[e.name]},e.overrides(t,n,o))},fl=function(r,t){var e={};return T(t,function(t){el(t).each(function(n){var o=dl(r,n.pname);e[n.name]=function(t){var e=Uo("Part: "+n.name+" in "+r,Vo(n.schema),t);return Gn({},o,{config:t,validated:e})}})}),e},dl=function(t,e){return{uiType:js(),owner:t,name:e}},ml=function(t,e,n){return{uiType:js(),owner:t,name:e,config:n,validated:{}}},hl=function(t){return j(t,function(t){return t.fold(P.none,P.some,P.none,P.none).map(function(t){return rr(t.name,t.schema.concat([Ha(cl())]))}).toArray()})},gl=function(t){return E(t,nl)},vl=function(t,e,n){return o=e,i={},r={},T(n,function(t){t.fold(function(o){i[o.pname]=Ns(!0,function(t,e,n){return o.factory.sketch(ll(t,o,e,n))})},function(t){var e=o.parts[t.name];r[t.name]=U(t.factory.sketch(ll(o,t,e[cl()]),e))},function(o){i[o.pname]=Ns(!1,function(t,e,n){return o.factory.sketch(ll(t,o,e,n))})},function(r){i[r.pname]=Ps(!0,function(e,t,n){var o=e[r.name];return E(o,function(t){return r.factory.sketch(gt(r.defaults(e,t,n),t,r.overrides(e,t)))})})})}),{internals:U(i),externals:U(r)};var o,i,r},pl=function(t,e,n){return Rs(P.some(t),e,e.components,n)},bl=function(t,e,n){var o=e.partUids[n];return t.getSystem().getByUid(o).toOption()},yl=function(t,e,n){return bl(t,e,n).getOrDie("Could not find part: "+n)},xl=function(t,e,n){var o={},r=e.partUids,i=t.getSystem();return T(n,function(t){o[t]=i.getByUid(r[t])}),et(o,U)},wl=function(t,e){var n=t.getSystem();return et(e.partUids,function(t,e){return U(n.getByUid(t))})},zl=function(t){return Q(t.partUids)},Sl=function(t,e,n){var o={},r=e.partUids,i=t.getSystem();return T(n,function(t){o[t]=i.getByUid(r[t]).getOrDie()}),et(o,U)},kl=function(e,t){var n=gl(t);return zt(E(n,function(t){return{key:t,value:e+"-"+t}}))},Cl=function(e){return _o("partUids","partUids",to(function(t){return kl(t.uid,e)}),Xo())},Ol=Object.freeze({generate:fl,generateOne:ml,schemas:hl,names:gl,substitutes:vl,components:pl,defaultUids:kl,defaultUidsSchema:Cl,getAllParts:wl,getAllPartNames:zl,getPart:bl,getPartOrDie:yl,getParts:xl,getPartsOrDie:Sl}),Ml=function(t,e,n,o,r){var i,a,u=(a=r,(0<(i=o).length?[rr("parts",i)]:[]).concat([Zo("uid"),dr("dom",{}),dr("components",[]),Ha("originalSpec"),dr("debug.sketcher",{})]).concat(a));return Uo(t+" [SpecSchema]",Ho(u.concat(e)),n)},Hl=function(t,e,n,o,r){var i=Vl(r),a=hl(n),u=Cl(n),c=Ml(t,e,i,a,[u]),s=vl(0,c,n);return o(c,pl(t,c,s.internals()),i,s.externals())},Vl=function(t){return t.hasOwnProperty("uid")?t:Gn({},t,{uid:li("uid")})},El=Ho([Zo("name"),Zo("factory"),Zo("configFields"),dr("apis",{}),dr("extraApis",{})]),Tl=Ho([Zo("name"),Zo("factory"),Zo("configFields"),Zo("partFields"),dr("apis",{}),dr("extraApis",{})]),Al=function(t){var i=Uo("Sketcher for "+t.name,El,t),e=et(i.apis,bi),n=et(i.extraApis,function(t,e){return gi(t,e)});return Gn({name:U(i.name),partFields:U([]),configFields:U(i.configFields),sketch:function(t){return e=i.name,n=i.configFields,o=i.factory,r=Vl(t),o(Ml(e,n,r,[],[]),r);var e,n,o,r}},e,n)},Bl=function(t){var e=Uo("Sketcher for "+t.name,Tl,t),n=fl(e.name,e.partFields),o=et(e.apis,bi),r=et(e.extraApis,function(t,e){return gi(t,e)});return Gn({name:U(e.name),partFields:U(e.partFields),configFields:U(e.configFields),sketch:function(t){return Hl(e.name,e.configFields,e.partFields,e.factory,t)},parts:U(n)},o,r)},Dl=function(t){return"input"===yn(t)&&"radio"!==Mn(t,"type")||"textarea"===yn(t)},_l=Object.freeze({getCurrent:function(t,e,n){return e.find(t)}}),Fl=[Zo("find")],Il=Ia({fields:Fl,name:"composing",apis:_l}),Ll=function(t,e,n,o){var r=t+e;return o<r?n:r<n?o:r},Rl=function(t,e,n){return t<=e?e:n<=t?n:t},Nl=function(e,n,t){var o=Oc(e.element(),"."+n.highlightClass);T(o,function(t){Ii(t,n.highlightClass),e.getSystem().getByDom(t).each(function(t){n.onDehighlight(e,t)})})},Pl=function(t,e,n,o){var r=jl(t,e,n,o);Nl(t,e),_i(o.element(),e.highlightClass),r||e.onHighlight(t,o)},jl=function(t,e,n,o){return Li(o.element(),e.highlightClass)},Ul=function(t,e,n,o){var r=Oc(t.element(),"."+e.itemClass);return P.from(r[o]).fold(function(){return ft.error("No element found with index "+o)},t.getSystem().getByDom)},Wl=function(e,t,n){return da(e.element(),"."+t.itemClass).bind(function(t){return e.getSystem().getByDom(t).toOption()})},Gl=function(e,t,n){var o=Oc(e.element(),"."+t.itemClass);return(0<o.length?P.some(o[o.length-1]):P.none()).bind(function(t){return e.getSystem().getByDom(t).toOption()})},Xl=function(n,e,t,o){var r=Oc(n.element(),"."+e.itemClass);return F(r,function(t){return Li(t,e.highlightClass)}).bind(function(t){var e=Ll(t,o,0,r.length-1);return n.getSystem().getByDom(r[e]).toOption()})},Yl=function(e,t,n){var o=Oc(e.element(),"."+t.itemClass);return Ot(E(o,function(t){return e.getSystem().getByDom(t).toOption()}))},ql=Object.freeze({dehighlightAll:Nl,dehighlight:function(t,e,n,o){var r=jl(t,e,n,o);Ii(o.element(),e.highlightClass),r&&e.onDehighlight(t,o)},highlight:Pl,highlightFirst:function(e,n,o){Wl(e,n,o).each(function(t){Pl(e,n,o,t)})},highlightLast:function(e,n,o){Gl(e,n,o).each(function(t){Pl(e,n,o,t)})},highlightAt:function(e,n,o,t){Ul(e,n,o,t).fold(function(t){throw new Error(t)},function(t){Pl(e,n,o,t)})},highlightBy:function(e,n,o,t){var r=Yl(e,n,o);_(r,t).each(function(t){Pl(e,n,o,t)})},isHighlighted:jl,getHighlighted:function(e,t,n){return da(e.element(),"."+t.highlightClass).bind(function(t){return e.getSystem().getByDom(t).toOption()})},getFirst:Wl,getLast:Gl,getPrevious:function(t,e,n){return Xl(t,e,0,-1)},getNext:function(t,e,n){return Xl(t,e,0,1)},getCandidates:Yl}),Kl=[Zo("highlightClass"),Zo("itemClass"),Sa("onHighlight"),Sa("onDehighlight")],Jl=Ia({fields:Kl,name:"highlighting",apis:ql}),$l=function(t,e,n){var o=X(t.slice(0,e)),r=X(t.slice(e+1));return _(o.concat(r),n)},Ql=function(t,e,n){var o=X(t.slice(0,e));return _(o,n)},Zl=function(t,e,n){var o=t.slice(0,e),r=t.slice(e+1);return _(r.concat(o),n)},tf=function(t,e,n){var o=t.slice(e+1);return _(o,n)},ef=function(n){return function(t){var e=t.raw();return M(n,e.which)}},nf=function(t){return function(e){return W(t,function(t){return t(e)})}},of=function(t){return!0===t.raw().shiftKey},rf=function(t){return!0===t.raw().ctrlKey},af=m(of),uf=function(t,e){return{matches:t,classification:e}},cf=function(t){t.dom().focus()},sf=function(t){var e=t!==undefined?t.dom():document;return P.from(e.activeElement).map(Ne.fromDom)},lf=function(e){return sf(on(e)).filter(function(t){return e.dom().contains(t.dom())})},ff=function(t,e,n){e.exists(function(e){return n.exists(function(t){return nn(t,e)})})||Cr(t,_e(),{prevFocus:e,newFocus:n})},df=function(){var r=function(t){return lf(t.element())};return{get:r,set:function(t,e){var n=r(t);t.getSystem().triggerFocus(e,t.element());var o=r(t);ff(t,n,o)}}},mf=function(){var r=function(t){return Jl.getHighlighted(t).map(function(t){return t.element()})};return{get:r,set:function(e,t){var n=r(e);e.getSystem().getByDom(t).fold(N,function(t){Jl.highlight(e,t)});var o=r(e);ff(e,n,o)}}};(Za=Qa||(Qa={})).OnFocusMode="onFocus",Za.OnEnterOrSpaceMode="onEnterOrSpace",Za.OnApiMode="onApi";var hf=function(t,e,n,o,u){var c=function(e,n,t,o,r){var i,a,u=t(e,n,o,r);return(i=u,a=n.event(),_(i,function(t){return t.matches(a)}).map(function(t){return t.classification})).bind(function(t){return t(e,n,o,r)})},r={schema:function(){return t.concat([dr("focusManager",df()),mr("focusInside","onFocus",Ro(function(t){return M(["onFocus","onEnterOrSpace","onApi"],t)?ft.value(t):ft.error("Invalid value for focusInside")})),Ma("handler",r),Ma("state",e),Ma("sendFocusIn",u)])},processKey:c,toEvents:function(i,a){var t=i.focusInside!==Qa.OnFocusMode?P.none():u(i).map(function(n){return Wr(ye(),function(t,e){n(t,i,a),e.stop()})});return Pr(t.toArray().concat([Wr(Lt(),function(o,r){c(o,r,n,i,a).fold(function(){var e,n,t;e=o,n=r,t=ef([32].concat([13]))(n.event()),i.focusInside===Qa.OnEnterOrSpaceMode&&t&&wr(e,n)&&u(i).each(function(t){t(e,i,a),n.stop()})},function(t){r.stop()})}),Wr(Rt(),function(t,e){c(t,e,o,i,a).each(function(t){e.stop()})})]))}};return r},gf=function(t){var e=[ur("onEscape"),ur("onEnter"),dr("selector",'[data-alloy-tabstop="true"]'),dr("firstTabstop",0),dr("useTabstopAt",U(!0)),ur("visibilitySelector")].concat([t]),a=function(t,e){var n=t.visibilitySelector.bind(function(t){return ma(e,t)}).getOr(e);return 0<ru(n)},n=function(e,n){var t,o,r,i;(t=e,o=n,r=Oc(t.element(),o.selector),i=A(r,function(t){return a(o,t)}),P.from(i[o.firstTabstop])).each(function(t){n.focusManager.set(e,t)})},u=function(e,t,n,o,r){return r(t,n,function(t){return a(e=o,n=t)&&e.useTabstopAt(n);var e,n}).fold(function(){return o.cyclic?P.some(!0):P.none()},function(t){return o.focusManager.set(e,t),P.some(!0)})},i=function(e,t,n,o){var r,i,a=Oc(e.element(),n.selector);return(r=e,i=n,i.focusManager.get(r).bind(function(t){return ma(t,i.selector)})).bind(function(t){return F(a,v(nn,t)).bind(function(t){return u(e,a,t,n,o)})})},o=U([uf(nf([of,ef([9])]),function(t,e,n,o){var r=n.cyclic?$l:Ql;return i(t,0,n,r)}),uf(ef([9]),function(t,e,n,o){var r=n.cyclic?Zl:tf;return i(t,0,n,r)}),uf(ef([27]),function(e,n,t,o){return t.onEscape.bind(function(t){return t(e,n)})}),uf(nf([af,ef([13])]),function(e,n,t,o){return t.onEnter.bind(function(t){return t(e,n)})})]),r=U([]);return hf(e,yi.init,o,r,function(){return P.some(n)})},vf=gf(xr("cyclic",U(!1))),pf=gf(xr("cyclic",U(!0))),bf=function(t,e,n){return Dl(n)&&ef([32])(e.event())?P.none():(Mr(t,n,Se()),P.some(!0))},yf=function(t,e){return P.some(!0)},xf=[dr("execute",bf),dr("useSpace",!1),dr("useEnter",!0),dr("useControlEnter",!1),dr("useDown",!1)],wf=function(t,e,n){return n.execute(t,e,t.element())},zf=hf(xf,yi.init,function(t,e,n,o){var r=n.useSpace&&!Dl(t.element())?[32]:[],i=n.useEnter?[13]:[],a=n.useDown?[40]:[],u=r.concat(i).concat(a);return[uf(ef(u),wf)].concat(n.useControlEnter?[uf(nf([rf,ef([13])]),wf)]:[])},function(t,e,n,o){return n.useSpace&&!Dl(t.element())?[uf(ef([32]),yf)]:[]},function(){return P.none()}),Sf=function(t){var n=Ct(P.none());return xi({readState:function(){return n.get().map(function(t){return{numRows:t.numRows(),numColumns:t.numColumns()}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(t,e){n.set(P.some({numRows:U(t),numColumns:U(e)}))},getNumRows:function(){return n.get().map(function(t){return t.numRows()})},getNumColumns:function(){return n.get().map(function(t){return t.numColumns()})}})},kf=Object.freeze({flatgrid:Sf,init:function(t){return t.state(t)}}),Cf=function(i){return function(t,e,n,o){var r=i(t.element());return Vf(r,t,e,n,o)}},Of=function(t,e){var n=cc(t,e);return Cf(n)},Mf=function(t,e){var n=cc(e,t);return Cf(n)},Hf=function(r){return function(t,e,n,o){return Vf(r,t,e,n,o)}},Vf=function(e,n,t,o,r){return o.focusManager.get(n).bind(function(t){return e(n.element(),t,o,r)}).map(function(t){return o.focusManager.set(n,t),!0})},Ef=Hf,Tf=Hf,Af=Hf,Bf=function(t){var e,n=t.dom();return!((e=n).offsetWidth<=0&&e.offsetHeight<=0)},Df=We(["index","candidates"],[]),_f=function(t,e,n){return Ff(t,e,n,Bf)},Ff=function(t,e,n,o){var r,i=v(nn,e),a=Oc(t,n),u=A(a,Bf);return F(r=u,i).map(function(t){return Df({index:t,candidates:r})})},If=function(t,e){return F(t,function(t){return nn(e,t)})},Lf=function(n,t,o,e){return e(Math.floor(t/o),t%o).bind(function(t){var e=t.row()*o+t.column();return 0<=e&&e<n.length?P.some(n[e]):P.none()})},Rf=function(r,t,i,a,u){return Lf(r,t,a,function(t,e){var n=t===i-1?r.length-t*a:a,o=Ll(e,u,0,n-1);return P.some({row:U(t),column:U(o)})})},Nf=function(i,t,a,u,c){return Lf(i,t,u,function(t,e){var n=Ll(t,c,0,a-1),o=n===a-1?i.length-n*u:u,r=Rl(e,0,o-1);return P.some({row:U(n),column:U(r)})})},Pf=[Zo("selector"),dr("execute",bf),ka("onEscape"),dr("captureTab",!1),Va()],jf=function(e,n,t){da(e.element(),n.selector).each(function(t){n.focusManager.set(e,t)})},Uf=function(r){return function(t,e,n,o){return _f(t,e,n.selector).bind(function(t){return r(t.candidates(),t.index(),o.getNumRows().getOr(n.initSize.numRows),o.getNumColumns().getOr(n.initSize.numColumns))})}},Wf=function(t,e,n,o){return n.captureTab?P.some(!0):P.none()},Gf=Uf(function(t,e,n,o){return Rf(t,e,n,o,-1)}),Xf=Uf(function(t,e,n,o){return Rf(t,e,n,o,1)}),Yf=Uf(function(t,e,n,o){return Nf(t,e,n,o,-1)}),qf=Uf(function(t,e,n,o){return Nf(t,e,n,o,1)}),Kf=U([uf(ef([37]),Of(Gf,Xf)),uf(ef([39]),Mf(Gf,Xf)),uf(ef([38]),Ef(Yf)),uf(ef([40]),Tf(qf)),uf(nf([of,ef([9])]),Wf),uf(nf([af,ef([9])]),Wf),uf(ef([27]),function(t,e,n,o){return n.onEscape(t,e)}),uf(ef([32].concat([13])),function(e,n,o,t){return(r=e,i=o,i.focusManager.get(r).bind(function(t){return ma(t,i.selector)})).bind(function(t){return o.execute(e,n,t)});var r,i})]),Jf=U([uf(ef([32]),yf)]),$f=hf(Pf,Sf,Kf,Jf,function(){return P.some(jf)}),Qf=function(t,e,n,i){var a=function(t,e,n){var o,r=Ll(e,i,0,n.length-1);return r===t?P.none():(o=n[r],"button"===yn(o)&&"disabled"===Mn(o,"disabled")?a(t,r,n):P.from(n[r]))};return _f(t,n,e).bind(function(t){var e=t.index(),n=t.candidates();return a(e,e,n)})},Zf=[Zo("selector"),dr("getInitial",P.none),dr("execute",bf),ka("onEscape"),dr("executeOnMove",!1),dr("allowVertical",!0)],td=function(e,n,o){return(t=e,r=o,r.focusManager.get(t).bind(function(t){return ma(t,r.selector)})).bind(function(t){return o.execute(e,n,t)});var t,r},ed=function(e,n){n.getInitial(e).orThunk(function(){return da(e.element(),n.selector)}).each(function(t){n.focusManager.set(e,t)})},nd=function(t,e,n){return Qf(t,n.selector,e,-1)},od=function(t,e,n){return Qf(t,n.selector,e,1)},rd=function(o){return function(t,e,n){return o(t,e,n).bind(function(){return n.executeOnMove?td(t,e,n):P.some(!0)})}},id=function(t,e,n,o){return n.onEscape(t,e)},ad=U([uf(ef([32]),yf)]),ud=hf(Zf,yi.init,function(t,e,n,o){var r=[37].concat(n.allowVertical?[38]:[]),i=[39].concat(n.allowVertical?[40]:[]);return[uf(ef(r),rd(Of(nd,od))),uf(ef(i),rd(Mf(nd,od))),uf(ef([13]),td),uf(ef([32]),td),uf(ef([27]),id)]},ad,function(){return P.some(ed)}),cd=We(["rowIndex","columnIndex","cell"],[]),sd=function(t,e,n){return P.from(t[e]).bind(function(t){return P.from(t[n]).map(function(t){return cd({rowIndex:e,columnIndex:n,cell:t})})})},ld=function(t,e,n,o){var r=t[e].length,i=Ll(n,o,0,r-1);return sd(t,e,i)},fd=function(t,e,n,o){var r=Ll(n,o,0,t.length-1),i=t[r].length,a=Rl(e,0,i-1);return sd(t,r,a)},dd=function(t,e,n,o){var r=t[e].length,i=Rl(n+o,0,r-1);return sd(t,e,i)},md=function(t,e,n,o){var r=Rl(n+o,0,t.length-1),i=t[r].length,a=Rl(e,0,i-1);return sd(t,r,a)},hd=[rr("selectors",[Zo("row"),Zo("cell")]),dr("cycles",!0),dr("previousSelector",P.none),dr("execute",bf)],gd=function(e,n){n.previousSelector(e).orThunk(function(){var t=n.selectors;return da(e.element(),t.cell)}).each(function(t){n.focusManager.set(e,t)})},vd=function(t,e){return function(n,o,i){var a=i.cycles?t:e;return ma(o,i.selectors.row).bind(function(t){var e=Oc(t,i.selectors.cell);return If(e,o).bind(function(o){var r=Oc(n,i.selectors.row);return If(r,t).bind(function(t){var e,n=(e=i,E(r,function(t){return Oc(t,e.selectors.cell)}));return a(n,t,o).map(function(t){return t.cell()})})})})}},pd=vd(function(t,e,n){return ld(t,e,n,-1)},function(t,e,n){return dd(t,e,n,-1)}),bd=vd(function(t,e,n){return ld(t,e,n,1)},function(t,e,n){return dd(t,e,n,1)}),yd=vd(function(t,e,n){return fd(t,n,e,-1)},function(t,e,n){return md(t,n,e,-1)}),xd=vd(function(t,e,n){return fd(t,n,e,1)},function(t,e,n){return md(t,n,e,1)}),wd=U([uf(ef([37]),Of(pd,bd)),uf(ef([39]),Mf(pd,bd)),uf(ef([38]),Ef(yd)),uf(ef([40]),Tf(xd)),uf(ef([32].concat([13])),function(e,n,o){return lf(e.element()).bind(function(t){return o.execute(e,n,t)})})]),zd=U([uf(ef([32]),yf)]),Sd=hf(hd,yi.init,wd,zd,function(){return P.some(gd)}),kd=[Zo("selector"),dr("execute",bf),dr("moveOnTab",!1)],Cd=function(e,n,o){return o.focusManager.get(e).bind(function(t){return o.execute(e,n,t)})},Od=function(e,n){da(e.element(),n.selector).each(function(t){n.focusManager.set(e,t)})},Md=function(t,e,n){return Qf(t,n.selector,e,-1)},Hd=function(t,e,n){return Qf(t,n.selector,e,1)},Vd=U([uf(ef([38]),Af(Md)),uf(ef([40]),Af(Hd)),uf(nf([of,ef([9])]),function(t,e,n){return n.moveOnTab?Af(Md)(t,e,n):P.none()}),uf(nf([af,ef([9])]),function(t,e,n){return n.moveOnTab?Af(Hd)(t,e,n):P.none()}),uf(ef([13]),Cd),uf(ef([32]),Cd)]),Ed=U([uf(ef([32]),yf)]),Td=hf(kd,yi.init,Vd,Ed,function(){return P.some(Od)}),Ad=[ka("onSpace"),ka("onEnter"),ka("onShiftEnter"),ka("onLeft"),ka("onRight"),ka("onTab"),ka("onShiftTab"),ka("onUp"),ka("onDown"),ka("onEscape"),dr("stopSpaceKeyup",!1),ur("focusIn")],Bd=hf(Ad,yi.init,function(t,e,n){return[uf(ef([32]),n.onSpace),uf(nf([af,ef([13])]),n.onEnter),uf(nf([of,ef([13])]),n.onShiftEnter),uf(nf([of,ef([9])]),n.onShiftTab),uf(nf([af,ef([9])]),n.onTab),uf(ef([38]),n.onUp),uf(ef([40]),n.onDown),uf(ef([37]),n.onLeft),uf(ef([39]),n.onRight),uf(ef([32]),n.onSpace),uf(ef([27]),n.onEscape)]},function(t,e,n){return n.stopSpaceKeyup?[uf(ef([32]),yf)]:[]},function(t){return t.focusIn}),Dd=vf.schema(),_d=pf.schema(),Fd=ud.schema(),Id=$f.schema(),Ld=Sd.schema(),Rd=zf.schema(),Nd=Td.schema(),Pd=Bd.schema(),jd=Ra({branchKey:"mode",branches:Object.freeze({acyclic:Dd,cyclic:_d,flow:Fd,flatgrid:Id,matrix:Ld,execution:Rd,menu:Nd,special:Pd}),name:"keying",active:{events:function(t,e){return t.handler.toEvents(t,e)}},apis:{focusIn:function(e,n,o){n.sendFocusIn(n).fold(function(){e.getSystem().triggerFocus(e.element(),e.element())},function(t){t(e,n,o)})},setGridSize:function(t,e,n,o,r){kt(n,"setGridSize")?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:kf}),Ud=function(t,e,n,o){var r=t.getSystem().build(o);ss(t,r,n)},Wd=function(t,e,n,o){var r=Gd(t,e);_(r,function(t){return nn(o.element(),t.element())}).each(fs)},Gd=function(t,e){return t.components()},Xd=function(e,n,t,r,o){var i=Gd(e,n);return P.from(i[r]).map(function(t){return Wd(e,n,0,t),o.each(function(t){Ud(e,0,function(t,e){var n,o;o=e,sn(n=t,r).fold(function(){mn(n,o)},function(t){ln(t,o)})},t)}),t})},Yd=Ia({fields:[],name:"replacing",apis:Object.freeze({append:function(t,e,n,o){Ud(t,0,mn,o)},prepend:function(t,e,n,o){Ud(t,0,dn,o)},remove:Wd,replaceAt:Xd,replaceBy:function(e,n,t,o,r){var i=Gd(e,n);return F(i,o).bind(function(t){return Xd(e,n,0,t,r)})},set:function(e,t,n,o){var r,i,a,u;ds(e),r=function(){var t=E(o,e.getSystem().build);T(t,function(t){cs(e,t)})},i=e.element(),a=on(i),u=sf(a).bind(function(e){var t=function(t){return nn(e,t)};return t(i)?P.some(i):Rr(i,t)}),r(i),u.each(function(e){sf(a).filter(function(t){return nn(t,e)}).fold(function(){cf(e)},N)})},contents:Gd})}),qd=function(t,e,n){e.store.manager.onLoad(t,e,n)},Kd=function(t,e,n){e.store.manager.onUnload(t,e,n)},Jd=Object.freeze({onLoad:qd,onUnload:Kd,setValue:function(t,e,n,o){e.store.manager.setValue(t,e,n,o)},getValue:function(t,e,n){return e.store.manager.getValue(t,e,n)},getState:function(t,e,n){return n}}),$d=Object.freeze({events:function(n,o){var t=n.resetOnDom?[Qr(function(t,e){qd(t,n,o)}),Zr(function(t,e){Kd(t,n,o)})]:[Ea(n,o,qd)];return Pr(t)}}),Qd=function(){var t=Ct(null);return xi({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})},Zd=function(){var i=Ct({}),a=Ct({});return xi({readState:function(){return{mode:"dataset",dataByValue:i.get(),dataByText:a.get()}},lookup:function(t){return xt(i.get(),t).orThunk(function(){return xt(a.get(),t)})},update:function(t){var e=i.get(),n=a.get(),o={},r={};T(t,function(e){o[e.value]=e,xt(e,"meta").each(function(t){xt(t,"text").each(function(t){r[t]=e})})}),i.set(Gn({},e,o)),a.set(Gn({},n,r))},clear:function(){i.set({}),a.set({})}})},tm=Object.freeze({memory:Qd,dataset:Zd,manual:function(){return xi({readState:function(){}})},init:function(t){return t.store.manager.state(t)}}),em=function(t,e,n,o){var r=e.store;n.update([o]),r.setValue(t,o),e.onSetValue(t,o)},nm=[ur("initialValue"),Zo("getFallbackEntry"),Zo("getDataKey"),Zo("setValue"),Ma("manager",{setValue:em,getValue:function(t,e,n){var o=e.store,r=o.getDataKey(t);return n.lookup(r).fold(function(){return o.getFallbackEntry(r)},function(t){return t})},onLoad:function(e,n,o){n.store.initialValue.each(function(t){em(e,n,o,t)})},onUnload:function(t,e,n){n.clear()},state:Zd})],om=[Zo("getValue"),dr("setValue",N),ur("initialValue"),Ma("manager",{setValue:function(t,e,n,o){e.store.setValue(t,o),e.onSetValue(t,o)},getValue:function(t,e,n){return e.store.getValue(t)},onLoad:function(e,n,t){n.store.initialValue.each(function(t){n.store.setValue(e,t)})},onUnload:N,state:yi.init})],rm=[ur("initialValue"),Ma("manager",{setValue:function(t,e,n,o){n.set(o),e.onSetValue(t,o)},getValue:function(t,e,n){return n.get()},onLoad:function(t,e,n){e.store.initialValue.each(function(t){n.isNotSet()&&n.set(t)})},onUnload:function(t,e,n){n.clear()},state:Qd})],im=[mr("store",{mode:"memory"},Go("mode",{memory:rm,manual:om,dataset:nm})),Sa("onSetValue"),dr("resetOnDom",!1)],am=Ia({fields:im,name:"representing",active:$d,apis:Jd,extra:{setValueFrom:function(t,e){var n=am.getValue(e);am.setValue(t,n)}},state:tm}),um=function(t,e){e.ignore||(cf(t.element()),e.onFocus(t))},cm=Object.freeze({focus:um,blur:function(t,e){e.ignore||t.element().dom().blur()},isFocused:function(t){return e=t.element(),n=on(e).dom(),e.dom()===n.activeElement;var e,n}}),sm=Object.freeze({exhibit:function(t,e){var n=e.ignore?{}:{attributes:{tabindex:"-1"}};return zi(n)},events:function(n){return Pr([Wr(ye(),function(t,e){um(t,n),e.stop()})].concat(n.stopMousedown?[Wr(Tt(),function(t,e){e.event().prevent()})]:[]))}}),lm=[Sa("onFocus"),dr("stopMousedown",!1),dr("ignore",!1)],fm=Ia({fields:lm,name:"focusing",active:sm,apis:cm}),dm=function(t,e,n){var o=e.aria;o.update(t,o,n.get())},mm=function(e,t,n){t.toggleClass.each(function(t){n.get()?_i(e.element(),t):Ii(e.element(),t)})},hm=function(t,e,n){pm(t,e,n,!n.get())},gm=function(t,e,n){n.set(!0),mm(t,e,n),dm(t,e,n)},vm=function(t,e,n){n.set(!1),mm(t,e,n),dm(t,e,n)},pm=function(t,e,n,o){(o?gm:vm)(t,e,n)},bm=function(t,e,n){pm(t,e,n,e.selected)},ym=Object.freeze({onLoad:bm,toggle:hm,isOn:function(t,e,n){return n.get()},on:gm,off:vm,set:pm}),xm=Object.freeze({exhibit:function(t,e,n){return zi({})},events:function(t,e){var n,o,r,i=(n=t,o=e,r=hm,ei(function(t){r(t,n,o)})),a=Ea(t,e,bm);return Pr(R([t.toggleOnExecute?[i]:[],[a]]))}}),wm=Object.freeze({init:function(t){var e=Ct(!1);return{readState:function(){return e.get()},get:function(){return e.get()},set:function(t){return e.set(t)},clear:function(){return e.set(!1)}}}}),zm=function(t,e,n){Cn(t.element(),"aria-expanded",n)},Sm=[dr("selected",!1),ur("toggleClass"),dr("toggleOnExecute",!0),mr("aria",{mode:"none"},Go("mode",{pressed:[dr("syncWithExpanded",!1),Ma("update",function(t,e,n){Cn(t.element(),"aria-pressed",n),e.syncWithExpanded&&zm(t,e,n)})],checked:[Ma("update",function(t,e,n){Cn(t.element(),"aria-checked",n)})],expanded:[Ma("update",zm)],selected:[Ma("update",function(t,e,n){Cn(t.element(),"aria-selected",n)})],none:[Ma("update",N)]}))],km=Ia({fields:Sm,name:"toggling",active:xm,apis:ym,state:wm}),Cm="alloy.item-hover",Om="alloy.item-focus",Mm=function(t){(lf(t.element()).isNone()||fm.isFocused(t))&&(fm.isFocused(t)||fm.focus(t),Cr(t,Cm,{item:t}))},Hm=function(t){Cr(t,Om,{item:t})},Vm=U(Cm),Em=U(Om),Tm=function(t,e){var n,o;return{key:t,value:{config:{},me:(n=t,o=Pr(e),Ia({fields:[Zo("enabled")],name:n,active:{events:U(o)}})),configAsRaw:U({}),initialConfig:{},state:yi}}},Am=[Zo("data"),Zo("components"),Zo("dom"),dr("hasSubmenu",!1),ur("toggling"),Bs("itemBehaviours",[km,fm,jd,am]),dr("ignoreFocus",!1),dr("domModification",{}),Ma("builder",function(t){return{dom:t.dom,domModification:Gn({},t.domModification,{attributes:Gn({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes,{"aria-haspopup":t.hasSubmenu},t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Ds(t.itemBehaviours,[t.toggling.fold(km.revoke,function(t){return km.config(Gn({aria:{mode:"checked"}},t))}),fm.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){Hm(t)}}),jd.config({mode:"execution"}),am.config({store:{mode:"memory",initialValue:t.data}}),Tm("item-type-events",[Wr(Oe(),Or),Kr(Tt()),Wr(_t(),Mm),Wr(ke(),fm.focus)])]),components:t.components,eventOrder:t.eventOrder}}),dr("eventOrder",{})],Bm=[Zo("dom"),Zo("components"),Ma("builder",function(t){return{dom:t.dom,components:t.components,events:Pr([Jr(ke())])}})],Dm=U([rl({name:"widget",overrides:function(e){return{behaviours:_a([am.config({store:{mode:"manual",getValue:function(t){return e.data},setValue:function(){}}})])}}})]),_m=[Zo("uid"),Zo("data"),Zo("components"),Zo("dom"),dr("autofocus",!1),dr("ignoreFocus",!1),Bs("widgetBehaviours",[am,fm,jd]),dr("domModification",{}),Cl(Dm()),Ma("builder",function(n){var t=vl(0,n,Dm()),e=pl("item-widget",n,t.internals()),o=function(t){return bl(t,n,"widget").map(function(t){return jd.focusIn(t),t})},r=function(t,e){return Dl(e.event().target())||n.autofocus&&e.setSource(t.element()),P.none()};return{dom:n.dom,components:e,domModification:n.domModification,events:Pr([ei(function(t,e){o(t).each(function(t){e.stop()})}),Wr(_t(),Mm),Wr(ke(),function(t,e){n.autofocus?o(t):fm.focus(t)})]),behaviours:Ds(n.widgetBehaviours,[am.config({store:{mode:"memory",initialValue:n.data}}),fm.config({ignore:n.ignoreFocus,onFocus:function(t){Hm(t)}}),jd.config({mode:"special",focusIn:n.autofocus?function(t){o(t)}:Na(),onLeft:r,onRight:r,onEscape:function(t,e){return fm.isFocused(t)||n.autofocus?(n.autofocus&&e.setSource(t.element()),P.none()):(fm.focus(t),P.some(!0))}})])}})],Fm=Go("type",{widget:_m,item:Am,separator:Bm}),Im=U([ul({factory:{sketch:function(t){var e=Uo("menu.spec item",Fm,t);return e.builder(e)}},name:"items",unit:"item",defaults:function(t,e){return e.hasOwnProperty("uid")?e:Gn({},e,{uid:li("item")})},overrides:function(t,e){return{type:e.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Lm=U([Zo("value"),Zo("items"),Zo("dom"),Zo("components"),dr("eventOrder",{}),Es("menuBehaviours",[Jl,am,Il,jd]),mr("movement",{mode:"menu",moveOnTab:!0},Go("mode",{grid:[Va(),Ma("config",function(t,e){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:t.focusManager}})],matrix:[Ma("config",function(t,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}}),Zo("rowSelector")],menu:[dr("moveOnTab",!0),Ma("config",function(t,e){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:e.moveOnTab,focusManager:t.focusManager}})]})),tr("markers",ba()),dr("fakeFocus",!1),dr("focusManager",df()),Sa("onHighlight")]),Rm=U("alloy.menu-focus"),Nm=Bl({name:"Menu",configFields:Lm(),partFields:Im(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:As(t.menuBehaviours,[Jl.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),am.config({store:{mode:"memory",initialValue:t.value}}),Il.config({find:P.some}),jd.config(t.movement.config(t,t.movement))]),events:Pr([Wr(Em(),function(e,n){var t=n.event();e.getSystem().getByDom(t.target()).each(function(t){Jl.highlight(e,t),n.stop(),Cr(e,Rm(),{menu:e,item:t})})}),Wr(Vm(),function(t,e){var n=e.event().item();Jl.highlight(t,n)})]),components:e,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),Pm=function(n,o,r,t){return xt(r,t).bind(function(t){return xt(n,t).bind(function(t){var e=Pm(n,o,r,t);return P.some([t].concat(e))})}).getOr([])},jm=function(t,e){var n={};tt(t,function(t,e){T(t,function(t){n[t]=e})});var o=e,r=nt(e,function(t,e){return{k:t,v:e}}),i=et(r,function(t,e){return[e].concat(Pm(n,o,r,e))});return et(n,function(t){return xt(i,t).getOr([t])})},Um=function(){var i=Ct({}),a=Ct({}),u=Ct({}),c=Ct(P.none()),s=Ct({}),e=function(t){return xt(a.get(),t)};return{setMenuBuilt:function(t,e){var n;a.set(Gn({},a.get(),((n={})[t]={type:"prepared",menu:e},n)))},setContents:function(t,e,n,o){c.set(P.some(t)),i.set(n),a.set(e),s.set(o);var r=jm(o,n);u.set(r)},expand:function(n){return xt(i.get(),n).map(function(t){var e=xt(u.get(),n).getOr([]);return[t].concat(e)})},refresh:function(t){return xt(u.get(),t)},collapse:function(t){return xt(u.get(),t).bind(function(t){return 1<t.length?P.some(t.slice(1)):P.none()})},lookupMenu:e,otherMenus:function(t){var e=s.get();return Y(Q(e),t)},getPrimary:function(){return c.get().bind(function(t){return e(t).bind(function(t){return"prepared"===t.type?P.some(t.menu):P.none()})})},getMenus:function(){return a.get()},clear:function(){i.set({}),a.set({}),u.set({}),c.set(P.none())},isClear:function(){return c.get().isNone()}}},Wm=U("collapse-item"),Gm=Al({name:"TieredMenu",configFields:[Oa("onExecute"),Oa("onEscape"),Ca("onOpenMenu"),Ca("onOpenSubmenu"),Sa("onCollapseMenu"),dr("highlightImmediately",!0),rr("data",[Zo("primary"),Zo("menus"),Zo("expansions")]),dr("fakeFocus",!1),Sa("onHighlight"),Sa("onHover"),xa(),Zo("dom"),dr("navigateOnHover",!0),dr("stayInDom",!1),Es("tmenuBehaviours",[jd,Jl,Il,Yd]),dr("eventOrder",{})],apis:{collapseMenu:function(t,e){t.collapseMenu(e)},highlightPrimary:function(t,e){t.highlightPrimary(e)}},factory:function(u,t){var c,e,i=Ct(P.none()),s=Um(),n=function(t){var o,r,e,n=(o=t,r=u.data.primary,e=u.data.menus,et(e,function(t,e){var n=function(){return Nm.sketch(Gn({dom:t.dom},t,{value:e,items:t.items,markers:u.markers,fakeFocus:u.fakeFocus,onHighlight:u.onHighlight,focusManager:u.fakeFocus?mf():df()}))};return e===r?{type:"prepared",menu:o.getSystem().build(n())}:{type:"notbuilt",nbMenu:n}})),i=a(t);return s.setContents(u.data.primary,n,u.data.expansions,i),s.getPrimary()},l=function(t){return am.getValue(t).value},a=function(t){return et(u.data.menus,function(t,e){return j(t.items,function(t){return"separator"===t.type?[]:[t.data.value]})})},f=function(e,t){Jl.highlight(e,t),Jl.getHighlighted(t).orThunk(function(){return Jl.getFirst(t)}).each(function(t){Mr(e,t.element(),ke())})},d=function(e,t){return Ot(E(t,function(t){return e.lookupMenu(t).bind(function(t){return"prepared"===t.type?P.some(t.menu):P.none()})}))},m=function(e,t,n){var o=d(t,t.otherMenus(n));T(o,function(t){Ni(t.element(),[u.markers.backgroundMenu]),u.stayInDom||Yd.remove(e,t)})},h=function(t,o){var r,e=(r=t,i.get().getOrThunk(function(){var n={},t=Oc(r.element(),"."+u.markers.item),e=A(t,function(t){return"true"===Mn(t,"aria-haspopup")});return T(e,function(t){r.getSystem().getByDom(t).each(function(t){var e=l(t);n[e]=t})}),i.set(P.some(n)),n}));tt(e,function(t,e){var n=M(o,e);Cn(t.element(),"aria-expanded",n)})},g=function(o,r,i){return P.from(i[0]).bind(function(t){return r.lookupMenu(t).bind(function(t){if("notbuilt"===t.type)return P.none();var e=t.menu,n=d(r,i.slice(1));return T(n,function(t){_i(t.element(),u.markers.backgroundMenu)}),Dr(e.element())||Yd.append(o,la(e)),Ni(e.element(),[u.markers.backgroundMenu]),f(o,e),m(o,r,i),P.some(e)})})};(e=c||(c={}))[e.HighlightSubmenu=0]="HighlightSubmenu",e[e.HighlightParent=1]="HighlightParent";var v=function(r,i,a){void 0===a&&(a=c.HighlightSubmenu);var t=l(i);return s.expand(t).bind(function(o){return h(r,o),P.from(o[0]).bind(function(n){return s.lookupMenu(n).bind(function(t){var e=function(t,e,n){if("notbuilt"!==n.type)return n.menu;var o=t.getSystem().build(n.nbMenu());return s.setMenuBuilt(e,o),o}(r,n,t);return Dr(e.element())||Yd.append(r,la(e)),u.onOpenSubmenu(r,i,e),a===c.HighlightSubmenu?(Jl.highlightFirst(e),g(r,s,o)):(Jl.dehighlightAll(e),P.some(i))})})})},o=function(e,n){var t=l(n);return s.collapse(t).bind(function(t){return h(e,t),g(e,s,t).map(function(t){return u.onCollapseMenu(e,n,t),t})})},r=function(n){return function(e,t){return ma(t.getSource(),"."+u.markers.item).bind(function(t){return e.getSystem().getByDom(t).toOption().bind(function(t){return n(e,t).map(function(){return!0})})})}},p=Pr([Wr(Rm(),function(e,t){var n=t.event().menu();Jl.highlight(e,n);var o=l(t.event().item());s.refresh(o).each(function(t){return m(e,s,t)})}),ei(function(e,t){var n=t.event().target();e.getSystem().getByDom(n).each(function(t){0===l(t).indexOf("collapse-item")&&o(e,t),v(e,t,c.HighlightSubmenu).fold(function(){u.onExecute(e,t)},function(){})})}),Qr(function(e,t){n(e).each(function(t){Yd.append(e,la(t)),u.onOpenMenu(e,t),u.highlightImmediately&&f(e,t)})})].concat(u.navigateOnHover?[Wr(Vm(),function(t,e){var n,o,r=e.event().item();n=t,o=l(r),s.refresh(o).bind(function(t){return h(n,t),g(n,s,t)}),v(t,r,c.HighlightParent),u.onHover(t,r)})]:[])),b={collapseMenu:function(e){Jl.getHighlighted(e).each(function(t){Jl.getHighlighted(t).each(function(t){o(e,t)})})},highlightPrimary:function(e){s.getPrimary().each(function(t){f(e,t)})}};return{uid:u.uid,dom:u.dom,markers:u.markers,behaviours:As(u.tmenuBehaviours,[jd.config({mode:"special",onRight:r(function(t,e){return Dl(e.element())?P.none():v(t,e,c.HighlightSubmenu)}),onLeft:r(function(t,e){return Dl(e.element())?P.none():o(t,e)}),onEscape:r(function(t,e){return o(t,e).orThunk(function(){return u.onEscape(t,e).map(function(){return t})})}),focusIn:function(e,t){s.getPrimary().each(function(t){Mr(e,t.element(),ke())})}}),Jl.config({highlightClass:u.markers.selectedMenu,itemClass:u.markers.menu}),Il.config({find:function(t){return Jl.getHighlighted(t)}}),Yd.config({})]),eventOrder:u.eventOrder,apis:b,events:p}},extraApis:{tieredData:function(t,e,n){return{primary:t,menus:e,expansions:n}},singleData:function(t,e){return{primary:t,menus:wt(t,e),expansions:{}}},collapseItem:function(t){return{value:Un(Wm()),meta:{text:t}}}}}),Xm=Al({name:"InlineView",configFields:[Zo("lazySink"),Sa("onShow"),Sa("onHide"),lr("onEscape"),Es("inlineBehaviours",[ks,Ua]),fr("fireDismissalEventInstead",[dr("event",De())]),dr("getRelated",P.none),dr("eventOrder",P.none)],factory:function(s,t){var r=function(t,e,n,o){var r=s.lazySink(t).getOrDie();ks.openWhileCloaked(t,n,function(){return is.positionWithin(r,e,t,o)}),s.onShow(t)},e={setContent:function(t,e){ks.open(t,e)},showAt:function(t,e,n){var o=P.none();r(t,e,n,o)},showWithin:r,showMenuAt:function(t,e,n){var o,r,i,a,u,c=(o=s,r=t,i=e,a=n,u=function(){return o.lazySink(r)},Gm.sketch({dom:{tag:"div"},data:a.data,markers:a.menu.markers,onEscape:function(){return ks.close(r),o.onEscape.map(function(t){return t(r)}),P.some(!0)},onExecute:function(){return P.some(!0)},onOpenMenu:function(t,e){is.position(u().getOrDie(),i,e)},onOpenSubmenu:function(t,e,n){var o=u().getOrDie();is.position(o,{anchor:"submenu",item:e},n)}}));ks.open(t,c),s.onShow(t)},hide:function(t){ks.close(t),s.onHide(t)},getContent:function(t){return ks.getState(t)},isOpen:ks.isOpen};return{uid:s.uid,dom:s.dom,behaviours:As(s.inlineBehaviours,[ks.config({isPartOf:function(t,e,n){return ga(e,n)||(o=t,r=n,s.getRelated(o).exists(function(t){return ga(t,r)}));var o,r},getAttachPoint:function(t){return s.lazySink(t).getOrDie()}}),Hs(Gn({isExtraPart:U(!1)},s.fireDismissalEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})))]),eventOrder:s.eventOrder,apis:e}},apis:{showAt:function(t,e,n,o){t.showAt(e,n,o)},showWithin:function(t,e,n,o,r){t.showWithin(e,n,o,r)},showMenuAt:function(t,e,n,o){t.showMenuAt(e,n,o)},hide:function(t,e){t.hide(e)},isOpen:function(t,e){return t.isOpen(e)},getContent:function(t,e){return t.getContent(e)},setContent:function(t,e,n){t.setContent(e,n)}}}),Ym=function(t){var e=function(t,e){e.stop(),Or(t)},n=pe.detect().deviceType.isTouch()?[Wr(Ce(),e)]:[Wr(jt(),e),Wr(Tt(),function(t,e){e.cut()})];return Pr(R([t.map(function(n){return Wr(Se(),function(t,e){n(t),e.stop()})}).toArray(),n]))},qm=Al({name:"Button",factory:function(t){var e=Ym(t.action),n=t.dom.tag,o=function(e){return xt(t.dom,"attributes").bind(function(t){return xt(t,e)})};return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:Ds(t.buttonBehaviours,[fm.config({}),jd.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==n)return{role:o("role").getOr("button")};var t=o("type").getOr("button"),e=o("role").map(function(t){return{role:t}}).getOr({});return Gn({type:t},e)}()},eventOrder:t.eventOrder}},configFields:[dr("uid",undefined),Zo("dom"),dr("components",[]),Bs("buttonBehaviours",[fm,jd]),ur("action"),ur("role"),dr("eventOrder",{})]}),Km=function(t){var e=function n(t){return t.uid!==undefined}(t)&&kt(t,"uid")?t.uid:li("memento");return{get:function(t){return t.getSystem().getByUid(e).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(e).fold(P.none,P.some)},asSpec:function(){return Gn({},t,{uid:e})}}},Jm={"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 1 1 0-2h9.2zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 0 1 0-2h6.8zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 0 1 0-2h4.4zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 0 1 0-2h2zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1z" fill-rule="nonzero"/></svg>',"border-width":'<svg width="24" height="24"><path d="M5 14.8h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm-.5 3.7h15c.3 0 .5.2.5.5s-.2.5-.5.5h-15a.5.5 0 1 1 0-1zm.5-8.3h14c.6 0 1 .4 1 1v1c0 .5-.4 1-1 1H5a1 1 0 0 1-1-1v-1c0-.6.4-1 1-1zm0-5.7h14c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-2c0-.6.4-1 1-1z" fill-rule="evenodd"/></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0zm-10-7l-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8zM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 1 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',comment:'<svg width="24" height="24"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23z" fill-rule="nonzero"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1z"/></g></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9zM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13z" fill-rule="nonzero"/></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2zm14-2v2h2a2 2 0 0 0-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 0 0 2-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2zm2 14h-2v2a2 2 0 0 0 2-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1zM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6z" fill-rule="evenodd"/></svg>',indeterminate:'<svg width="24" height="24"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zM9 11a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2H9z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 2H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3zm-7 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"/><path d="M15 12h-3V7a.5.5 0 0 0-1 0v6h4a.5.5 0 0 0 0-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2.1 2a2 2 0 1 0 2.7 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6zM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6zM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6z" fill-rule="evenodd"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5z" fill-rule="evenodd"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><g fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="#000" stroke-width="2"><path d="M12 5v14M5 12h14"/></g></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8zM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7zM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 0 0-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 0 0 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm-2.4-6.1L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3z" fill-rule="evenodd"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-cell-properties":'<svg width="24" height="24"><path d="M4 5h16v14H4V5zm10 10h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10 0v3h4v-3h-4zm0-1h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" fill-rule="evenodd"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><path d="M12.5 5.5v6h6v-6h-6zm-1 0h-6v6h6v-6zm1 13h6v-6h-6v6zm-1 0v-6h-6v6h6zm-7-14h15v15h-15v-15z" fill-rule="nonzero"/></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5.5 5.5v13h13v-13h-13zm-1-1h15v15h-15v-15z" opacity=".2"/><path d="M11.5 11.5v-7h1v7h7v1h-7v7h-1v-7h-7v-1h7z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path d="M9 11.2l1 1v.2l-1 1v-2.2zm5 1l1-1v2.2l-1-1v-.2zM20 5v14H4V5h16zm-1 2h-4v.8l-.2-.2-.8.8V7h-4v1.4l-.8-.8-.2.2V7H5v11h4v-1.8l.5.5.5-.4V18h4v-1.8l.8.8.2-.3V18h4V7zm-3.9 3.4l-1.8 1.9 1.8 1.9c.4.3.4.9 0 1.2-.3.3-.8.3-1.2 0L12 13.5l-1.8 1.9a.8.8 0 0 1-1.2 0 .9.9 0 0 1 0-1.2l1.8-1.9-1.9-2a.9.9 0 0 1 1.2-1.2l2 2 1.8-1.8c.3-.4.9-.4 1.2 0a.8.8 0 0 1 0 1.1z" fill-rule="evenodd"/></svg>',"table-delete-row":'<svg width="24" height="24"><path d="M16.7 8.8l1.1 1.2-2.4 2.5L18 15l-1.2 1.2-2.5-2.5-2.4 2.5-1.3-1.2 2.5-2.5-2.5-2.5 1.2-1.3 2.6 2.6 2.4-2.5zM4 5h16v14H4V5zm15 5V7H5v3h4.8l1 1H5v3h5.8l-1 1H5v3h14v-3h-.4l-1-1H19v-3h-1.3l1-1h.3z" fill-rule="evenodd"/></svg>',"table-delete-table":'<svg width="24" height="26"><path d="M4 6h16v14H4V6zm1 2v11h14V8H5zm11.7 8.7l-1.5 1.5L12 15l-3.3 3.2-1.4-1.5 3.2-3.2-3.3-3.2 1.5-1.5L12 12l3.2-3.2 1.5 1.5-3.2 3.2 3.2 3.2z" fill-rule="evenodd"/></svg>',"table-insert-column-after":'<svg width="24" height="24"><path d="M14.3 9c.4 0 .7.3.7.6v2.2h2.1c.4 0 .7.3.7.7 0 .4-.3.7-.7.7H15v2.2c0 .3-.3.6-.7.6a.7.7 0 0 1-.6-.6v-2.2h-2.2a.7.7 0 0 1 0-1.4h2.2V9.6c0-.3.3-.6.6-.6zM4 5h16v14H4V5zm5 13v-3H5v3h4zm0-4v-3H5v3h4zm0-4V7H5v3h4zm10 8V7h-9v11h9z" fill-rule="evenodd"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path d="M9.7 16a.7.7 0 0 1-.7-.6v-2.2H6.9a.7.7 0 0 1 0-1.4H9V9.6c0-.3.3-.6.7-.6.3 0 .6.3.6.6v2.2h2.2c.4 0 .8.3.8.7 0 .4-.4.7-.8.7h-2.2v2.2c0 .3-.3.6-.6.6zM4 5h16v14H4V5zm10 13V7H5v11h9zm5 0v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V7h-4v3h4z" fill-rule="evenodd"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path d="M14.8 10.5c0 .3-.2.5-.5.5h-1.8v1.8c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.6V11H9.7a.5.5 0 0 1 0-1h1.8V8.3c0-.3.2-.6.5-.6s.5.3.5.6V10h1.8c.3 0 .5.2.5.5zM4 5h16v14H4V5zm5 13v-3H5v3h4zm5 0v-3h-4v3h4zm5 0v-3h-4v3h4zm0-4V7H5v7h14z" fill-rule="evenodd"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path d="M9.2 14.5c0-.3.2-.5.5-.5h1.8v-1.8c0-.3.2-.5.5-.5s.5.2.5.6V14h1.8c.3 0 .5.2.5.5s-.2.5-.5.5h-1.8v1.7c0 .3-.2.6-.5.6a.5.5 0 0 1-.5-.6V15H9.7a.5.5 0 0 1-.5-.5zM4 5h16v14H4V5zm6 2v3h4V7h-4zM5 7v3h4V7H5zm14 11v-7H5v7h14zm0-8V7h-4v3h4z" fill-rule="evenodd"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M4 5h16v13H4V5zm10 12v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V6h-4v3h4zm5 8v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V6h-4v3h4z" fill-rule="evenodd"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path d="M4 5h16v14H4V5zm6 13h9v-7h-9v7zm4-11h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10-1h4V7h-4v3zM5 15v3h4v-3H5z" fill-rule="evenodd"/></svg>',"table-row-properties":'<svg width="24" height="24"><path d="M4 5h16v14H4V5zm10 10h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm6 3h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" fill-rule="evenodd"/></svg>',"table-split-cells":'<svg width="24" height="24"><path d="M4 5h16v14H4V5zm6 2v3h4V7h-4zM9 18v-3H5v3h4zm0-4v-3H5v3h4zm0-4V7H5v3h4zm10 8v-7h-9v7h9zm0-8V7h-4v3h4zm-3.5 4.5l1.5 1.6c.3.2.3.7 0 1-.2.2-.7.2-1 0l-1.5-1.6-1.6 1.5c-.2.3-.7.3-1 0a.7.7 0 0 1 0-1l1.6-1.5-1.5-1.6a.7.7 0 0 1 1-1l1.5 1.6 1.6-1.5c.2-.3.7-.3 1 0 .2.2.2.7 0 1l-1.6 1.5z" fill-rule="evenodd"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M4 5h16v13H4V5zm5 12v-3H5v3h4zm0-4v-3H5v3h4zm5 4v-3h-4v3h4zm0-4v-3h-4v3h4zm5 4v-3h-4v3h4zm0-4v-3h-4v3h4z" fill-rule="evenodd"/></svg>',table:'<svg width="24" height="24"><path d="M4 5h16v14H4V5zm6 9h4v-3h-4v3zm4 1h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10 0v3h4v-3h-4zm0-1h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" fill-rule="evenodd"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><path d="M20.5 2.5c-.8 0-1.5.7-1.5 1.5a1.5 1.5 0 0 1-3 0 3 3 0 0 0-6 0v2H8.5c-.3 0-.5.2-.5.5v1a8 8 0 1 0 6 0v-1c0-.3-.2-.5-.5-.5H11V4a2 2 0 0 1 4 0 2.5 2.5 0 0 0 5 0c0-.3.2-.5.5-.5a.5.5 0 0 0 0-1zM8.1 10.9a5 5 0 0 0-1.2 7 .5.5 0 0 1-.8.5 6 6 0 0 1 1.5-8.3.5.5 0 1 1 .5.8z" fill-rule="nonzero"/></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 1 1 2 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2zM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1zM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm0-1a8 8 0 1 0 0-16 8 8 0 0 0 0 16z" fill-rule="evenodd"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12zM11 6.4L8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z" fill-rule="nonzero"/></svg>'},$m=P.from(Jm["temporary-placeholder"]).getOr("!not found!"),Qm=function(e,t){return P.from(t()[e]).getOrThunk(function(){return t=e,P.from(Jm[t]).getOr($m);var t})},Zm=function(n,t,o){return P.from(t()[n]).getOrThunk(function(){return t=n,e=o,P.from(Jm[t]).getOrThunk(function(){return e.getOr($m)});var t,e})},th=function(t,e){return Mt(t,function(t){return P.from(e()[t])}).getOrThunk(function(){return Mt(t,function(t){return P.from(Jm[t])}).getOr($m)})},eh={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},nh=Al({name:"Notification",factory:function(e){var o=Km({dom:{tag:"p",innerHtml:e.translationProvider(e.text)},behaviours:_a([Yd.config({})])}),n=function(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}},r=function(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}},i=Km({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},r(0)],behaviours:_a([Yd.config({})])}),t={updateProgress:function(t,e){t.getSystem().isConnected()&&i.getOpt(t).each(function(t){Yd.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(e)]},r(e)])})},updateText:function(t,e){if(t.getSystem().isConnected()){var n=o.get(t);Yd.set(n,[aa(e)])}}},a=R([e.icon.toArray(),e.level.toArray(),e.level.bind(function(t){return P.from(eh[t])}).toArray()]);return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map(function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]}).getOr(["tox-notification","tox-notification--in"])},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:th(a,e.iconProvider)}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[o.asSpec()],behaviours:_a([Yd.config({})])}].concat(e.progress?[i.asSpec()]:[]).concat(qm.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:Qm("close",e.iconProvider),attributes:{"aria-label":e.translationProvider("Close")}}}],action:function(t){e.onAction(t)}})),apis:t}},configFields:[ur("level"),Zo("progress"),Zo("icon"),Zo("onAction"),Zo("text"),Zo("iconProvider"),Zo("translationProvider")],apis:{updateProgress:function(t,e,n){t.updateProgress(e,n)},updateText:function(t,e,n){t.updateText(e,n)}}});function oh(r,i,a){var u=i.backstage;return{open:function(t,e){var n=function(){e(),Xm.hide(r)},o=sa(nh.sketch({text:t.text,level:M(["success","error","warning","info"],t.type)?t.type:undefined,progress:!0===t.progressBar,icon:P.from(t.icon),onAction:n,iconProvider:u.shared.providers.icons,translationProvider:u.shared.providers.translate})),r=sa(Xm.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.backstage.shared.getSink,fireDismissalEventInstead:{}}));return a.add(r),t.timeout&&setTimeout(function(){n()},t.timeout),{close:n,moveTo:function(t,e){Xm.showAt(r,{anchor:"makeshift",x:t,y:e},la(o))},moveRel:function(t,e){Xm.showAt(r,i.backstage.shared.anchors.banner(),la(o))},text:function(t){nh.updateText(o,t)},settings:t,getEl:function(){},progressBar:{value:function(t){nh.updateProgress(o,t)}}}},close:function(t){t.close()},reposition:function(t){T(t,function(t){t.moveTo(0,0)}),function(n){if(0<n.length){var t=n.slice(0,1)[0],e=(o=r).inline?o.getElement():o.getContentAreaContainer();t.moveRel(e,"tc-tc"),T(n,function(t,e){0<e&&t.moveRel(n[e-1].getEl(),"bc-tc")})}var o}(t)},getArgs:function(t){return t.settings}}}var rh,ih,ah=function(n,o){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null!==r&&clearTimeout(r),r=setTimeout(function(){n.apply(null,t),r=null},o)}}},uh=/[\u00a0 \t\r\n]/,ch=function(n,t,e,o,r){return void 0===r&&(r=0),(i=n).collapsed&&3===i.startContainer.nodeType?function(t,e,n,o){var r;for(r=e-1;0<=r;r--){if(uh.test(t.charAt(r)))return P.none();if(t.charAt(r)===n)break}return-1===r||e-r<o?P.none():P.some(t.substring(r+1,e))}(e,o,t,r).map(function(t){var e=n.cloneRange();return e.setStart(n.startContainer,n.startOffset-t.length-1),e.setEnd(n.startContainer,n.startOffset),{text:t,rng:e}}):P.none();var i},sh=function(n,t){t.on("keypress",n.onKeypress.throttle),t.on("remove",n.onKeypress.cancel);var o=function(t,e){Cr(t,Lt(),{raw:e})};t.on("keydown",function(e){var t=function(){return n.getView().bind(Jl.getHighlighted)};8===e.which&&n.onKeypress.throttle(e),n.isActive()&&(27===e.which?n.closeIfNecessary():32===e.which?n.closeIfNecessary():13===e.which?(t().each(Or),e.preventDefault()):40===e.which?(t().fold(function(){n.getView().each(Jl.highlightFirst)},function(t){o(t,e)}),e.preventDefault()):37!==e.which&&38!==e.which&&39!==e.which||t().each(function(t){o(t,e),e.preventDefault()}))})},lh=tinymce.util.Tools.resolve("tinymce.util.Promise"),fh=function(t,e){var n,o,r,i=e(),a=t.selection.getRng(),u=a.startContainer.nodeValue;return(n=a,o=u,r=i,Mt(r.triggerChars,function(e){return ch(n,e,o,n.startOffset).map(function(t){return{range:t.rng,text:t.text,triggerChar:e}})})).map(function(n){var t=A(i.lookupByChar(n.triggerChar),function(t){return n.text.length>=t.minChars&&t.matches(n.range,u,n.text)});return{lookupData:lh.all(E(t,function(e){return e.fetch(n.text,e.maxResults).then(function(t){return{items:t,columns:e.columns,onAction:e.onAction}})})),triggerChar:n.triggerChar,range:n.range}})},dh=Vo([xr("type",function(){return"autocompleteitem"}),xr("active",function(){return!1}),xr("disabled",function(){return!1}),dr("meta",{}),er("value"),sr("text"),sr("icon")]),mh=Vo([er("type"),er("ch"),hr("minChars",0),dr("columns",1),hr("maxResults",10),br("matches",function(){return!0}),or("fetch"),or("onAction")]),hh=function(t){var e,n,o=t.ui.registry.getAll().popups,r=et(o,function(t){return(e=t,Po("Autocompleter",mh,e)).fold(function(t){throw new Error(Wo(t))},function(t){return t});var e}),i=(e=ot(r,function(t){return t.ch}),n={},T(e,function(t){n[t]={}}),Q(n)),a=rt(r);return{dataset:r,triggerChars:i,lookupByChar:function(e){return A(a,function(t){return t.ch===e})}}},gh=[pr("disabled",!1),sr("text"),sr("shortcut"),_o("value","value",Zn(function(){return Un("menuitem-value")}),Xo()),dr("meta",{})],vh=Vo([er("type"),br("onSetup",function(){return N}),br("onAction",N),sr("icon")].concat(gh)),ph=Vo([er("type"),or("getSubmenuItems"),br("onSetup",function(){return N}),sr("icon")].concat(gh)),bh=Vo([er("type"),pr("active",!1),br("onSetup",function(){return N}),or("onAction")].concat(gh)),yh=Vo([er("type"),pr("active",!1),sr("icon")].concat(gh)),xh=Vo([er("type"),sr("text")]),wh=Vo([er("type"),nr("fancytype",["inserttable"]),br("onAction",N)]),zh=function(t,o,e){var r=Oc(t.element(),"."+e);if(0<r.length){var n=F(r,function(t){var e=t.dom().getBoundingClientRect().top,n=r[0].dom().getBoundingClientRect().top;return Math.abs(e-n)>o}).getOr(r.length);return P.some({numColumns:n,numRows:Math.ceil(r.length/n)})}return P.none()},Sh=function(t,e){return _a([Tm(t,e)])},kh=function(t){return Sh(Un("unnamed-events"),t)},Ch=["input","button","textarea"],Oh=function(t,e,n){e.disabled&&Ah(t,e,n)},Mh=function(t){return M(Ch,yn(t.element()))},Hh=function(t){Cn(t.element(),"disabled","disabled")},Vh=function(t){Vn(t.element(),"disabled")},Eh=function(t){Cn(t.element(),"aria-disabled","true")},Th=function(t){Cn(t.element(),"aria-disabled","false")},Ah=function(e,t,n){t.disableClass.each(function(t){_i(e.element(),t)}),(Mh(e)?Hh:Eh)(e)},Bh=function(t){return Mh(t)?Hn(t.element(),"disabled"):"true"===Mn(t.element(),"aria-disabled")},Dh=Object.freeze({enable:function(e,t,n){t.disableClass.each(function(t){Ii(e.element(),t)}),(Mh(e)?Vh:Th)(e)},disable:Ah,isDisabled:Bh,onLoad:Oh}),_h=Object.freeze({exhibit:function(t,e,n){return zi({classes:e.disabled?e.disableClass.map(q).getOr([]):[]})},events:function(t,e){return Pr([jr(Se(),function(t,e){return Bh(t)}),Ea(t,e,Oh)])}}),Fh=[dr("disabled",!1),ur("disableClass")],Ih=Ia({fields:Fh,name:"disabling",active:_h,apis:Dh}),Lh="tox-menu-nav__js",Rh="tox-collection__item",Nh="tox-swatch",Ph={normal:Lh,color:Nh},jh="tox-collection__item--enabled",Uh="tox-collection__item-icon",Wh="tox-collection__item-label",Gh="tox-collection__item--active",Xh=function(t){return xt(Ph,t).getOr(Lh)},Yh=tinymce.util.Tools.resolve("tinymce.util.I18n"),qh=tinymce.util.Tools.resolve("tinymce.Env"),Kh=function(t){var n=qh.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=t.split("+"),o=E(e,function(t){var e=t.toLowerCase().trim();return it(n,e)?n[e]:t});return qh.mac?o.join(""):o.join("+")},Jh=function(t){return{dom:{tag:"span",classes:[Uh],innerHtml:t}}},$h=function(t){return{dom:{tag:"span",classes:[Wh]},components:[aa(Yh.translate(t))]}},Qh=function(t,e){return{dom:{tag:"span",classes:[Wh]},components:[{dom:{tag:t.tag,attributes:{style:t.styleAttr}},components:[aa(Yh.translate(e))]}]}},Zh=function(t){return{dom:{tag:"span",classes:["tox-collection__item-accessory"],innerHtml:Kh(t)}}},tg=function(t){return{dom:{tag:"span",classes:[Uh,"tox-collection__item-checkmark"],innerHtml:Qm("checkmark",t)}}},eg=function(t){var e,n,o,r=Ne.fromHtml(t),i=cn(r),a=(n=(e=r).dom().attributes!==undefined?e.dom().attributes:[],D(n,function(t,e){var n;return"class"===e.name?t:Gn({},t,((n={})[e.name]=e.value,n))},{})),u=(o=r,Array.prototype.slice.call(o.dom().classList,0)),c=0===i.length?{}:{innerHtml:pn(r)};return Gn({tag:yn(r),classes:u,attributes:a},c)},ng=function(t,e,n){void 0===n&&(n=P.none());var o,r,i,a,u,c,s,l,f,d,m=t.iconContent.map(function(t){return Zm(t,e.icons,n)}),h=P.from(t.meta).fold(function(){return $h},function(t){return it(t,"style")?v(Qh,t.style):$h});return"color"===t.presets?(c=t.ariaLabel,s=t.value,{dom:(l=Nh,f=m.getOr(""),d=c.map(function(t){return' title="'+t+'"'}).getOr(""),eg("custom"===s?'<button class="'+l+' tox-swatches__picker-btn"'+d+">"+f+"</button>":"remove"===s?'<div class="'+l+' tox-swatch--remove"'+d+">"+f+"</div>":'<div class="'+l+'" style="background-color: '+s+'" data-mce-color="'+s+'"'+d+"></div>")),optComponents:[]}):(r=m,i=h,a=(o=t).checkMark.orThunk(function(){return r.or(P.some("")).map(Jh)}),u=o.ariaLabel.map(function(t){return{attributes:{title:Yh.translate(t)}}}).getOr({}),{dom:vt({tag:"div",classes:[Lh,Rh]},u),optComponents:[a,o.textContent.map(i),o.shortcutContent.map(Zh),o.caret]})},og=function(t){return Ih.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},rg=function(t){return Ih.config({disabled:t})},ig=function(t){return Ih.config({disabled:t,disableClass:"tox-tbtn--disabled"})},ag=function(t,e){var n=t.getApi(e);return function(t){t(n)}},ug=function(n,o){return Qr(function(t){ag(n,t)(function(t){var e=n.onSetup(t);null!==e&&e!==undefined&&o.set(e)})})},cg=function(e,n){return Zr(function(t){return ag(e,t)(n.get())})};(ih=rh||(rh={}))[ih.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",ih[ih.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var sg,lg,fg=rh,dg={"alloy.execute":["disabling","alloy.base.behaviour","toggling","item-events"]},mg=function(t){return j(t,function(t){return t.toArray()})},hg=function(t,e,n){var o,r,i=Ct(N);return{type:"item",dom:e.dom,components:mg(e.optComponents),data:t.data,eventOrder:dg,hasSubmenu:t.triggersSubmenu,itemBehaviours:_a([Tm("item-events",[(o=t,r=n,ei(function(t,e){ag(o,t)(o.onAction),o.triggersSubmenu||r!==fg.CLOSE_ON_EXECUTE||(kr(t,He()),e.stop())})),ug(t,i),cg(t,i)]),og(t.disabled),Yd.config({})].concat(t.itemBehaviours))}},gg=function(t){return{value:t.value,meta:vt({text:t.text.getOr("")},t.meta)}},vg=U(fl("item-widget",Dm())),pg=Un("cell-over"),bg=Un("cell-execute"),yg=function(e,n,t){var o,r=function(t){return Cr(t,bg,{row:e,col:n})};return sa({dom:{tag:"div",attributes:(o={role:"button"},o["aria-labelledby"]=t,o)},behaviours:_a([Tm("insert-table-picker-cell",[Wr(_t(),fm.focus),Wr(Se(),r),Wr(Oe(),r)]),km.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),fm.config({onFocus:function(t){return Cr(t,pg,{row:e,col:n})}})])})},xg={inserttable:function uV(o){var t,e=Un("size-label"),u=function(t,e,n){for(var o=[],r=0;r<e;r++){for(var i=[],a=0;a<n;a++)i.push(yg(r,a,t));o.push(i)}return o}(e,10,10),c=Km({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:e}},components:[aa("0x0")],behaviours:_a([Yd.config({})])});return{type:"widget",data:{value:Un("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[vg().widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:(t=u,j(t,function(t){return E(t,la)})).concat(c.asSpec()),behaviours:_a([Tm("insert-table-picker",[qr(pg,function(t,e,n){var o,r,i=n.event().row(),a=n.event().col();!function(t,e,n,o,r){for(var i=0;i<o;i++)for(var a=0;a<r;a++)km.set(t[i][a],i<=e&&a<=n)}(u,i,a,10,10),Yd.set(c.get(t),[(o=i,r=a,aa(r+1+"x"+(o+1)))])}),qr(bg,function(t,e,n){o.onAction({numRows:n.event().row()+1,numColumns:n.event().col()+1}),kr(t,He())})]),jd.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}}},wg=function(e,t,n,o,r,i,a){var u=ng({presets:n,textContent:t?e.text:P.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:P.none(),checkMark:t?P.some(tg(a.icons)):P.none(),caret:P.none(),value:e.value},a);return gt(hg({data:gg(e),disabled:e.disabled,getApi:function(e){return{setActive:function(t){km.set(e,t)},isActive:function(){return km.isOn(e)},isDisabled:function(){return Ih.isDisabled(e)},setDisabled:function(t){return t?Ih.disable(e):Ih.enable(e)}}},onAction:function(t){return o(e.value)},onSetup:function(t){return t.setActive(r),function(){}},triggersSubmenu:!1,itemBehaviours:[]},u,i),{toggling:{toggleClass:jh,toggleOnExecute:!1,selected:e.active}})},zg=function(e,t,n,o,r,i){var a=ng({presets:n,textContent:t?e.text:P.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:P.none(),checkMark:P.none(),caret:P.none(),value:e.value},i,e.icon);return hg({data:gg(e),disabled:e.disabled,getApi:function(){return{}},onAction:function(t){return o(e.value,e.meta)},onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:[]},a,r)},Sg=function(t){var e=t.text.fold(function(){return{}},function(t){return{innerHtml:t}});return{type:"separator",dom:Gn({tag:"div",classes:[Rh,"tox-collection__group-heading"]},e),components:[]}},kg=function(t,e,n){var o=ng({presets:"normal",iconContent:t.icon,textContent:t.text,ariaLabel:t.text,caret:P.none(),checkMark:P.none(),shortcutContent:t.shortcut},n);return hg({data:gg(t),getApi:function(e){return{isDisabled:function(){return Ih.isDisabled(e)},setDisabled:function(t){return t?Ih.disable(e):Ih.enable(e)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,e)},Cg=function(t,e,n){var o,r=(o=n.icons,{dom:{tag:"span",classes:["tox-collection__item-caret"],innerHtml:Qm("chevron-right",o)}}),i=ng({presets:"normal",iconContent:t.icon,textContent:t.text,ariaLabel:t.text,caret:P.some(r),checkMark:P.none(),shortcutContent:t.shortcut},n);return hg({data:gg(t),getApi:function(e){return{isDisabled:function(){return Ih.isDisabled(e)},setDisabled:function(t){return t?Ih.disable(e):Ih.enable(e)}}},disabled:t.disabled,onAction:N,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},i,e)},Og=function(t,e,n){var o=ng({iconContent:P.none(),textContent:t.text,ariaLabel:t.text,checkMark:P.some(tg(n.icons)),caret:P.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},n);return gt(hg({data:gg(t),disabled:t.disabled,getApi:function(e){return{setActive:function(t){km.set(e,t)},isActive:function(){return km.isOn(e)},isDisabled:function(){return Ih.isDisabled(e)},setDisabled:function(t){return t?Ih.disable(e):Ih.enable(e)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,e),{toggling:{toggleClass:jh,toggleOnExecute:!1,selected:t.active}})},Mg=function(e){return(t=xg,n=e.fancytype,Object.prototype.hasOwnProperty.call(t,n)?P.some(t[n]):P.none()).map(function(t){return t(e)});var t,n},Hg=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:(e=t,"color"===e?"tox-swatches":"tox-menu"),tieredMenu:"tox-tiered-menu"};var e},Vg=function(t){var e=Hg(t);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:Xh(t)}},Eg=[Nm.parts().items({})],Tg=function(t,e,n){var o=Hg(n);return{dom:{tag:"div",classes:R([[o.tieredMenu]])},markers:Vg(n)}},Ag=function(t,e){var n=Vg(e);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===e?"tox-swatches__row":"tox-collection__group")}},Bg=function(n,o){return function(t){var e=V(t,o);return E(e,function(t){return{dom:n,components:t}})}},Dg=function(e,i){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[Nm.parts().items({preprocess:function(t){return"auto"!==e&&1<e?Bg({tag:"div",classes:["tox-collection__group"]},e)(t):(n=function(t,e){return"separator"===i[e].type},o=[],r=[],T(t,function(t,e){n(t,e)?(0<r.length&&o.push(r),r=[],it(t.dom,"innerHtml")&&r.push(t)):r.push(t)}),0<r.length&&o.push(r),E(o,function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}}));var n,o,r}})]}};(lg=sg||(sg={}))[lg.ContentFocus=0]="ContentFocus",lg[lg.UiFocus=1]="UiFocus";var _g=function(t){return console.error(Wo(t)),console.log(t),P.none()},Fg=function(t){return t.icon!==undefined},Ig=function(t){return H(t,Fg)},Lg=function(t,e,n){switch(t.type){case"menuitem":return(u=t,Po("menuitem",vh,u)).fold(_g,function(t){return P.some(kg(t,e,n))});case"nestedmenuitem":return(a=t,Po("nestedmenuitem",ph,a)).fold(_g,function(t){return P.some(Cg(t,e,n))});case"togglemenuitem":return(i=t,Po("togglemenuitem",bh,i)).fold(_g,function(t){return P.some(Og(t,e,n))});case"separator":return(r=t,Po("separatormenuitem",xh,r)).fold(_g,function(t){return P.some(Sg(t))});case"fancymenuitem":return(o=t,Po("fancymenuitem",wh,o)).fold(_g,function(t){return Mg(t)});default:return console.error("Unknown item in general menu",t),P.none()}var o,r,i,a,u},Rg=function(t,e,n,o,r){var i,a,u,c,s,l,f;return"color"===r?{value:t,dom:(i=o,f={dom:{tag:"div",classes:["tox-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Nm.parts().items({preprocess:"auto"!==i?Bg({tag:"div",classes:["tox-swatches__row"]},i):d})]}]}).dom,components:f.components,items:n}:"normal"===r&&"auto"===o?{value:t,dom:(f=Dg(o,n)).dom,components:f.components,items:n}:"normal"===r&&1===o?{value:t,dom:(f=Dg(1,n)).dom,components:f.components,items:n}:"normal"===r?{value:t,dom:(f=Dg(o,n)).dom,components:f.components,items:n}:"toolbar"!==r||"auto"===o?{value:t,dom:(u=e,c=o,s=r,l=Hg(s),{tag:"div",classes:R([[l.menu,"tox-menu-"+c+"-column"],u?[l.hasIcons]:[]])}),components:Eg,items:n}:{value:t,dom:(a=o,f={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Nm.parts().items({preprocess:Bg({tag:"div",classes:["tox-collection__group"]},a)})]}).dom,components:f.components,items:n}},Ng=function(t,n,o,r,i,a,u){return Ot(E(t,function(e){return"choiceitem"===e.type?(t=e,Po("choicemenuitem",yh,t)).fold(_g,function(t){return P.some(wg(t,1===o,r,n,a(e.value),i,u))}):P.none();var t}))},Pg=function(t,n,o,r,i){return Ot(E(t,function(t){return(e=t,Po("Autocompleter.Item",dh,e)).fold(_g,function(t){return P.some(zg(t,1===o,"normal",n,r,i))});var e}))},jg=function(t,e,n,o,r,i,a,u){var c=Ig(e),s=Ng(e,n,o,"color"!==r?"normal":"color",i,a,u);return Rg(t,c,s,o,r)},Ug=function(t,e,n,o){var r=Ig(e),i=Ot(E(e,function(t){return Lg(t,n,o)}));return Rg(t,r,i,1,"normal")},Wg=function(t){return Gm.singleData(t.value,t)},Gg=function(h,g){var v=sa(Xm.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],lazySink:g.getSink})),t=function(){return Xm.isOpen(v)},p=function(){t()&&Xm.hide(v)},e=Gt(function(){return hh(h)}),n=ah(function(t){(" "===t.key?P.none():fh(h,e)).fold(p,function(m){m.lookupData.then(function(t){var n,e,o,r,i,a,u,c,s,l,f=(n=m.triggerChar,o=Mt(e=t,function(t){return P.from(t.columns)}).getOr(1),j(e,function(i){var t=i.items;return Pg(t,function(o,r){var t=h.selection.getRng(),e=t.startContainer;ch(t,n,e.data,t.startOffset).fold(function(){return console.error("Lost context. Cursor probably moved")},function(t){var e=t.rng,n={hide:p};i.onAction(n,e,o,r)})},o,fg.BUBBLE_TO_SANDBOX,g.providers)}));if(0<f.length){var d=Mt(t,function(t){return P.from(t.columns)}).getOr(1);Xm.showAt(v,{anchor:"selection",root:Ne.fromDom(h.getBody()),getSelection:function(){return P.some({start:function(){return Ne.fromDom(m.range.startContainer)},soffset:function(){return m.range.startOffset},finish:function(){return Ne.fromDom(m.range.endContainer)},foffset:function(){return m.range.endOffset}})}},Nm.sketch((r=Rg("autocompleter-value",!0,f,d,"normal"),i=d,a=sg.ContentFocus,u="normal",c=a===sg.ContentFocus?mf():df(),s=Ag(i,u),l=Vg(u),{dom:r.dom,components:r.components,items:r.items,value:r.value,markers:{selectedItem:l.selectedItem,item:l.item},movement:s,fakeFocus:a===sg.ContentFocus,focusManager:c,menuBehaviours:kh("auto"!==i?[]:[Qr(function(o,t){zh(o,4,l.item).each(function(t){var e=t.numColumns,n=t.numRows;jd.setGridSize(o,n,e)})})])}))),Xm.getContent(v).each(Jl.highlightFirst)}else p()})})},50);sh({onKeypress:n,closeIfNecessary:p,isActive:t,getView:function(){return Xm.getContent(v)}},h)},Xg=function(m,h){return function(t){if(m(t)){var e,n,o,r,i,a,u,c=Ne.fromDom(t.target),s=function(){t.stopPropagation()},l=function(){t.preventDefault()},f=g(l,s),d=(e=c,n=t.clientX,o=t.clientY,r=s,i=l,a=f,u=t,{target:U(e),x:U(n),y:U(o),stop:r,prevent:i,kill:a,raw:U(u)});h(d)}}},Yg=function(t,e,n,o,r){var i=Xg(n,o);return t.dom().addEventListener(e,i,r),{unbind:v(qg,t,e,i,r)}},qg=function(t,e,n,o){t.dom().removeEventListener(e,n,o)},Kg=U(!0),Jg=function(t,e,n){return Yg(t,e,Kg,n,!1)},$g=function(t,e,n){return Yg(t,e,Kg,n,!0)},Qg=function(t,e,n){return ma(t,e,n).isSome()};function Zg(n,o){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},schedule:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r=setTimeout(function(){n.apply(null,t),r=null},o)}}}var tv=function(t){var e=t.raw();return e.touches===undefined||1!==e.touches.length?P.none():P.some(e.touches[0])},ev=function(n){var a=Ct(P.none()),o=Zg(function(t){a.set(P.none()),n.triggerEvent(Me(),t)},400),r=zt([{key:Ht(),value:function(n){return tv(n).each(function(t){o.cancel();var e={x:U(t.clientX),y:U(t.clientY),target:n.target};o.schedule(n),a.set(P.some(e))}),P.none()}},{key:Vt(),value:function(t){return o.cancel(),tv(t).each(function(i){a.get().each(function(t){var e,n,o,r;e=i,n=t,o=Math.abs(e.clientX-n.x()),r=Math.abs(e.clientY-n.y()),(5<o||5<r)&&a.set(P.none())})}),P.none()}},{key:Et(),value:function(e){return o.cancel(),a.get().filter(function(t){return nn(t.target(),e.target())}).map(function(t){return n.triggerEvent(Ce(),e)})}}]);return{fireIfReady:function(e,t){return xt(r,t).bind(function(t){return t(e)})}}},nv=pe.detect().browser.isFirefox(),ov=Ho([or("triggerEvent"),dr("stopBackspace",!0)]),rv=function(e,t){var n,o,r,i,a=Uo("Getting GUI events settings",ov,t),u=pe.detect().deviceType.isTouch()?["touchstart","touchmove","touchend","gesturestart"]:["mousedown","mouseup","mouseover","mousemove","mouseout","click"],c=ev(a),s=E(u.concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(t){return Jg(e,t,function(e){c.fireIfReady(e,t).each(function(t){t&&e.kill()}),a.triggerEvent(t,e)&&e.kill()})}),l=Ct(P.none()),f=Jg(e,"paste",function(e){c.fireIfReady(e,"paste").each(function(t){t&&e.kill()}),a.triggerEvent("paste",e)&&e.kill(),l.set(P.some(setTimeout(function(){a.triggerEvent(we(),e)},0)))}),d=Jg(e,"keydown",function(t){var e;a.triggerEvent("keydown",t)?t.kill():!0!==a.stopBackspace||8!==(e=t).raw().which||M(["input","textarea"],yn(e.target()))||Qg(e.target(),'[contenteditable="true"]')||t.prevent()}),m=(n=e,o=function(t){a.triggerEvent("focusin",t)&&t.kill()},nv?$g(n,"focus",o):Jg(n,"focusin",o)),h=Ct(P.none()),g=(r=e,i=function(t){a.triggerEvent("focusout",t)&&t.kill(),h.set(P.some(setTimeout(function(){a.triggerEvent(xe(),t)},0)))},nv?$g(r,"blur",i):Jg(r,"focusout",i));return{unbind:function(){T(s,function(t){t.unbind()}),d.unbind(),m.unbind(),g.unbind(),f.unbind(),l.get().each(clearTimeout),h.get().each(clearTimeout)}}},iv=function(t,e){var n=xt(t,"target").map(function(t){return t()}).getOr(e);return Ct(n)},av=dt([{stopped:[]},{resume:["element"]},{complete:[]}]),uv=function(t,o,e,n,r,i){var a,u,c,s,l=t(o,n),f=(a=e,u=r,c=Ct(!1),s=Ct(!1),{stop:function(){c.set(!0)},cut:function(){s.set(!0)},isStopped:c.get,isCut:s.get,event:U(a),setSource:u.set,getSource:u.get});return l.fold(function(){return i.logEventNoHandlers(o,n),av.complete()},function(e){var n=e.descHandler();return ki(n)(f),f.isStopped()?(i.logEventStopped(o,e.element(),n.purpose()),av.stopped()):f.isCut()?(i.logEventCut(o,e.element(),n.purpose()),av.complete()):an(e.element()).fold(function(){return i.logNoParent(o,e.element(),n.purpose()),av.complete()},function(t){return i.logEventResponse(o,e.element(),n.purpose()),av.resume(t)})})},cv=function(e,n,o,t,r,i){return uv(e,n,o,t,r,i).fold(function(){return!0},function(t){return cv(e,n,o,t,r,i)},function(){return!1})},sv=function(t,e,n){var o,r,i=(o=e,r=Ct(!1),{stop:function(){r.set(!0)},cut:N,isStopped:r.get,isCut:U(!1),event:U(o),setSource:a("Cannot set source of a broadcasted event"),getSource:a("Cannot get source of a broadcasted event")});return T(t,function(t){var e=t.descHandler();ki(e)(i)}),i.isStopped()},lv=function(t,e,n,o,r){var i=iv(n,o);return cv(t,e,n,o,i,r)},fv=Pe("element","descHandler"),dv=function(t,e){return{id:U(t),descHandler:U(e)}};function mv(){var i={};return{registerId:function(o,r,t){tt(t,function(t,e){var n=i[e]!==undefined?i[e]:{};n[r]=Si(t,o),i[e]=n})},unregisterId:function(n){tt(i,function(t,e){t.hasOwnProperty(n)&&delete t[n]})},filterByType:function(t){return xt(i,t).map(function(t){return ot(t,function(t,e){return dv(e,t)})}).getOr([])},find:function(t,e,n){var r=bt(e)(i);return Nr(n,function(t){return n=r,si(o=t).fold(function(){return P.none()},function(t){var e=bt(t);return n.bind(e).map(function(t){return fv(o,t)})});var n,o},t)}}}function hv(){var o=mv(),r={},i=function(o){var t=o.element();return si(t).fold(function(){return t="uid-",e=o.element(),n=Un(ai+t),ci(e,n),n;var t,e,n},function(t){return t})},a=function(t){si(t.element()).each(function(t){r[t]=undefined,o.unregisterId(t)})};return{find:function(t,e,n){return o.find(t,e,n)},filter:function(t){return o.filterByType(t)},register:function(t){var e=i(t);kt(r,e)&&function(t,e){var n=r[e];if(n!==t)throw new Error('The tagId "'+e+'" is already used by: '+An(n.element())+"\nCannot use it for: "+An(t.element())+"\nThe conflicting element is"+(Dr(n.element())?" ":" not ")+"already in the DOM");a(t)}(t,e);var n=[t];o.registerId(n,e,t.events()),r[e]=t},unregister:a,getById:function(t){return bt(t)(r)}}}var gv,vv,pv=Al({name:"Container",factory:function(t){var e=t.dom,n=e.attributes,o=Xn(e,["attributes"]);return{uid:t.uid,dom:Gn({tag:"div",attributes:Gn({role:"presentation"},n)},o),components:t.components,behaviours:Ts(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[dr("components",[]),Es("containerBehaviours",[]),dr("events",{}),dr("domModification",{}),dr("eventOrder",{})]}),bv=function(n){var o=function(e){return an(n.element()).fold(function(){return!0},function(t){return nn(e,t)})},r=hv(),s=function(t,e){return r.find(o,t,e)},t=rv(n.element(),{triggerEvent:function(a,u){return Ln(a,u.target(),function(t){return e=s,n=a,r=t,i=(o=u).target(),lv(e,n,o,i,r);var e,n,o,r,i})}}),i={debugInfo:U("real"),triggerEvent:function(e,n,o){Ln(e,n,function(t){lv(s,e,o,n,t)})},triggerFocus:function(u,c){si(u).fold(function(){cf(u)},function(t){Ln(ye(),u,function(t){var e,n,o,r,i,a;e=s,n=ye(),o={originator:U(c),kill:N,prevent:N,target:U(u)},i=t,a=iv(o,r=u),uv(e,n,o,r,a,i)})})},triggerEscape:function(t,e){i.triggerEvent("keydown",t.element(),e.event())},getByUid:function(t){return h(t)},getByDom:function(t){return g(t)},build:sa,addToGui:function(t){u(t)},removeFromGui:function(t){c(t)},addToWorld:function(t){e(t)},removeFromWorld:function(t){a(t)},broadcast:function(t){f(t)},broadcastOn:function(t,e){d(t,e)},broadcastEvent:function(t,e){m(t,e)},isConnected:U(!0)},e=function(t){t.connect(i),zn(t.element())||(r.register(t),T(t.components(),e),i.triggerEvent(Ee(),t.element(),{target:U(t.element())}))},a=function(t){zn(t.element())||(T(t.components(),a),r.unregister(t)),t.disconnect()},u=function(t){cs(n,t)},c=function(t){fs(t)},l=function(n){var t=r.filter(ze());T(t,function(t){var e=t.descHandler();ki(e)(n)})},f=function(t){l({universal:U(!0),data:U(t)})},d=function(t,e){l({universal:U(!1),channels:U(t),data:U(e)})},m=function(t,e){var n=r.filter(t);return sv(n,e)},h=function(t){return r.getById(t).fold(function(){return ft.error(new Error('Could not find component with uid: "'+t+'" in system.'))},ft.value)},g=function(t){var e=si(t).getOr("not found");return h(e)};return e(n),{root:U(n),element:n.element,destroy:function(){t.unbind(),vn(n.element())},add:u,remove:c,getByUid:h,getByDom:g,addToWorld:e,removeFromWorld:a,broadcast:f,broadcastOn:d,broadcastEvent:m}},yv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),xv=tinymce.util.Tools.resolve("tinymce.EditorManager"),wv=function(t){return P.from(t.settings.min_width).filter(k)},zv=function(t){return P.from(t.settings.min_height).filter(k)},Sv=function(e){var t=Q(e.settings),n=A(t,function(t){return/^toolbar([1-9])$/.test(t)}),o=E(n,function(t){return e.getParam(t,!1,"string")}),r=A(o,function(t){return"string"==typeof t});return 0<r.length?P.some(r):P.none()},kv=Un("form-component-change"),Cv=Un("form-close"),Ov=Un("form-cancel"),Mv=Un("form-action"),Hv=Un("form-submit"),Vv=Un("form-block"),Ev=Un("form-unblock"),Tv=Un("form-tabchange"),Av=Un("form-resize"),Bv=U([dr("prefix","form-field"),Es("fieldBehaviours",[Il,am])]),Dv=U([al({schema:[Zo("dom")],name:"label"}),al({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[Zo("text")],name:"aria-descriptor"}),rl({factory:{sketch:function(t){var e=pt(t,["factory"]);return t.factory.sketch(e)}},schema:[Zo("factory")],name:"field"})]),_v=Bl({name:"FormField",configFields:Bv(),partFields:Dv(),factory:function(r,t,e,n){var o=As(r.fieldBehaviours,[Il.config({find:function(t){return bl(t,r,"field")}}),am.config({store:{mode:"manual",getValue:function(t){return Il.getCurrent(t).bind(am.getValue)},setValue:function(t,e){Il.getCurrent(t).each(function(t){am.setValue(t,e)})}}})]),i=Pr([Qr(function(t,e){var o=xl(t,r,["label","field","aria-descriptor"]);o.field().each(function(n){var e=Un(r.prefix);o.label().each(function(t){Cn(t.element(),"for",e),Cn(n.element(),"id",e)}),o["aria-descriptor"]().each(function(t){var e=Un(r.prefix);Cn(t.element(),"id",e),Cn(n.element(),"aria-describedby",e)})})})]),a={getField:function(t){return bl(t,r,"field")},getLabel:function(t){return bl(t,r,"label")}};return{uid:r.uid,dom:r.dom,components:t,behaviours:o,events:i,apis:a}},apis:{getField:function(t,e){return t.getField(e)},getLabel:function(t,e){return t.getLabel(e)}}}),Fv=Object.freeze({getCoupled:function(t,e,n,o){return n.getOrCreate(t,e,o)}}),Iv=[tr("others",No(ft.value,Xo()))],Lv=Ia({fields:Iv,name:"coupling",apis:Fv,state:Object.freeze({init:function(t){var i={},e=U({});return xi({readState:e,getOrCreate:function(n,o,r){var t=Q(o.others);if(t)return xt(i,r).getOrThunk(function(){var t=xt(o.others,r).getOrDie("No information found for coupled component: "+r)(n),e=n.getSystem().build(t);return i[r]=e});throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+xo(t,null,2))}})}})}),Rv=Object.freeze({events:function(t,e){var n=t.stream.streams.setup(t,e);return Pr([Wr(t.event,n),Zr(function(){return e.cancel()})].concat(t.cancelEvent.map(function(t){return[Wr(t,function(){return e.cancel()})]}).getOr([])))}}),Nv=function(t){var e=Ct(null);return xi({readState:function(){return{timer:null!==e.get()?"set":"unset"}},setTimer:function(t){e.set(t)},cancel:function(){var t=e.get();null!==t&&t.cancel()}})},Pv=Object.freeze({throttle:Nv,init:function(t){return t.stream.streams.state(t)}}),jv=[tr("stream",Go("mode",{throttle:[Zo("delay"),dr("stopEvent",!0),Ma("streams",{setup:function(t,e){var n=t.stream,o=ah(t.onStream,n.delay);return e.setTimer(o),function(t,e){o.throttle(t,e),n.stopEvent&&e.stop()}},state:Nv})]})),dr("event","input"),ur("cancelEvent"),Ca("onStream")],Uv=Ia({fields:jv,name:"streaming",active:Rv,state:Pv}),Wv=function(t){var n=P.none(),e=[],o=function(t){r()?a(t):e.push(t)},r=function(){return n.isSome()},i=function(t){T(t,a)},a=function(e){n.each(function(t){setTimeout(function(){e(t)},0)})};return t(function(t){n=P.some(t),i(e),e=[]}),{get:o,map:function(n){return Wv(function(e){o(function(t){e(n(t))})})},isReady:r}},Gv={nu:Wv,pure:function(e){return Wv(function(t){t(e)})}},Xv=function(e){var t=function(t){var o;e((o=t,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this;setTimeout(function(){o.apply(n,t)},0)}))},n=function(){return Gv.nu(t)};return{map:function(o){return Xv(function(n){t(function(t){var e=o(t);n(e)})})},bind:function(n){return Xv(function(e){t(function(t){n(t).get(e)})})},anonBind:function(n){return Xv(function(e){t(function(t){n.get(e)})})},toLazy:n,toCached:function(){var e=null;return Xv(function(t){null===e&&(e=n()),e.get(t)})},get:t}},Yv={nu:Xv,pure:function(e){return Xv(function(t){t(e)})}},qv=U("sink"),Kv=U(al({name:qv(),overrides:U({dom:{tag:"div"},behaviours:_a([is.config({useFixed:!0})]),events:Pr([Kr(Lt()),Kr(Tt()),Kr(jt())])})}));(vv=gv||(gv={}))[vv.HighlightFirst=0]="HighlightFirst",vv[vv.HighlightNone=1]="HighlightNone";var Jv=function(t,e){var n=t.getHotspot(e).getOr(e);return t.layouts.fold(function(){return{anchor:"hotspot",hotspot:n}},function(t){return{anchor:"hotspot",hotspot:n,layouts:t}})},$v=function(t,e,n,o,r,i,a){var u,c,s,l,f,d,m,h,g,v,p=Jv(t,n);return(c=p,l=o,f=r,d=a,m=e,h=s=n,g=(0,(u=t).fetch)(h).map(m),v=ep(s,u),g.map(function(t){return Gm.sketch(Gn({},f.menu(),{uid:li(""),data:t,highlightImmediately:d===gv.HighlightFirst,onOpenMenu:function(t,e){var n=v().getOrDie();is.position(n,c,e),ks.decloak(l)},onOpenSubmenu:function(t,e,n){var o=v().getOrDie();is.position(o,{anchor:"submenu",item:e},n),ks.decloak(l)},onEscape:function(){return fm.focus(s),ks.close(l),P.some(!0)}}))})).map(function(t){return ks.cloak(o),ks.open(o,t),i(o),o})},Qv=function(t,e,n,o,r,i,a){return ks.close(o),Yv.pure(o)},Zv=function(t,e,n,o,r,i){var a=Lv.getCoupled(n,"sandbox");return(ks.isOpen(a)?Qv:$v)(t,e,n,a,o,r,i)},tp=function(t,e,n){var o,r,i=Il.getCurrent(e).getOr(e),a=eu(t.element());n?Wi(i.element(),"min-width",a+"px"):(o=i.element(),r=a,tu.set(o,r))},ep=function(e,t){return e.getSystem().getByUid(t.uid+"-"+qv()).map(function(t){return function(){return ft.value(t)}}).getOrThunk(function(){return t.lazySink.fold(function(){return function(){return ft.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(t){return function(){return t(e)}})})},np=function(o,r,i){var e,a=(e=Un("aria-owns"),{id:U(e),link:function(t){Cn(t,"aria-owns",e)},unlink:function(t){Vn(t,"aria-owns")}}),t=ep(r,o);return{dom:{tag:"div",classes:o.sandboxClasses,attributes:{id:a.id()}},behaviours:Ds(o.sandboxBehaviours,[am.config({store:{mode:"memory",initialValue:r}}),ks.config({onOpen:function(t,e){var n=Jv(o,r);a.link(r.element()),o.matchWidth&&tp(n.hotspot,e,o.useMinWidth),o.onOpen(n,t,e),i!==undefined&&i.onOpen!==undefined&&i.onOpen(t,e)},onClose:function(t,e){a.unlink(r.element()),i!==undefined&&i.onClose!==undefined&&i.onClose(t,e)},isPartOf:function(t,e,n){return ga(e,n)||ga(r,n)},getAttachPoint:function(){return t().getOrDie()}}),Il.config({find:function(t){return ks.getState(t).bind(function(t){return Il.getCurrent(t)})}}),Hs({isExtraPart:U(!1)})])}},op=function(t,e,n){var o=am.getValue(n);am.setValue(e,o),ip(e)},rp=function(t,e){var n=t.element(),o=Qi(n),r=n.dom();"number"!==Mn(n,"type")&&e(r,o)},ip=function(t){rp(t,function(t,e){return t.setSelectionRange(e.length,e.length)})},ap=function(t,e,o){if(t.selectsOver){var n=am.getValue(e),r=t.getDisplayText(n),i=am.getValue(o);return 0===t.getDisplayText(i).indexOf(r)?P.some(function(){var t,n;op(0,e,o),t=e,n=r.length,rp(t,function(t,e){return t.setSelectionRange(n,e.length)})}):P.none()}return P.none()},up=U([ur("data"),dr("inputAttributes",{}),dr("inputStyles",{}),dr("tag","input"),dr("inputClasses",[]),Sa("onSetValue"),dr("styles",{}),dr("eventOrder",{}),Es("inputBehaviours",[am,fm]),dr("selectOnFocus",!0)]),cp=function(t){return _a([fm.config({onFocus:!1===t.selectOnFocus?N:function(t){var e=t.element(),n=Qi(e);e.dom().setSelectionRange(0,n.length)}})])},sp=function(t){return{tag:t.tag,attributes:Gn({type:"input"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},lp=U("alloy.typeahead.itemexecute"),fp=function(){return[dr("sandboxClasses",[]),Bs("sandboxBehaviours",[Il,Ua,ks,am])]},dp=U([ur("lazySink"),Zo("fetch"),dr("minChars",5),dr("responseTime",1e3),Sa("onOpen"),dr("getHotspot",P.some),dr("layouts",P.none()),dr("eventOrder",{}),yr("model",{},[dr("getDisplayText",function(t){return t.meta!==undefined&&t.meta.text!==undefined?t.meta.text:t.value}),dr("selectsOver",!0),dr("populateFromBrowse",!0)]),Sa("onSetValue"),ka("onExecute"),Sa("onItemExecute"),dr("inputClasses",[]),dr("inputAttributes",{}),dr("inputStyles",{}),dr("matchWidth",!0),dr("useMinWidth",!1),dr("dismissOnBlur",!0),wa(["openClass"]),ur("initialData"),Es("typeaheadBehaviours",[fm,am,Uv,jd,km,Lv]),xr("previewing",function(){return Ct(!0)})].concat(up()).concat(fp())),mp=U([il({schema:[xa()],name:"menu",overrides:function(o){return{fakeFocus:!0,onHighlight:function(e,n){o.previewing.get()?e.getSystem().getByUid(o.uid).each(function(t){ap(o.model,t,n).fold(function(){return Jl.dehighlight(e,n)},function(t){return t()})}):e.getSystem().getByUid(o.uid).each(function(t){o.model.populateFromBrowse&&op(o.model,t,n)}),o.previewing.set(!1)},onExecute:function(t,e){return t.getSystem().getByUid(o.uid).toOption().map(function(t){return Cr(t,lp(),{item:e}),!0})},onHover:function(t,e){o.previewing.set(!1),t.getSystem().getByUid(o.uid).each(function(t){o.model.populateFromBrowse&&op(o.model,t,e)})}}}})]),hp=Bl({name:"Typeahead",configFields:dp(),partFields:mp(),factory:function(r,t,e,i){var n=function(t,e,n){r.previewing.set(!1);var o=Lv.getCoupled(t,"sandbox");ks.isOpen(o)?Il.getCurrent(o).each(function(t){Jl.getHighlighted(t).fold(function(){n(t)},function(){Vr(o,t.element(),"keydown",e)})}):$v(r,a(t),t,o,i,function(t){Il.getCurrent(t).each(n)},gv.HighlightFirst).get(N)},o=cp(r),a=function(o){return function(t){var e=rt(t.menus),n=j(e,function(t){return A(t.items,function(t){return"item"===t.type})});return am.getState(o).update(E(n,function(t){return t.data})),t}},u=[fm.config({}),am.config({onSetValue:r.onSetValue,store:Gn({mode:"dataset",getDataKey:function(t){return Qi(t.element())},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(t,e){Zi(t.element(),r.model.getDisplayText(e))}},r.initialData.map(function(t){return wt("initialValue",t)}).getOr({}))}),Uv.config({stream:{mode:"throttle",delay:r.responseTime,stopEvent:!1},onStream:function(t,e){var n=Lv.getCoupled(t,"sandbox");if(fm.isFocused(t)&&Qi(t.element()).length>=r.minChars){var o=Il.getCurrent(n).bind(function(t){return Jl.getHighlighted(t).map(am.getValue)});r.previewing.set(!0),$v(r,a(t),t,n,i,function(t){Il.getCurrent(n).each(function(t){o.fold(function(){r.model.selectsOver&&Jl.highlightFirst(t)},function(e){Jl.highlightBy(t,function(t){return am.getValue(t).value===e.value}),Jl.getHighlighted(t).orThunk(function(){return Jl.highlightFirst(t),P.none()})})})},gv.HighlightFirst).get(N)}},cancelEvent:Ve()}),jd.config({mode:"special",onDown:function(t,e){return n(t,e,Jl.highlightFirst),P.some(!0)},onEscape:function(t){var e=Lv.getCoupled(t,"sandbox");return ks.isOpen(e)?(ks.close(e),P.some(!0)):P.none()},onUp:function(t,e){return n(t,e,Jl.highlightLast),P.some(!0)},onEnter:function(e){var t=Lv.getCoupled(e,"sandbox"),n=ks.isOpen(t);if(n&&!r.previewing.get())return Il.getCurrent(t).bind(function(t){return Jl.getHighlighted(t)}).map(function(t){return Cr(e,lp(),{item:t}),!0});var o=am.getValue(e);return kr(e,Ve()),r.onExecute(t,e,o),n&&ks.close(t),P.some(!0)}}),km.config({toggleClass:r.markers.openClass,aria:{mode:"pressed",syncWithExpanded:!0}}),Lv.config({others:{sandbox:function(t){return np(r,t,{onOpen:d,onClose:d})}}}),Tm("typeaheadevents",[ei(function(t){var e=N;Zv(r,a(t),t,i,e,gv.HighlightFirst).get(N)}),Wr(lp(),function(t,e){var n=Lv.getCoupled(t,"sandbox");op(r.model,t,e.event().item()),kr(t,Ve()),r.onItemExecute(t,n,e.event().item(),am.getValue(t)),ks.close(n),ip(t)})].concat(r.dismissOnBlur?[Wr(xe(),function(t){var e=Lv.getCoupled(t,"sandbox");lf(e.element()).isNone()&&ks.close(e)})]:[]))];return{uid:r.uid,dom:sp(r),behaviours:Gn({},o,As(r.typeaheadBehaviours,u)),eventOrder:r.eventOrder}}}),gp=function(t,e,n){var o=pp(t,e,n);return _v.sketch(o)},vp=function(t,e){return gp(t,e,[])},pp=function(t,e,n){return{dom:bp(n),components:t.toArray().concat([e])}},bp=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},yp=function(t,e){return _v.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}})},xp=function(t){return"separator"===t.type},wp={type:"separator"},zp=function(t,n){var e=D(t,function(t,e){return x(e)?""===e?t:"|"===e?0<t.length&&!xp(t[t.length-1])?t.concat([wp]):t:it(n,e.toLowerCase())?t.concat([n[e.toLowerCase()]]):(console.error("No representation for menuItem: "+e),t):t.concat([e])},[]);return 0<e.length&&xp(e[e.length-1])&&e.pop(),e},Sp=function(t,e){return it(t,"getSubmenuItems")?(o=e,r=(n=t).getSubmenuItems(),i=kp(r,o),{item:n,menus:gt(i.menus,wt(n.value,i.items)),expansions:gt(i.expansions,wt(n.value,n.value))}):{item:t,menus:{},expansions:{}};var n,o,r,i},kp=function(t,r){var e=zp(x(t)?t.split(" "):t,r);return B(e,function(t,e){var n=function(t){if(xp(t))return t;var e=xt(t,"value").getOrThunk(function(){return Un("generated-menu-item")});return gt({value:e},t)}(e),o=Sp(n,r);return{menus:gt(t.menus,o.menus),items:[o.item].concat(t.items),expansions:gt(t.expansions,o.expansions)}},{menus:{},expansions:{},items:[]})},Cp=function(t,n,o){var e=Un("primary-menu"),r=kp(t,o.menuItems()),i=Ug(e,r.items,n,o),a=et(r.menus,function(t,e){return Ug(e,t,n,o)}),u=gt(a,wt(e,i));return Gm.tieredData(e,u,r.expansions)},Op=Al({name:"Input",configFields:up(),factory:function(t,e){return{uid:t.uid,dom:sp(t),components:[],behaviours:(n=t,Gn({},cp(n),As(n.inputBehaviours,[am.config({store:{mode:"manual",initialValue:n.data.getOr(undefined),getValue:function(t){return Qi(t.element())},setValue:function(t,e){Qi(t.element())!==e&&Zi(t.element(),e)}},onSetValue:n.onSetValue})]))),eventOrder:t.eventOrder};var n}}),Mp=pe.detect().browser.isFirefox(),Hp={position:"absolute",left:"-9999px"},Vp=function(t,e,n){var o,r,i,a=function(t,e){var n=Ne.fromTag("span",t.dom());Cn(n,"role","presentation");var o=Ne.fromText(e,t.dom());return mn(n,o),n}(on(e),n);Mp&&(o=e,r=a,i=Un("ephox-alloy-aria-voice"),Cn(r,"id",i),Cn(o,"aria-describedby",i)),On(a,t(n)),Gi(a,Hp),mn(e,a),setTimeout(function(){Vn(a,"aria-live"),vn(a)},1e3)},Ep=function(t){return{"aria-live":"assertive","aria-atomic":"true",role:"alert"}},Tp=["input","textarea"],Ap=function(t){var e=yn(t);return M(Tp,e)},Bp=function(t,e){var n=e.getRoot(t).getOr(t.element());Ii(n,e.invalidClass),e.notify.each(function(e){Ap(t.element())&&Vn(n,"title"),e.getContainer(t).each(function(t){bn(t,e.validHtml)}),e.onValid(t)})},Dp=function(n,t,e,o){var r=t.getRoot(n).getOr(n.element());_i(r,t.invalidClass),t.notify.each(function(t){var e;Ap(n.element())&&Cn(n.element(),"title",o),e=_r(),Vp(Ep,e,o),t.getContainer(n).each(function(t){bn(t,o)}),t.onInvalid(n,o)})},_p=function(e,t,n){return t.validator.fold(function(){return Yv.pure(ft.value(!0))},function(t){return t.validate(e)})},Fp=function(e,n,t){return n.notify.each(function(t){t.onValidate(e)}),_p(e,n).map(function(t){return e.getSystem().isConnected()?t.fold(function(t){return Dp(e,n,0,t),ft.error(t)},function(t){return Bp(e,n),ft.value(t)}):ft.error("No longer in system")})},Ip=Object.freeze({markValid:Bp,markInvalid:Dp,query:_p,run:Fp,isInvalid:function(t,e){var n=e.getRoot(t).getOr(t.element());return Li(n,e.invalidClass)}}),Lp=Object.freeze({events:function(e,t){return e.validator.map(function(t){return Pr([Wr(t.onEvent,function(t){Fp(t,e).get(d)})].concat(t.validateOnLoad?[Qr(function(t){Fp(t,e).get(N)})]:[]))}).getOr({})}}),Rp=[Zo("invalidClass"),dr("getRoot",P.none),fr("notify",[dr("aria","alert"),dr("getContainer",P.none),dr("validHtml",""),Sa("onValid"),Sa("onInvalid"),Sa("onValidate")]),fr("validator",[Zo("validate"),dr("onEvent","input"),dr("validateOnLoad",!0)])],Np=Ia({fields:Rp,name:"invalidating",active:Lp,apis:Ip,extra:{validation:function(n){return function(t){var e=am.getValue(t);return Yv.pure(n(e))}}}}),Pp=Object.freeze({exhibit:function(t,e){return zi({attributes:zt([{key:e.tabAttr,value:"true"}])})}}),jp=[dr("tabAttr","data-alloy-tabstop")],Up=Ia({fields:jp,name:"tabstopping",active:Pp}),Wp=function(t){return{value:U(t)}},Gp=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Xp=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Yp=function(t){return Gp.test(t)||Xp.test(t)},qp=function(t){var e,n=(e=t.value().replace(Gp,function(t,e,n,o){return e+e+n+n+o+o}),{value:U(e)});return Xp.exec(n.value())},Kp=function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},Jp=function(t){var e=Kp(t.red())+Kp(t.green())+Kp(t.blue());return Wp(e)},$p=Math.min,Qp=Math.max,Zp=Math.round,tb=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,eb=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,nb=function(t,e,n,o){return{red:U(t),green:U(e),blue:U(n),alpha:U(o)}},ob=function(t){var e=parseInt(t,10);return e.toString()===t&&0<=e&&e<=255},rb=function(t){var e,n,o,r,i,a,u,c,s,l;if(i=(t.hue()||0)%360,a=t.saturation()/100,u=t.value()/100,a=Qp(0,$p(a,1)),u=Qp(0,$p(u,1)),0===a)return c=s=l=Zp(255*u),nb(c,s,l,1);switch(e=i/60,o=(n=u*a)*(1-Math.abs(e%2-1)),r=u-n,Math.floor(e)){case 0:c=n,s=o,l=0;break;case 1:c=o,s=n,l=0;break;case 2:c=0,s=n,l=o;break;case 3:c=0,s=o,l=n;break;case 4:c=o,s=0,l=n;break;case 5:c=n,s=0,l=o;break;default:c=s=l=0}return c=Zp(255*(c+r)),s=Zp(255*(s+r)),l=Zp(255*(l+r)),nb(c,s,l,1)},ib=function(t){var e=qp(t),n=parseInt(e[1],16),o=parseInt(e[2],16),r=parseInt(e[3],16);return nb(n,o,r,1)},ab=function(t,e,n,o){var r=parseInt(t,10),i=parseInt(e,10),a=parseInt(n,10),u=parseFloat(o);return nb(r,i,a,u)},ub=function(t){return"rgba("+t.red()+","+t.green()+","+t.blue()+","+t.alpha()+")"},cb=U(nb(255,0,0,1)),sb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),lb="tinymce-custom-colors",fb="choiceitem",db=[{type:fb,text:"Turquoise",value:"#18BC9B"},{type:fb,text:"Green",value:"#2FCC71"},{type:fb,text:"Blue",value:"#3598DB"},{type:fb,text:"Purple",value:"#9B59B6"},{type:fb,text:"Navy Blue",value:"#34495E"},{type:fb,text:"Dark Turquoise",value:"#18A085"},{type:fb,text:"Dark Green",value:"#27AE60"},{type:fb,text:"Medium Blue",value:"#2880B9"},{type:fb,text:"Medium Purple",value:"#8E44AD"},{type:fb,text:"Midnight Blue",value:"#2B3E50"},{type:fb,text:"Yellow",value:"#F1C40F"},{type:fb,text:"Orange",value:"#E67E23"},{type:fb,text:"Red",value:"#E74C3C"},{type:fb,text:"Light Gray",value:"#ECF0F1"},{type:fb,text:"Gray",value:"#95A5A6"},{type:fb,text:"Dark Yellow",value:"#F29D12"},{type:fb,text:"Dark Orange",value:"#D35400"},{type:fb,text:"Dark Red",value:"#E74C3C"},{type:fb,text:"Medium Gray",value:"#BDC3C7"},{type:fb,text:"Dark Gray",value:"#7E8C8D"},{type:fb,text:"Black",value:"#000000"},{type:fb,text:"White",value:"#ffffff"}],mb=function cV(r){void 0===r&&(r=10);var t,e=sb.getItem(lb),n=x(e)?JSON.parse(e):[],i=r-(t=n).length<0?t.slice(0,r):t,a=function(t){i.splice(t,1)};return{add:function(t){var e,n,o;(e=i,n=t,o=C(e,n),-1===o?P.none():P.some(o)).each(a),i.unshift(t),i.length>r&&i.pop(),sb.setItem(lb,JSON.stringify(i))},state:function(){return i.slice(0)}}}(10),hb=function(t){var e,n=[];for(e=0;e<t.length;e+=2)n.push({text:t[e+1],value:"#"+t[e],type:"choiceitem"});return n},gb=function(t){return t.getParam("color_map")},vb=function(t,e){return t.getParam("color_cols",e,"number")},pb=function(t){return!1!==t.getParam("custom_colors")},bb=function(t){var e=gb(t);return e!==undefined?hb(e):db},yb=function(){return E(mb.state(),function(t){return{type:fb,text:t,value:t}})},xb=function(t){mb.add(t)},wb=function(t,n){var o;return t.dom.getParents(t.selection.getStart(),function(t){var e;(e=t.style["forecolor"===n?"color":"background-color"])&&(o=o||e)}),o},zb=function(t){return Math.max(5,Math.ceil(Math.sqrt(t)))},Sb=function(t){var e=bb(t),n=zb(e.length);return vb(t,n)},kb=function(e,n,t,o){"custom"===t?Mb(e)(function(t){t.each(function(t){xb(t),e.execCommand("mceApplyTextcolor",n,t),o(t)})},"#000000"):"remove"===t?(o(""),e.execCommand("mceRemoveTextcolor",n)):(o(t),e.execCommand("mceApplyTextcolor",n,t))},Cb=function(o,r){return function(t){var e,n;t(o.concat(yb().concat((n={type:e="choiceitem",text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},r?[n,{type:e,text:"Custom color",icon:"color-picker",value:"custom"}]:[n]))))}},Ob=function(e,r,i,t){var a;e.ui.registry.addSplitButton(r,(a=Ct(null),{type:"splitbutton",tooltip:t,presets:"color",icon:"forecolor"===r?"text-color":"highlight-bg-color",select:function(n){return P.from(wb(e,i)).bind(function(t){return function(t){if("transparent"===t)return P.some(nb(0,0,0,0));if(tb.test(t)){var e=tb.exec(t);return P.some(ab(e[1],e[2],e[3],"1"))}if(eb.test(t)){var n=tb.exec(t);return P.some(ab(n[1],n[2],n[3],n[4]))}return P.none()}(t).map(function(t){var e=Jp(t).value();return le(n.toLowerCase(),e)})}).getOr(!1)},columns:Sb(e),fetch:Cb(bb(e),pb(e)),onAction:function(t){null!==a.get()&&kb(e,i,a.get(),function(){})},onItemAction:function(o,t){kb(e,i,t,function(t){var e,n;a.set(t),e="forecolor"===r?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",n=t,o.setIconFill(e,n),o.setIconStroke(e,n)})}}))},Mb=function(i){return function(t,e){var n,o={colorpicker:e},r=(n=t,function(t){var e=t.getData();n(P.from(e.colorpicker)),t.close()});i.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onAction:function(t,e){"hex-valid"===e.name&&(e.value?t.enable("ok"):t.disable("ok"))},onSubmit:r,onClose:function(){},onCancel:function(){t(P.none())}})}},Hb={register:function(t){var i;(i=t).addCommand("mceApplyTextcolor",function(t,e){var n,o,r;o=t,r=e,(n=i).undoManager.transact(function(){n.focus(),n.formatter.apply(o,{value:r}),n.nodeChanged()})}),i.addCommand("mceRemoveTextcolor",function(t){var e,n;n=t,(e=i).undoManager.transact(function(){e.focus(),e.formatter.remove(n,{value:null},null,!0),e.nodeChanged()})}),Ob(t,"forecolor","forecolor","Text color"),Ob(t,"backcolor","hilitecolor","Background color")},getFetch:Cb,colorPickerDialog:Mb,getCurrentColor:wb,getColorCols:Sb,calcCols:zb},Vb=U([Zo("dom"),Zo("fetch"),Sa("onOpen"),ka("onExecute"),dr("getHotspot",P.some),dr("layouts",P.none()),Es("dropdownBehaviours",[km,Lv,jd,fm]),Zo("toggleClass"),dr("eventOrder",{}),ur("lazySink"),dr("matchWidth",!1),dr("useMinWidth",!1),ur("role")].concat(fp())),Eb=U([il({schema:[xa()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),Kv()]),Tb=Bl({name:"Dropdown",configFields:Vb(),partFields:Eb(),factory:function(e,t,n,o){var r,i,a=function(t){ks.getState(t).each(function(t){Gm.highlightPrimary(t)})},u={expand:function(t){km.isOn(t)||Zv(e,function(t){return t},t,o,N,gv.HighlightNone).get(N)},open:function(t){km.isOn(t)||Zv(e,function(t){return t},t,o,N,gv.HighlightFirst).get(N)},isOpen:km.isOn,close:function(t){km.isOn(t)&&Zv(e,function(t){return t},t,o,N,gv.HighlightFirst).get(N)}},c=function(t,e){return Or(t),P.some(!0)};return{uid:e.uid,dom:e.dom,components:t,behaviours:As(e.dropdownBehaviours,[km.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),Lv.config({others:{sandbox:function(t){return np(e,t,{onOpen:function(){km.on(t)},onClose:function(){km.off(t)}})}}}),jd.config({mode:"special",onSpace:c,onEnter:c,onDown:function(t,e){if(Tb.isOpen(t)){var n=Lv.getCoupled(t,"sandbox");a(n)}else Tb.open(t);return P.some(!0)},onEscape:function(t,e){return Tb.isOpen(t)?(Tb.close(t),P.some(!0)):P.none()}}),fm.config({})]),events:Ym(P.some(function(t){Zv(e,function(t){return t},t,o,a,gv.HighlightFirst).get(N)})),eventOrder:Gn({},e.eventOrder,(r={},r[Se()]=["disabling","toggling","alloy.base.behaviour"],r)),apis:u,domModification:{attributes:Gn({"aria-haspopup":"true"},e.role.fold(function(){return{}},function(t){return{role:t}}),"button"===e.dom.tag?{type:(i="type",xt(e.dom,"attributes").bind(function(t){return xt(t,i)})).getOr("button")}:{})}}},apis:{open:function(t,e){return t.open(e)},expand:function(t,e){return t.expand(e)},close:function(t,e){return t.close(e)},isOpen:function(t,e){return t.isOpen(e)}}}),Ab=Ia({fields:[],name:"unselecting",active:Object.freeze({events:function(t){return Pr([jr(Wt(),U(!0))])},exhibit:function(t,e){return zi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),Bb=Un("color-input-change"),Db=Un("color-swatch-change"),_b=Un("color-picker-cancel"),Fb=function(t,e,o){var n,r,i=_v.parts().field({factory:Op,inputClasses:["tox-textfield"],onSetValue:function(t){return Np.run(t).get(function(){})},inputBehaviours:_a([Up.config({}),Np.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return an(t.element())},notify:{onValid:function(t){var e=am.getValue(t);Cr(t,Bb,{color:e})}},validator:{validateOnLoad:!1,validate:function(t){var e=am.getValue(t);if(0===e.length)return Yv.pure(ft.value(!0));var n=Ne.fromTag("span");Wi(n,"background-color",e);var o=qi(n,"background-color").fold(function(){return ft.error("blah")},function(t){return ft.value(e)});return Yv.pure(o)}}})]),selectOnFocus:!1}),a=t.label.map(function(t){return yp(t,e.providers)}),u=function(t,e){Cr(t,Db,{value:e})},c=Km((n={dom:{tag:"span",attributes:{"aria-label":e.providers.translate("Color swatch")}},layouts:P.some({onRtl:function(){return[$u]},onLtr:function(){return[Qu]}}),components:[],fetch:Hb.getFetch(o.getColors(),o.hasCustomColors()),onItemAction:function(n){e.getSink().each(function(t){c.getOpt(t).each(function(e){"custom"===n?o.colorPicker(function(t){t.fold(function(){return kr(e,_b)},function(t){u(e,t),xb(t)})},"#ffffff"):u(e,"remove"===n?"":n)})})}},r=e,Tb.sketch({dom:n.dom,components:n.components,toggleClass:"mce-active",dropdownBehaviours:_a([Ab.config({}),Up.config({})]),layouts:n.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:r.getSink,fetch:function(){return Yv.nu(function(t){return n.fetch(t)}).map(function(t){return Wg(gt(jg(Un("menu-value"),t,function(t){n.onItemAction(t)},5,"color",fg.CLOSE_ON_EXECUTE,function(){return!1},r.providers),{movement:Ag(5,"color")}))})},parts:{menu:Tg(0,0,"color")}})));return _v.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[i,c.asSpec()]}]),fieldBehaviours:_a([Tm("form-field-events",[Wr(Bb,function(t,e){c.getOpt(t).each(function(t){Wi(t.element(),"background-color",e.event().color())})}),Wr(Db,function(e,n){_v.getField(e).each(function(t){am.setValue(t,n.event().value()),Il.getCurrent(e).each(fm.focus)})}),Wr(_b,function(e,t){_v.getField(e).each(function(t){Il.getCurrent(e).each(fm.focus)})})])])})},Ib=pe.detect().deviceType.isTouch(),Lb=al({schema:[Zo("dom")],name:"label"}),Rb=function(t){return al({name:t+"-edge",overrides:function(o){return o.model.manager.edgeActions[t].fold(function(){return{}},function(n){var t=Pr([Gr(Ht(),n,[o])]),e=Pr([Gr(Tt(),n,[o]),Gr(At(),function(t,e){e.mouseIsDown.get()&&n(t,e)},[o])]);return{events:Ib?t:e}})}})},Nb=Rb("top-left"),Pb=Rb("top"),jb=Rb("top-right"),Ub=Rb("right"),Wb=Rb("bottom-right"),Gb=Rb("bottom"),Xb=Rb("bottom-left"),Yb=[Lb,Rb("left"),Ub,Pb,Gb,Nb,jb,Xb,Wb,rl({name:"thumb",defaults:U({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:Pr([Yr(Ht(),t,"spectrum"),Yr(Vt(),t,"spectrum"),Yr(Et(),t,"spectrum"),Yr(Tt(),t,"spectrum"),Yr(At(),t,"spectrum"),Yr(Dt(),t,"spectrum")])}}}),rl({schema:[xr("mouseIsDown",function(){return Ct(!1)})],name:"spectrum",overrides:function(n){var o=n.model.manager,r=function(e,t){return o.getValueFromEvent(t).map(function(t){return o.setValueFrom(e,n,t)})},t=Pr([Wr(Ht(),r),Wr(Vt(),r)]),e=Pr([Wr(Tt(),r),Wr(At(),function(t,e){n.mouseIsDown.get()&&r(t,e)})]);return{behaviours:_a(Ib?[]:[jd.config({mode:"special",onLeft:function(t){return o.onLeft(t,n)},onRight:function(t){return o.onRight(t,n)},onUp:function(t){return o.onUp(t,n)},onDown:function(t){return o.onDown(t,n)}}),fm.config({})]),events:Ib?t:e}}})],qb=pe.detect().deviceType.isTouch(),Kb=U("slider.change.value"),Jb=function(t){var e=t.event().raw();if(qb){var n=e;return n.touches!==undefined&&1===n.touches.length?P.some(n.touches[0]).map(function(t){return Xa(t.clientX,t.clientY)}):P.none()}var o=e;return o.clientX!==undefined?P.some(o).map(function(t){return Xa(t.clientX,t.clientY)}):P.none()},$b=function(t,e,n,o){return t<e?t:n<t?n:t===e?e-1:Math.max(e,t-o)},Qb=function(t,e,n,o){return n<t?t:t<e?e:t===n?n+1:Math.min(n,t+o)},Zb=function(t,e,n){return Math.max(e,Math.min(n,t))},ty=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.step,a=t.snap,u=t.snapStart,c=t.rounded,s=t.hasMinEdge,l=t.hasMaxEdge,f=t.minBound,d=t.maxBound,m=t.screenRange,h=s?e-1:e,g=l?n+1:n;if(r<f)return h;if(d<r)return g;var v,p,b,y,x,w,z,S=(x=r,w=f,z=d,Math.min(z,Math.max(x,w))-w),k=Zb(S/m*o+e,h,g);return a&&e<=k&&k<=n?(v=k,p=e,b=n,y=i,u.fold(function(){var t=v-p,e=Math.round(t/y)*y;return Zb(p+e,p-1,b+1)},function(t){var e=(v-t)%y,n=Math.round(e/y),o=Math.floor((v-t)/y),r=Math.floor((b-t)/y),i=t+Math.min(r,o+n)*y;return Math.max(t,i)})):c?Math.round(k):k},ey=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.hasMinEdge,a=t.hasMaxEdge,u=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,l=t.centerMaxEdge;return r<e?i?0:s:n<r?a?u:l:(r-e)/o*c},ny=function(t){return t.model.minX},oy=function(t){return t.model.minY},ry=function(t){return t.model.minX-1},iy=function(t){return t.model.minY-1},ay=function(t){return t.model.maxX},uy=function(t){return t.model.maxY},cy=function(t){return t.model.maxX+1},sy=function(t){return t.model.maxY+1},ly=function(t,e,n){return e(t)-n(t)},fy=function(t){return ly(t,ay,ny)},dy=function(t){return ly(t,uy,oy)},my=function(t){return fy(t)/2},hy=function(t){return dy(t)/2},gy=function(t){return t.stepSize},vy=function(t){return t.snapToGrid},py=function(t){return t.snapStart},by=function(t){return t.rounded},yy=function(t,e){return t[e+"-edge"]!==undefined},xy=function(t){return yy(t,"left")},wy=function(t){return yy(t,"right")},zy=function(t){return yy(t,"top")},Sy=function(t){return yy(t,"bottom")},ky=function(t){return t.model.value.get()},Cy=function(t){return{x:U(t)}},Oy=function(t){return{y:U(t)}},My=function(t,e){return{x:U(t),y:U(e)}},Hy=function(t,e){Cr(t,Kb(),{value:e})},Vy="left",Ey=function(t){return t.element().dom().getBoundingClientRect()},Ty=function(t,e){return t[e]},Ay=function(t){var e=Ey(t);return Ty(e,Vy)},By=function(t){var e=Ey(t);return Ty(e,"right")},Dy=function(t){var e=Ey(t);return Ty(e,"top")},_y=function(t){var e=Ey(t);return Ty(e,"bottom")},Fy=function(t){var e=Ey(t);return Ty(e,"width")},Iy=function(t){var e=Ey(t);return Ty(e,"height")},Ly=function(t,e,n){return(t+e)/2-n},Ry=function(t,e){var n=Ey(t),o=Ey(e),r=Ty(n,Vy),i=Ty(n,"right"),a=Ty(o,Vy);return Ly(r,i,a)},Ny=function(t,e){var n=Ey(t),o=Ey(e),r=Ty(n,"top"),i=Ty(n,"bottom"),a=Ty(o,"top");return Ly(r,i,a)},Py=function(t,e){Cr(t,Kb(),{value:e})},jy=function(t){return{x:U(t)}},Uy=function(t,e,n){var o={min:ny(e),max:ay(e),range:fy(e),value:n,step:gy(e),snap:vy(e),snapStart:py(e),rounded:by(e),hasMinEdge:xy(e),hasMaxEdge:wy(e),minBound:Ay(t),maxBound:By(t),screenRange:Fy(t)};return ty(o)},Wy=function(a){return function(t,e){return(n=a,o=t,r=e,i=(0<n?Qb:$b)(ky(r).x(),ny(r),ay(r),gy(r)),Py(o,jy(i)),P.some(i)).map(function(){return!0});var n,o,r,i}},Gy=function(t,e,n,o,r,i){var a,u,c,s,l,f,d,m,h,g=(u=i,c=n,s=o,l=r,f=Fy(a=e),d=s.bind(function(t){return P.some(Ry(t,a))}).getOr(0),m=l.bind(function(t){return P.some(Ry(t,a))}).getOr(f),h={min:ny(u),max:ay(u),range:fy(u),value:c,hasMinEdge:xy(u),hasMaxEdge:wy(u),minBound:Ay(a),minOffset:0,maxBound:By(a),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},ey(h));return Ay(e)-Ay(t)+g},Xy=Wy(-1),Yy=Wy(1),qy=P.none,Ky=P.none,Jy={"top-left":P.none(),top:P.none(),"top-right":P.none(),right:P.some(function(t,e){Hy(t,Cy(cy(e)))}),"bottom-right":P.none(),bottom:P.none(),"bottom-left":P.none(),left:P.some(function(t,e){Hy(t,Cy(ry(e)))})},$y=Object.freeze({setValueFrom:function(t,e,n){var o=Uy(t,e,n),r=jy(o);return Py(t,r),o},setToMin:function(t,e){var n=ny(e);Py(t,jy(n))},setToMax:function(t,e){var n=ay(e);Py(t,jy(n))},findValueOfOffset:Uy,getValueFromEvent:function(t){return Jb(t).map(function(t){return t.left()})},findPositionOfValue:Gy,setPositionFromValue:function(t,e,n,o){var r=ky(n),i=Gy(t,o.getSpectrum(t),r.x(),o.getLeftEdge(t),o.getRightEdge(t),n),a=eu(e.element())/2;Wi(e.element(),"left",i-a+"px")},onLeft:Xy,onRight:Yy,onUp:qy,onDown:Ky,edgeActions:Jy}),Qy=function(t,e){Cr(t,Kb(),{value:e})},Zy=function(t){return{y:U(t)}},tx=function(t,e,n){var o={min:oy(e),max:uy(e),range:dy(e),value:n,step:gy(e),snap:vy(e),snapStart:py(e),rounded:by(e),hasMinEdge:zy(e),hasMaxEdge:Sy(e),minBound:Dy(t),maxBound:_y(t),screenRange:Iy(t)};return ty(o)},ex=function(a){return function(t,e){return(n=a,o=t,r=e,i=(0<n?Qb:$b)(ky(r).y(),oy(r),uy(r),gy(r)),Qy(o,Zy(i)),P.some(i)).map(function(){return!0});var n,o,r,i}},nx=function(t,e,n,o,r,i){var a,u,c,s,l,f,d,m,h,g=(u=i,c=n,s=o,l=r,f=Iy(a=e),d=s.bind(function(t){return P.some(Ny(t,a))}).getOr(0),m=l.bind(function(t){return P.some(Ny(t,a))}).getOr(f),h={min:oy(u),max:uy(u),range:dy(u),value:c,hasMinEdge:zy(u),hasMaxEdge:Sy(u),minBound:Dy(a),minOffset:0,maxBound:_y(a),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},ey(h));return Dy(e)-Dy(t)+g},ox=P.none,rx=P.none,ix=ex(-1),ax=ex(1),ux={"top-left":P.none(),top:P.some(function(t,e){Hy(t,Oy(iy(e)))}),"top-right":P.none(),right:P.none(),"bottom-right":P.none(),bottom:P.some(function(t,e){Hy(t,Oy(sy(e)))}),"bottom-left":P.none(),left:P.none()},cx=Object.freeze({setValueFrom:function(t,e,n){var o=tx(t,e,n),r=Zy(o);return Qy(t,r),o},setToMin:function(t,e){var n=oy(e);Qy(t,Zy(n))},setToMax:function(t,e){var n=uy(e);Qy(t,Zy(n))},findValueOfOffset:tx,getValueFromEvent:function(t){return Jb(t).map(function(t){return t.top()})},findPositionOfValue:nx,setPositionFromValue:function(t,e,n,o){var r=ky(n),i=nx(t,o.getSpectrum(t),r.y(),o.getTopEdge(t),o.getBottomEdge(t),n),a=ru(e.element())/2;Wi(e.element(),"top",i-a+"px")},onLeft:ox,onRight:rx,onUp:ix,onDown:ax,edgeActions:ux}),sx=function(t,e){Cr(t,Kb(),{value:e})},lx=function(t,e){return{x:U(t),y:U(e)}},fx=function(s,l){return function(t,e){return(n=s,o=l,r=t,i=e,a=0<n?Qb:$b,u=o?ky(i).x():a(ky(i).x(),ny(i),ay(i),gy(i)),c=o?a(ky(i).y(),oy(i),uy(i),gy(i)):ky(i).y(),sx(r,lx(u,c)),P.some(u)).map(function(){return!0});var n,o,r,i,a,u,c}},dx=fx(-1,!1),mx=fx(1,!1),hx=fx(-1,!0),gx=fx(1,!0),vx={"top-left":P.some(function(t,e){Hy(t,My(ry(e),iy(e)))}),top:P.some(function(t,e){Hy(t,My(my(e),iy(e)))}),"top-right":P.some(function(t,e){Hy(t,My(cy(e),iy(e)))}),right:P.some(function(t,e){Hy(t,My(cy(e),hy(e)))}),"bottom-right":P.some(function(t,e){Hy(t,My(cy(e),sy(e)))}),bottom:P.some(function(t,e){Hy(t,My(my(e),sy(e)))}),"bottom-left":P.some(function(t,e){Hy(t,My(ry(e),sy(e)))}),left:P.some(function(t,e){Hy(t,My(ry(e),hy(e)))})},px=Object.freeze({setValueFrom:function(t,e,n){var o=Uy(t,e,n.left()),r=tx(t,e,n.top()),i=lx(o,r);return sx(t,i),i},setToMin:function(t,e){var n=ny(e),o=oy(e);sx(t,lx(n,o))},setToMax:function(t,e){var n=ay(e),o=uy(e);sx(t,lx(n,o))},getValueFromEvent:function(t){return Jb(t)},setPositionFromValue:function(t,e,n,o){var r=ky(n),i=Gy(t,o.getSpectrum(t),r.x(),o.getLeftEdge(t),o.getRightEdge(t),n),a=nx(t,o.getSpectrum(t),r.y(),o.getTopEdge(t),o.getBottomEdge(t),n),u=eu(e.element())/2,c=ru(e.element())/2;Wi(e.element(),"left",i-u+"px"),Wi(e.element(),"top",a-c+"px")},onLeft:dx,onRight:mx,onUp:hx,onDown:gx,edgeActions:vx}),bx=pe.detect().deviceType.isTouch(),yx=[dr("stepSize",1),dr("onChange",N),dr("onChoose",N),dr("onInit",N),dr("onDragStart",N),dr("onDragEnd",N),dr("snapToGrid",!1),dr("rounded",!0),ur("snapStart"),tr("model",Go("mode",{x:[dr("minX",0),dr("maxX",100),xr("value",function(t){return Ct(t.mode.minX)}),Zo("getInitialValue"),Ma("manager",$y)],y:[dr("minY",0),dr("maxY",100),xr("value",function(t){return Ct(t.mode.minY)}),Zo("getInitialValue"),Ma("manager",cx)],xy:[dr("minX",0),dr("maxX",100),dr("minY",0),dr("maxY",100),xr("value",function(t){return Ct({x:U(t.mode.minX),y:U(t.mode.minY)})}),Zo("getInitialValue"),Ma("manager",px)]})),Es("sliderBehaviours",[jd,am])].concat(bx?[]:[xr("mouseIsDown",function(){return Ct(!1)})]),xx=pe.detect().deviceType.isTouch(),wx=Bl({name:"Slider",configFields:yx,partFields:Yb,factory:function(i,t,e,n){var a=function(t){return yl(t,i,"thumb")},u=function(t){return yl(t,i,"spectrum")},o=function(t){return bl(t,i,"left-edge")},r=function(t){return bl(t,i,"right-edge")},c=function(t){return bl(t,i,"top-edge")},s=function(t){return bl(t,i,"bottom-edge")},l=i.model,f=l.manager,d=function(t,e){f.setPositionFromValue(t,e,i,{getLeftEdge:o,getRightEdge:r,getTopEdge:c,getBottomEdge:s,getSpectrum:u})},m=function(t,e){l.value.set(e);var n=a(t);return d(t,n),i.onChange(t,n,e),P.some(!0)},h=[Wr(Ht(),function(t,e){i.onDragStart(t,a(t))}),Wr(Et(),function(t,e){i.onDragEnd(t,a(t))})],g=[Wr(Tt(),function(t,e){e.stop(),i.onDragStart(t,a(t)),i.mouseIsDown.set(!0)}),Wr(Dt(),function(t,e){i.onDragEnd(t,a(t))})],v=xx?h:g;return{uid:i.uid,dom:i.dom,components:t,behaviours:As(i.sliderBehaviours,R([xx?[]:[jd.config({mode:"special",focusIn:function(t){return bl(t,i,"spectrum").map(jd.focusIn).map(U(!0))}})],[am.config({store:{mode:"manual",getValue:function(t){return l.value.get()}}}),Ua.config({channels:{"mouse.released":{onReceive:function(n,t){var e=i.mouseIsDown.get();i.mouseIsDown.set(!1),e&&bl(n,i,"thumb").each(function(t){var e=l.value.get();i.onChoose(n,t,e)})}}}})]])),events:Pr([Wr(Kb(),function(t,e){m(t,e.event().value())}),Qr(function(t,e){var n=l.getInitialValue();l.value.set(n);var o=a(t);d(t,o);var r=u(t);i.onInit(t,o,r,l.value.get())})].concat(v)),apis:{resetToMin:function(t){f.setToMin(t,i)},resetToMax:function(t){f.setToMax(t,i)},changeValue:m,refresh:d},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(t,e){t.resetToMin(e)},resetToMax:function(t,e){t.resetToMax(e)},refresh:function(t,e){t.refresh(e)}}}),zx=U(Un("rgb-hex-update")),Sx=U(Un("slider-update")),kx=U(Un("palette-update")),Cx=function(t,o){var r=wx.parts().spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[o("sv-palette-spectrum")]}}),i=wx.parts().thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[o("sv-palette-thumb")],innerHtml:"<div class="+o("sv-palette-inner-thumb")+' role="presentation"></div>'}}),a=function(t,e){var n=t.width,o=t.height,r=t.getContext("2d");r.fillStyle=e,r.fillRect(0,0,n,o);var i=r.createLinearGradient(0,0,n,0);i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=i,r.fillRect(0,0,n,o);var a=r.createLinearGradient(0,0,0,o);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=a,r.fillRect(0,0,n,o)};return Al({factory:function(t){var e=U({x:U(0),y:U(0)}),n=_a([Il.config({find:P.some}),fm.config({})]);return wx.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[o("sv-palette")]},model:{mode:"xy",getInitialValue:e},rounded:!1,components:[r,i],onChange:function(t,e,n){Cr(t,kx(),{value:n})},onInit:function(t,e,n,o){a(n.element().dom(),ub(cb()))},sliderBehaviours:n})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(t,e,n){var o,r;o=n,r=e.components()[0].element().dom(),a(r,ub(o))}},extraApis:{}})},Ox=function(t,e){var n=wx.parts().spectrum({dom:{tag:"div",classes:[e("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=wx.parts().thumb({dom:{tag:"div",classes:[e("hue-slider-thumb")],attributes:{role:"presentation"}}});return wx.sketch({dom:{tag:"div",classes:[e("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:U({y:U(0)})},components:[n,o],sliderBehaviours:_a([fm.config({})]),onChange:function(t,e,n){Cr(t,Sx(),{value:n})}})},Mx=[Es("formBehaviours",[am])],Hx=function(t){return"<alloy.field."+t+">"},Vx=function(o,t,e){return{uid:o.uid,dom:o.dom,components:t,behaviours:As(o.formBehaviours,[am.config({store:{mode:"manual",getValue:function(t){var e=wl(t,o);return et(e,function(t,e){return t().bind(function(t){var e,n=Il.getCurrent(t);return e="missing current",n.fold(function(){return ft.error(e)},ft.value)}).map(am.getValue)})},setValue:function(n,t){tt(t,function(e,t){bl(n,o,t).each(function(t){Il.getCurrent(t).each(function(t){am.setValue(t,e)})})})}}})]),apis:{getField:function(t,e){return bl(t,o,e).bind(Il.getCurrent)}}}},Ex={getField:bi(function(t,e,n){return t.getField(e,n)}),sketch:function(t){var n,e=(n=[],{field:function(t,e){return n.push(t),ml("form",Hx(t),e)},record:function(){return n}}),o=t(e),r=e.record(),i=E(r,function(t){return rl({name:t,pname:Hx(t)})});return Hl("form",Mx,i,Vx,o)}},Tx=Un("valid-input"),Ax=Un("invalid-input"),Bx=Un("validating-input"),Dx="colorcustom.rgb.",_x=function(m,h,g,v){var p=function(t,e,n,o,r){var i,a,u=m(Dx+"range"),c=[_v.parts().label({dom:{tag:"label",innerHtml:n,attributes:{"aria-label":o}}}),_v.parts().field({data:r,factory:Op,inputAttributes:Gn({type:"text"},"hex"===e?{"aria-live":"polite"}:{}),inputClasses:[h("textfield")],inputBehaviours:_a([(i=e,a=t,Np.config({invalidClass:h("invalid"),notify:{onValidate:function(t){Cr(t,Bx,{type:i})},onValid:function(t){Cr(t,Tx,{type:i,value:am.getValue(t)})},onInvalid:function(t){Cr(t,Ax,{type:i,value:am.getValue(t)})}},validator:{validate:function(t){var e=am.getValue(t),n=a(e)?ft.value(!0):ft.error(m("aria.input.invalid"));return Yv.pure(n)},validateOnLoad:!1}})),Up.config({})]),onSetValue:function(t){Np.isInvalid(t)&&Np.run(t).get(N)}})],s="hex"!==e?[_v.parts()["aria-descriptor"]({text:u})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:c.concat(s)}},b=function(t,e){var n=e.red(),o=e.green(),r=e.blue();am.setValue(t,{red:n,green:o,blue:r})},y=Km({dom:{tag:"div",classes:[h("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),x=function(t,e){y.getOpt(t).each(function(t){Wi(t.element(),"background-color","#"+e.value())})};return Al({factory:function(t){var n={red:U(Ct(P.some(255))),green:U(Ct(P.some(255))),blue:U(Ct(P.some(255))),hex:U(Ct(P.some("ffffff")))},o=function(t){return n[t]().get()},i=function(t,e){n[t]().set(e)},r=function(t){var e=t.red(),n=t.green(),o=t.blue();i("red",P.some(e)),i("green",P.some(n)),i("blue",P.some(o))},e=function(t,e){var n=e.event();"hex"!==n.type()?i(n.type(),P.none()):v(t)},a=function(r,t,e){var n=parseInt(e,10);i(t,P.some(n)),o("red").bind(function(n){return o("green").bind(function(e){return o("blue").map(function(t){return nb(n,e,t,1)})})}).each(function(t){var e,n,o=(e=r,n=Jp(t),Ex.getField(e,"hex").each(function(t){fm.isFocused(t)||am.setValue(e,{hex:n.value()})}),n);x(r,o)})},u=function(t,e){var n=e.event();"hex"===n.type()?function(t,e){g(t);var n=Wp(e);i("hex",P.some(e));var o=ib(n);b(t,o),r(o),Cr(t,zx(),{hex:n}),x(t,n)}(t,n.value()):a(t,n.type(),n.value())},c=function(t){return{label:m(Dx+t+".label"),description:m(Dx+t+".description")}},s=c("red"),l=c("green"),f=c("blue"),d=c("hex");return gt(Ex.sketch(function(t){return{dom:{tag:"form",classes:[h("rgb-form")],attributes:{"aria-label":m("aria.color.picker")}},components:[t.field("red",_v.sketch(p(ob,"red",s.label,s.description,255))),t.field("green",_v.sketch(p(ob,"green",l.label,l.description,255))),t.field("blue",_v.sketch(p(ob,"blue",f.label,f.description,255))),t.field("hex",_v.sketch(p(Yp,"hex",d.label,d.description,"ffffff"))),y.asSpec()],formBehaviours:_a([Np.config({invalidClass:h("form-invalid")}),Tm("rgb-form-events",[Wr(Tx,u),Wr(Ax,e),Wr(Bx,e)])])}}),{apis:{updateHex:function(t,e){var n,o;am.setValue(t,{hex:e.value()}),n=t,o=ib(e),b(n,o),r(o),x(t,e)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,e,n){t.updateHex(e,n)}},extraApis:{}})},Fx=function(t,e,n){return{hue:U(t),saturation:U(e),value:U(n)}},Ix=function(c,s){return Al({name:"ColourPicker",configFields:[dr("onValidHex",N),dr("onInvalidHex",N),sr("formChangeEvent")],factory:function(t){var u,p,n=_x(c,s,t.onValidHex,t.onInvalidHex),o=Cx(c,s),b={paletteRgba:U(Ct(cb()))},e=Km(o.sketch({})),r=Km(n.sketch({})),i=function(t,n){e.getOpt(t).each(function(t){var e=ib(n);b.paletteRgba().set(e),o.setRgba(t,e)})},a=function(t,e){r.getOpt(t).each(function(t){n.updateHex(t,e)})},y=function(e,n,t){T(t,function(t){t(e,n)})};return{uid:t.uid,dom:t.dom,components:[e.asSpec(),Ox(c,s),r.asSpec()],behaviours:_a([Tm("colour-picker-events",[Wr(kx(),(p=[a],function(t,e){var n,o,r,i,a,u,c,s,l,f=e.event().value(),d=b.paletteRgba().get(),m=(c=a=0,o=(n=d).red()/255,r=n.green()/255,i=n.blue()/255,(s=Math.min(o,Math.min(r,i)))===(l=Math.max(o,Math.max(r,i)))?Fx(0,0,100*(c=s)):(a=60*((a=o===s?3:i===s?1:5)-(o===s?r-i:i===s?o-r:i-o)/(l-s)),u=(l-s)/l,c=l,Fx(Math.round(a),Math.round(100*u),Math.round(100*c)))),h=Fx(m.hue(),f.x(),100-f.y()),g=rb(h),v=Jp(g);y(t,v,p)})),Wr(Sx(),(u=[i,a],function(t,e){var n,o,r,i=e.event().value(),a=(n=i.y(),o=Fx(360*(100-n/100),100,100),r=rb(o),Jp(r));y(t,a,u)}))]),Il.config({find:function(t){return r.getOpt(t)}}),jd.config({mode:"acyclic"})])}}})},Lx=function(){return Il.config({find:P.some})},Rx=function(t){return Il.config({find:t.getOpt})},Nx=function(t){return Il.config({find:function(e){return sn(e.element(),t).bind(function(t){return e.getSystem().getByDom(t).toOption()})}})},Px={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},jx=function(t){return Px[t]},Ux=Vo([dr("preprocess",d),dr("postprocess",d)]),Wx=function(t,e,n){return am.config(gt({store:{mode:"manual",getValue:e,setValue:n}},t.map(function(t){return{store:{initialValue:t}}}).getOr({})))},Gx=function(t,e,n){return Wx(t,function(t){return e(t.element())},function(t,e){return n(t.element(),e)})},Xx=function(r,t){var i=Uo("RepresentingConfigs.memento processors",Ux,t);return am.config({store:{mode:"manual",getValue:function(t){var e=r.get(t),n=am.getValue(e);return i.postprocess(n)},setValue:function(t,e){var n=i.preprocess(e),o=r.get(t);am.setValue(o,n)}}})},Yx=Wx,qx=function(t){return Gx(t,pn,bn)},Kx=function(t){return am.config({store:{mode:"memory",initialValue:t}})},Jx=function(r,e){var n=function(t,e){e.stop()},o=function(t){return function(e,n){T(t,function(t){t(e,n)})}},i=function(t,e){if(!Ih.isDisabled(t)){var n=e.event().raw();u(t,n.dataTransfer.files)}},a=function(t,e){var n=e.event().raw().target.files;u(t,n)},u=function(t,e){var n,o;am.setValue(t,(n=e,o=new RegExp("("+".jpg,.jpeg,.png,.gif".split(/\s*,\s*/).join("|")+")$","i"),A($(n),function(t){return o.test(t.name)}))),Cr(t,kv,{name:r.name})},c=Km({dom:{tag:"input",attributes:{type:"file",multiple:"multiple"},styles:{display:"none"}},behaviours:_a([Tm("input-file-events",[Kr(jt())])])}),t=r.label.map(function(t){return yp(t,e)}),s=_v.parts().field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:_a([Kx([]),Lx(),Ih.config({}),km.config({toggleClass:"dragenter",toggleOnExecute:!1}),Tm("dropzone-events",[Wr("dragenter",o([n,km.toggle])),Wr("dragleave",o([n,km.toggle])),Wr("dragover",n),Wr("drop",o([n,i])),Wr(Pt(),a)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:e.translate("Drop an image here")}},qm.sketch({dom:{tag:"button",innerHtml:e.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[c.asSpec()],action:function(t){c.get(t).element().dom().click()},buttonBehaviours:_a([Up.config({})])})]}]}}}});return gp(t,s,["tox-form__group--stretched"])},$x=Un("alloy-fake-before-tabstop"),Qx=Un("alloy-fake-after-tabstop"),Zx=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:_a([fm.config({ignore:!0}),Up.config({})])}},tw=function(t,e){Cr(t,Lt(),{raw:{which:9,shiftKey:e}})},ew=function(t){return Qg(t,["."+$x,"."+Qx].join(","),U(!1))},nw=function(t,e){var n=e.element();Li(n,$x)?tw(t,!0):Li(n,Qx)&&tw(t,!1)},ow=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[Zx([$x]),t,Zx([Qx])],behaviours:_a([Nx(1)])}},rw=!(pe.detect().browser.isIE()||pe.detect().browser.isEdge()),iw=function(t,e){var o,r,n=rw&&t.sandboxed,i=Gn({},t.label.map(function(t){return{title:t}}).getOr({}),n?{sandbox:"allow-scripts"}:{}),a=(o=n,r=Ct(""),{getValue:function(t){return r.get()},setValue:function(t,e){if(o)Cn(t.element(),"src","data:text/html;charset=utf-8,"+encodeURIComponent(e));else{Cn(t.element(),"src","javascript:''");var n=t.element().dom().contentWindow.document;n.open(),n.write(e),n.close()}r.set(e)}}),u=t.label.map(function(t){return yp(t,e)}),c=_v.parts().field({factory:{sketch:function(t){return ow({uid:t.uid,dom:{tag:"iframe",attributes:i},behaviours:_a([Up.config({}),fm.config({}),Yx(P.none(),a.getValue,a.setValue)])})}}});return gp(u,c,["tox-form__group--stretched"])};function aw(t,e){return cw(document.createElement("canvas"),t,e)}function uw(t){return t.getContext("2d")}function cw(t,e,n){return t.width=e,t.height=n,t}var sw={create:aw,clone:function sV(t){var e;return uw(e=aw(t.width,t.height)).drawImage(t,0,0),e},resize:cw,get2dContext:uw,get3dContext:function lV(t){var e=null;try{e=t.getContext("webgl")||t.getContext("experimental-webgl")}catch(n){}return e||(e=null),e}},lw={getWidth:function fV(t){return t.naturalWidth||t.width},getHeight:function dV(t){return t.naturalHeight||t.height}},fw=window.Promise?window.Promise:function(){var t=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(t,o(r,this),o(a,this))},e=t.immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){setTimeout(t,1)};function o(t,e){return function(){t.apply(e,arguments)}}var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(o){var r=this;null!==this._state?e(function(){var t=r._state?o.onFulfilled:o.onRejected;if(null!==t){var e;try{e=t(r._value)}catch(n){return void o.reject(n)}o.resolve(e)}else(r._state?o.resolve:o.reject)(r._value)}):this._deferreds.push(o)}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void s(o(e,t),o(r,this),o(a,this))}this._state=!0,this._value=t,u.call(this)}catch(n){a.call(this,n)}}function a(t){this._state=!1,this._value=t,u.call(this)}function u(){for(var t=0,e=this._deferreds.length;t<e;t++)i.call(this,this._deferreds[t]);this._deferreds=null}function c(t,e,n,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=o}function s(t,e,n){var o=!1;try{t(function(t){o||(o=!0,e(t))},function(t){o||(o=!0,n(t))})}catch(r){if(o)return;o=!0,n(r)}}return t.prototype["catch"]=function(t){return this.then(null,t)},t.prototype.then=function(n,o){var r=this;return new t(function(t,e){i.call(r,new c(n,o,t,e))})},t.all=function(){var c=Array.prototype.slice.call(1===arguments.length&&n(arguments[0])?arguments[0]:arguments);return new t(function(r,i){if(0===c.length)return r([]);var a=c.length;function u(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){u(e,t)},i)}c[e]=t,0==--a&&r(c)}catch(o){i(o)}}for(var t=0;t<c.length;t++)u(t,c[t])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(n){return new t(function(t,e){e(n)})},t.race=function(r){return new t(function(t,e){for(var n=0,o=r.length;n<o;n++)r[n].then(t,e)})},t}();function dw(){return new(Ye.getOrDie("FileReader"))}var mw={atob:function(t){return Ye.getOrDie("atob")(t)},requestAnimationFrame:function(t){Ye.getOrDie("requestAnimationFrame")(t)}};function hw(u){return new fw(function(t,e){var n=URL.createObjectURL(u),o=new Image,r=function(){o.removeEventListener("load",i),o.removeEventListener("error",a)};function i(){r(),t(o)}function a(){r(),e("Unable to load data of type "+u.type+": "+n)}o.addEventListener("load",i),o.addEventListener("error",a),o.src=n,o.complete&&i()})}function gw(o){return new fw(function(t,n){var e=new XMLHttpRequest;e.open("GET",o,!0),e.responseType="blob",e.onload=function(){200==this.status&&t(this.response)},e.onerror=function(){var t,e=this;n(0===this.status?((t=new Error("No access to download image")).code=18,t.name="SecurityError",t):new Error("Error "+e.status+" downloading image"))},e.send()})}function vw(t){var e=t.split(","),n=/data:([^;]+)/.exec(e[0]);if(!n)return P.none();for(var o,r=n[1],i=e[1],a=mw.atob(i),u=a.length,c=Math.ceil(u/1024),s=new Array(c),l=0;l<c;++l){for(var f=1024*l,d=Math.min(f+1024,u),m=new Array(d-f),h=f,g=0;h<d;++g,++h)m[g]=a[h].charCodeAt(0);s[l]=(o=m,new(Ye.getOrDie("Uint8Array"))(o))}return P.some(function v(t,e){return new(Ye.getOrDie("Blob"))(t,e)}(s,{type:r}))}function pw(n){return new fw(function(t,e){vw(n).fold(function(){e("uri is not base64: "+n)},t)})}function bw(n){return new fw(function(t){var e=dw();e.onloadend=function(){t(e.result)},e.readAsDataURL(n)})}var yw={blobToImage:hw,imageToBlob:function mV(t){var e=t.src;return 0===e.indexOf("data:")?pw(e):gw(e)},blobToArrayBuffer:function hV(n){return new fw(function(t){var e=dw();e.onloadend=function(){t(e.result)},e.readAsArrayBuffer(n)})},blobToDataUri:bw,blobToBase64:function gV(t){return bw(t).then(function(t){return t.split(",")[1]})},dataUriToBlobSync:vw,canvasToBlob:function vV(t,n,o){return n=n||"image/png",HTMLCanvasElement.prototype.toBlob?new fw(function(e){t.toBlob(function(t){e(t)},n,o)}):pw(t.toDataURL(n,o))},canvasToDataURL:function pV(t,e,n){return e=e||"image/png",t.then(function(t){return t.toDataURL(e,n)})},blobToCanvas:function bV(t){return hw(t).then(function(t){var e;return function n(t){URL.revokeObjectURL(t.src)}(t),e=sw.create(lw.getWidth(t),lw.getHeight(t)),sw.get2dContext(e).drawImage(t,0,0),e})},uriToBlob:function yV(t){return 0===t.indexOf("blob:")?gw(t):0===t.indexOf("data:")?pw(t):null}};function xw(t,e,n){var o=e.type;function r(e,n){return t.then(function(t){return yw.canvasToDataURL(t,e,n)})}return{getType:U(o),toBlob:function i(){return fw.resolve(e)},toDataURL:function a(){return n},toBase64:function u(){return n.split(",")[1]},toAdjustedBlob:function c(e,n){return t.then(function(t){return yw.canvasToBlob(t,e,n)})},toAdjustedDataURL:r,toAdjustedBase64:function s(t,e){return r(t,e).then(function(t){return t.split(",")[1]})},toCanvas:function l(){return t.then(sw.clone)}}}function ww(e){return yw.blobToDataUri(e).then(function(t){return xw(yw.blobToCanvas(e),e,t)})}var zw={fromBlob:ww,fromCanvas:function xV(e,t){return yw.canvasToBlob(e,t).then(function(t){return xw(fw.resolve(e),t,e.toDataURL())})},fromImage:function wV(t){return yw.imageToBlob(t).then(function(t){return ww(t)})},fromBlobAndUrlSync:function(t,e){return xw(yw.blobToCanvas(t),t,e)}},Sw=function(t){return zw.fromBlob(t)};function kw(t,e,n){return n<(t=parseFloat(t))?t=n:t<e&&(t=e),t}var Cw=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];function Ow(t,e){var n,o,r,i,a=[],u=new Array(10);for(n=0;n<5;n++){for(o=0;o<5;o++)a[o]=e[o+5*n];for(o=0;o<5;o++){for(r=i=0;r<5;r++)i+=t[o+5*r]*a[r];u[o+5*n]=i}}return u}function Mw(t,n){return n=kw(n,0,1),t.map(function(t,e){return e%6==0?t=1-(1-t)*n:t*=n,kw(t,0,1)})}var Hw={identity:function zV(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},adjust:Mw,multiply:Ow,adjustContrast:function SV(t,e){var n;return e=kw(e,-1,1),Ow(t,[(n=(e*=100)<0?127+e/100*127:127*(n=0==(n=e%1)?Cw[e]:Cw[Math.floor(e)]*(1-n)+Cw[Math.floor(e)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])},adjustBrightness:function kV(t,e){return Ow(t,[1,0,0,0,e=kw(255*e,-255,255),0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])},adjustSaturation:function CV(t,e){var n;return Ow(t,[.3086*(1-(n=1+(0<(e=kw(e,-1,1))?3*e:e)))+n,.6094*(1-n),.082*(1-n),0,0,.3086*(1-n),.6094*(1-n)+n,.082*(1-n),0,0,.3086*(1-n),.6094*(1-n),.082*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])},adjustHue:function OV(t,e){var n,o;return e=kw(e,-180,180)/180*Math.PI,Ow(t,[.213+.787*(n=Math.cos(e))+-.213*(o=Math.sin(e)),.715+-.715*n+-.715*o,.072+-.072*n+.928*o,0,0,.213+-.213*n+.143*o,.715+n*(1-.715)+.14*o,.072+-.072*n+-.283*o,0,0,.213+-.213*n+-.787*o,.715+-.715*n+.715*o,.072+.928*n+.072*o,0,0,0,0,0,1,0,0,0,0,0,1])},adjustColors:function MV(t,e,n,o){return Ow(t,[e=kw(e,0,2),0,0,0,0,0,n=kw(n,0,2),0,0,0,0,0,o=kw(o,0,2),0,0,0,0,0,1,0,0,0,0,0,1])},adjustSepia:function HV(t,e){return Ow(t,Mw([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],e=kw(e,0,1)))},adjustGrayscale:function VV(t,e){return Ow(t,Mw([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],e=kw(e,0,1)))}};function Vw(e,n){return e.toCanvas().then(function(t){return function i(t,e,n){var o,r=sw.get2dContext(t);return o=function H(t,e){var n,o,r,i,a,u=t.data,c=e[0],s=e[1],l=e[2],f=e[3],d=e[4],m=e[5],h=e[6],g=e[7],v=e[8],p=e[9],b=e[10],y=e[11],x=e[12],w=e[13],z=e[14],S=e[15],k=e[16],C=e[17],O=e[18],M=e[19];for(a=0;a<u.length;a+=4)n=u[a],o=u[a+1],r=u[a+2],i=u[a+3],u[a]=n*c+o*s+r*l+i*f+d,u[a+1]=n*m+o*h+r*g+i*v+p,u[a+2]=n*b+o*y+r*x+i*w+z,u[a+3]=n*S+o*k+r*C+i*O+M;return t}(r.getImageData(0,0,t.width,t.height),n),r.putImageData(o,0,0),zw.fromCanvas(t,e)}(t,e.getType(),n)})}function Ew(e,n){return e.toCanvas().then(function(t){return function a(t,e,n){var o,r,i=sw.get2dContext(t);return o=i.getImageData(0,0,t.width,t.height),r=i.getImageData(0,0,t.width,t.height),r=function w(t,e,n){var o,r,i,a,u,c,s,l,f,d,m,h,g,v,p,b,y;function x(t,e,n){return n<t?t=n:t<e&&(t=e),t}for(i=Math.round(Math.sqrt(n.length)),a=Math.floor(i/2),o=t.data,r=e.data,b=t.width,y=t.height,c=0;c<y;c++)for(u=0;u<b;u++){for(s=l=f=0,m=0;m<i;m++)for(d=0;d<i;d++)h=x(u+d-a,0,b-1),g=x(c+m-a,0,y-1),v=4*(g*b+h),p=n[m*i+d],s+=o[v]*p,l+=o[v+1]*p,f+=o[v+2]*p;r[v=4*(c*b+u)]=x(s,0,255),r[v+1]=x(l,0,255),r[v+2]=x(f,0,255)}return e}(o,r,n),i.putImageData(r,0,0),zw.fromCanvas(t,e)}(t,e.getType(),n)})}function Tw(c){return function(e,n){return e.toCanvas().then(function(t){return function(t,e,n){var o,r,i=sw.get2dContext(t),a=new Array(256);for(r=0;r<a.length;r++)a[r]=c(r,n);return o=function u(t,e){var n,o=t.data;for(n=0;n<o.length;n+=4)o[n]=e[o[n]],o[n+1]=e[o[n+1]],o[n+2]=e[o[n+2]];return t}(i.getImageData(0,0,t.width,t.height),a),i.putImageData(o,0,0),zw.fromCanvas(t,e)}(t,e.getType(),n)})}}function Aw(n){return function(t,e){return Vw(t,n(Hw.identity(),e))}}function Bw(e){return function(t){return Ew(t,e)}}var Dw={invert:function EV(e){return function(t){return Vw(t,e)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:Aw(Hw.adjustBrightness),hue:Aw(Hw.adjustHue),saturate:Aw(Hw.adjustSaturation),contrast:Aw(Hw.adjustContrast),grayscale:Aw(Hw.adjustGrayscale),sepia:Aw(Hw.adjustSepia),colorize:function(t,e,n,o){return Vw(t,Hw.adjustColors(Hw.identity(),e,n,o))},sharpen:Bw([0,-1,0,-1,5,-1,0,-1,0]),emboss:Bw([-2,-1,0,-1,1,1,0,1,2]),gamma:Tw(function(t,e){return 255*Math.pow(t/255,1-e)}),exposure:Tw(function(t,e){return 255*(1-Math.exp(-t/255*e))}),colorFilter:Vw,convoluteFilter:Ew},_w={scale:function TV(t,e,n){var o=lw.getWidth(t),r=lw.getHeight(t),i=e/o,a=n/r,u=!1;(i<.5||2<i)&&(i=i<.5?.5:2,u=!0),(a<.5||2<a)&&(a=a<.5?.5:2,u=!0);var c=function l(u,c,s){return new fw(function(t){var e=lw.getWidth(u),n=lw.getHeight(u),o=Math.floor(e*c),r=Math.floor(n*s),i=sw.create(o,r),a=sw.get2dContext(i);a.drawImage(u,0,0,e,n,0,0,o,r),t(i)})}(t,i,a);return u?c.then(function(t){return TV(t,e,n)}):c}},Fw={rotate:function AV(e,n){return e.toCanvas().then(function(t){return function u(t,e,n){var o=sw.create(t.width,t.height),r=sw.get2dContext(o),i=0,a=0;return 90!=(n=n<0?360+n:n)&&270!=n||sw.resize(o,o.height,o.width),90!=n&&180!=n||(i=o.width),270!=n&&180!=n||(a=o.height),r.translate(i,a),r.rotate(n*Math.PI/180),r.drawImage(t,0,0),zw.fromCanvas(o,e)}(t,e.getType(),n)})},flip:function BV(e,n){return e.toCanvas().then(function(t){return function i(t,e,n){var o=sw.create(t.width,t.height),r=sw.get2dContext(o);return"v"==n?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0)),zw.fromCanvas(o,e)}(t,e.getType(),n)})},crop:function DV(e,n,o,r,i){return e.toCanvas().then(function(t){return function u(t,e,n,o,r,i){var a=sw.create(r,i);return sw.get2dContext(a).drawImage(t,-n,-o),zw.fromCanvas(a,e)}(t,e.getType(),n,o,r,i)})},resize:function _V(e,n,o){return e.toCanvas().then(function(t){return _w.scale(t,n,o).then(function(t){return zw.fromCanvas(t,e.getType())})})}},Iw=(function(){function t(t){this.littleEndian=!1,this._dv=new DataView(t)}t.prototype.readByteAt=function(t){return this._dv.getUint8(t)},t.prototype.read=function(t,e){if(t+e>this.length())return null;for(var n=this.littleEndian?0:-8*(e-1),o=0,r=0;o<e;o++)r|=this.readByteAt(t+o)<<Math.abs(n+8*o);return r},t.prototype.BYTE=function(t){return this.read(t,1)},t.prototype.SHORT=function(t){return this.read(t,2)},t.prototype.LONG=function(t){return this.read(t,4)},t.prototype.SLONG=function(t){var e=this.read(t,4);return 2147483647<e?e-4294967296:e},t.prototype.CHAR=function(t){return String.fromCharCode(this.read(t,1))},t.prototype.STRING=function(t,e){return this.asArray("CHAR",t,e).join("")},t.prototype.SEGMENT=function(t,e){var n=this._dv.buffer;switch(arguments.length){case 2:return n.slice(t,t+e);case 1:return n.slice(t);default:return n}},t.prototype.asArray=function(t,e,n){for(var o=[],r=0;r<n;r++)o[r]=this[t](e+r);return o},t.prototype.length=function(){return this._dv?this._dv.byteLength:0}}(),function(t,e){return Fw.rotate(t,e)}),Lw=function(t){return Dw.invert(t)},Rw=function(t){return Dw.sharpen(t)},Nw=function(t,e){return Dw.brightness(t,e)},Pw=function(t,e){return Dw.contrast(t,e)},jw=function(t,e,n,o){return Dw.colorize(t,e,n,o)},Uw=function(t,e){return Dw.gamma(t,e)},Ww=function(t,e){return Fw.flip(t,e)},Gw=function(t,e,n,o,r){return Fw.crop(t,e,n,o,r)},Xw=function(t,e,n){return Fw.resize(t,e,n)},Yw=Iw,qw=function(t,e){return Gn({dom:{tag:"span",innerHtml:t,classes:["tox-icon","tox-tbtn__icon-wrap"]}},e)},Kw=function(t,e){return qw(Qm(t,e),{})},Jw=function(t,e){return qw(Qm(t,e),{behaviours:_a([Yd.config({})])})},$w=function(t,e,n){return{dom:{tag:"span",innerHtml:n.translate(t),classes:[e+"__select-label"]},behaviours:_a([Yd.config({})])}},Qw=function(t,e,n,o,r){void 0===n&&(n=[]);var i={buttonBehaviours:_a([rg(t.disabled),Up.config({}),Tm("button press",[Ur("click"),Ur("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},action:e},a=gt(i,{dom:o}),u=gt(a,{components:r});return qm.sketch(u)},Zw=function(t,e,n,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map(function(t){return{"aria-label":n.translate(t),title:n.translate(t)}}).getOr({})},i=t.icon.map(function(t){return Kw(t,n.icons)}),a=mg([i]);return Qw(t,e,o,r,a)},tz=function(t,e,n,o){void 0===o&&(o=[]);var r=n.translate(t.text),i=t.icon?t.icon.map(function(t){return Kw(t,n.icons)}):P.none(),a=i.isSome()?mg([i]):[],u=i.isSome()?{}:{innerHtml:r},c=(t.primary?["tox-button"]:["tox-button","tox-button--secondary"]).concat(i.isSome()?["tox-button--icon"]:[]),s=Gn({tag:"button",classes:c},u,{attributes:{title:r}});return Qw(t,e,o,s,a)},ez=function(e,n){return function(t){"custom"===n?Cr(t,Mv,{name:e,value:{}}):"submit"===n?kr(t,Hv):"cancel"===n?kr(t,Ov):console.error("Unknown button type: ",n)}},nz=function(t,e,n){var o=ez(t.name,e);return tz(t,o,n,[])},oz=U([dr("field1Name","field1"),dr("field2Name","field2"),Ca("onLockedChange"),wa(["lockClass"]),dr("locked",!1),Bs("coupledFieldBehaviours",[Il,am])]),rz=function(t,i){return rl({factory:_v,name:t,overrides:function(r){return{fieldBehaviours:_a([Tm("coupled-input-behaviour",[Wr(Nt(),function(n){var t,e,o;(t=n,e=r,o=i,bl(t,e,o).bind(Il.getCurrent)).each(function(e){bl(n,r,"lock").each(function(t){km.isOn(t)&&r.onLockedChange(n,e,t)})})})])])}}})},iz=U([rz("field1","field2"),rz("field2","field1"),rl({factory:qm,schema:[Zo("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:_a([km.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),az=Bl({name:"FormCoupledInputs",configFields:oz(),partFields:iz(),factory:function(o,t,e,n){return{uid:o.uid,dom:o.dom,components:t,behaviours:Ds(o.coupledFieldBehaviours,[Il.config({find:P.some}),am.config({store:{mode:"manual",getValue:function(t){var e,n=Sl(t,o,["field1","field2"]);return(e={})[o.field1Name]=am.getValue(n.field1()),e[o.field2Name]=am.getValue(n.field2()),e},setValue:function(t,e){var n=Sl(t,o,["field1","field2"]);kt(e,o.field1Name)&&am.setValue(n.field1(),e[o.field1Name]),kt(e,o.field2Name)&&am.setValue(n.field2(),e[o.field2Name])}}})]),apis:{getField1:function(t){return bl(t,o,"field1")},getField2:function(t){return bl(t,o,"field2")},getLock:function(t){return bl(t,o,"lock")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getLock:function(t,e){return t.getLock(e)}}}),uz=function(t){var e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null===e)return ft.error(t);var n=parseFloat(e[1]),o=e[2];return ft.value({value:n,unit:o})},cz=function(t,e){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,"in":1},o=function(t){return Object.prototype.hasOwnProperty.call(n,t)};return t.unit===e?P.some(t.value):o(t.unit)&&o(e)?n[t.unit]===n[e]?P.some(t.value):P.some(t.value/n[t.unit]*n[e]):P.none()},sz=function(t){return P.none()},lz=function(t,e){return function(t,e){for(var n=[],o=0;o<t.length;o++){var r=t[o];if(!r.isSome())return P.none();n.push(r.getOrDie())}return P.some(e.apply(null,n))}([uz(t).toOption(),uz(e).toOption()],function(t,o){return cz(t,o.unit).map(function(t){return o.value/t}).map(function(t){return e=t,n=o.unit,function(t){return cz(t,n).map(function(t){return{value:t*e,unit:n}})};var e,n}).getOr(sz)}).getOr(sz)},fz=function(o,e){var u=sz,r=Un("ratio-event"),t=az.parts().lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:e.translate(o.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:Qm("lock",e.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:Qm("unlock",e.icons)}}],buttonBehaviours:_a([Up.config({})])}),n=function(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}},i=function(n){return _v.parts().field({factory:Op,inputClasses:["tox-textfield"],inputBehaviours:_a([Up.config({}),Tm("size-input-events",[Wr(Ft(),function(t,e){Cr(t,r,{isField1:n})}),Wr(Pt(),function(t,e){Cr(t,kv,{name:o.name})})])]),selectOnFocus:!1})},a=function(t){return _v.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}})},c=az.parts().field1(n([a("Width"),i(!0)])),s=function(t){return{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:t}},l=az.parts().field2(n([a("Height"),s([i(!1),t])]));return az.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[s([c,l])],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,i,e){uz(am.getValue(t)).each(function(t){u(t).each(function(t){var e,n,o,r;am.setValue(i,(o={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,"in":4,"%":4},-1!==(r=(e=t).value.toFixed((n=e.unit)in o?o[n]:1)).indexOf(".")&&(r=r.replace(/\.?0*$/,"")),r+e.unit))})})},coupledFieldBehaviours:_a([Tm("size-input-events2",[Wr(r,function(t,e){var n=e.event().isField1(),o=n?az.getField1(t):az.getField2(t),r=n?az.getField2(t):az.getField1(t),i=o.map(am.getValue).getOr(""),a=r.map(am.getValue).getOr("");u=lz(i,a)})])])})},dz={undo:U(Un("undo")),redo:U(Un("redo")),zoom:U(Un("zoom")),back:U(Un("back")),apply:U(Un("apply")),swap:U(Un("swap")),transform:U(Un("transform")),tempTransform:U(Un("temp-transform")),transformApply:U(Un("transform-apply"))},mz=U("save-state"),hz=U("disable"),gz=U("enable"),vz={formActionEvent:Mv,saveState:mz,disable:hz,enable:gz},pz=function(r,c){var t=function(t,e,n,o){return tz({name:t,text:t,disabled:n,primary:o},e,c)},e=function(t,e,n,o){return Zw({name:t,icon:P.some(t),tooltip:P.some(e),disabled:o},n,c)},l={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},n=P.none(),o=N,i=function(t,e,n){Cr(t,e,n)},f=function(t,e){i(t,dz.transform(),{transform:e})},a=function(t,e){i(t,dz.tempTransform(),{transform:e})},u=function(t){return function(){R.getOpt(t).each(function(t){Yd.set(t,[I])})}},s=function(t,e){i(t,dz.transformApply(),{transform:e,swap:u(t)})},d=function(){return t("Back",function(t){return i(t,dz.back(),{swap:u(t)})},!1,!1)},m=function(){return t("Apply",function(t){return i(t,dz.apply(),{swap:u(t)})},!0,!0)},h=pv.sketch({dom:l,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},t("Apply",function(t){s(t,function(t){var e=r.getRect();return Gw(t,e.x,e.y,e.w,e.h)}),r.hideCrop()},!1,!0)]}),g=Km(fz({name:"size",label:n,type:"sizeinput",constrain:!0},c)),v=pv.sketch({dom:l,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},g.asSpec(),{dom:{tag:"div",classes:["tox-spacer"]}},t("Apply",function(u){g.getOpt(u).each(function(t){var e,n,o=am.getValue(t),r=parseInt(o.width,10),i=parseInt(o.height,10),a=(e=r,n=i,function(t){return Xw(t,e,n)});s(u,a)})},!1,!0)]}),p=function(e,n){return function(t){return e(t,n)}},b=p(Ww,"h"),y=p(Ww,"v"),x=p(Yw,-90),w=p(Yw,90),z=pv.sketch({dom:l,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},e("flip-horizontally","Flip horizontally",function(t){a(t,b)},!1),e("flip-vertically","Flip vertically",function(t){a(t,y)},!1),e("rotate-left","Rotate counterclockwise",function(t){a(t,x)},!1),e("rotate-right","Rotate clockwise",function(t){a(t,w)},!1),{dom:{tag:"div",classes:["tox-spacer"]}},m()]}),S=function(t,e,n,o,r){var i=wx.parts().label({dom:{tag:"label",innerHtml:c.translate(t)}}),a=wx.parts().spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),u=wx.parts().thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return wx.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:n,maxX:r,getInitialValue:U({x:U(o)})},components:[i,a,u],sliderBehaviours:_a([fm.config({})]),onChoose:e})},k=function(t,e,n,o,r){return pv.sketch({dom:l,components:[d(),(i=t,a=e,u=n,c=o,s=r,S(i,function(t,e,n){var o=p(a,n.x()/100);f(t,o)},u,c,s)),m()]});var i,a,u,c,s},C=pv.sketch({dom:l,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},m()]}),O=k("Brightness",Nw,-100,0,100),M=k("Contrast",Pw,-100,0,100),H=k("Gamma",Uw,-100,0,100),V=function(t){return S(t,function(l,t,e){var n=E.getOpt(l),o=A.getOpt(l),r=T.getOpt(l);n.each(function(s){o.each(function(c){r.each(function(t){var e,n,o,r=am.getValue(s).x()/100,i=am.getValue(t).x()/100,a=am.getValue(c).x()/100,u=(e=r,n=i,o=a,function(t){return jw(t,e,n,o)});f(l,u)})})})},0,100,200)},E=Km(V("R")),T=Km(V("G")),A=Km(V("B")),B=pv.sketch({dom:l,components:[d(),E.asSpec(),T.asSpec(),A.asSpec(),m()]}),D=function(e,n,o){return function(t){i(t,dz.swap(),{transform:n,swap:function(){R.getOpt(t).each(function(t){Yd.set(t,[e]),o(t)})}})}},_=P.some(Rw),F=P.some(Lw),I=pv.sketch({dom:l,components:[e("crop","Crop",D(h,n,function(t){r.showCrop()}),!1),e("resize","Resize",D(v,n,function(t){g.getOpt(t).each(function(t){var e=r.getMeasurements(),n=e.width,o=e.height;am.setValue(t,{width:n,height:o})})}),!1),e("orientation","Orientation",D(z,n,o),!1),e("brightness","Brightness",D(O,n,o),!1),e("sharpen","Sharpen",D(C,_,o),!1),e("contrast","Contrast",D(M,n,o),!1),e("color-levels","Color levels",D(B,n,o),!1),e("gamma","Gamma",D(H,n,o),!1),e("invert","Invert",D(C,F,o),!1)]}),L=pv.sketch({dom:{tag:"div"},components:[I],containerBehaviours:_a([Yd.config({})])}),R=Km(L);return{memContainer:R,getApplyButton:function(t){return R.getOpt(t).map(function(t){var e=t.components()[0];return e.components()[e.components().length-1]})}}},bz=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),yz=tinymce.util.Tools.resolve("tinymce.geom.Rect"),xz=tinymce.util.Tools.resolve("tinymce.util.Observable"),wz=tinymce.util.Tools.resolve("tinymce.util.Tools"),zz=tinymce.util.Tools.resolve("tinymce.util.VK");function Sz(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}function kz(t,r){var i,a,e,u,c,l,f,d=r.document||document;r=r||{};var m=d.getElementById(r.handle||t);e=function(t){var e,n,o=function s(t){var e,n,o,r,i,a,u,c=Math.max;return e=t.documentElement,n=t.body,o=c(e.scrollWidth,n.scrollWidth),r=c(e.clientWidth,n.clientWidth),i=c(e.offsetWidth,n.offsetWidth),a=c(e.scrollHeight,n.scrollHeight),u=c(e.clientHeight,n.clientHeight),{width:o<i?r:o,height:a<c(e.offsetHeight,n.offsetHeight)?u:a}}(d);Sz(t),t.preventDefault(),a=t.button,e=m,l=t.screenX,f=t.screenY,n=window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue("cursor"):e.runtimeStyle.cursor,i=bz("<div></div>").css({position:"absolute",top:0,left:0,width:o.width,height:o.height,zIndex:2147483647,opacity:1e-4,cursor:n}).appendTo(d.body),bz(d).on("mousemove touchmove",c).on("mouseup touchend",u),r.start(t)},c=function(t){if(Sz(t),t.button!==a)return u(t);t.deltaX=t.screenX-l,t.deltaY=t.screenY-f,t.preventDefault(),r.drag(t)},u=function(t){Sz(t),bz(d).off("mousemove touchmove",c).off("mouseup touchend",u),i.remove(),r.stop&&r.stop(t)},this.destroy=function(){bz(m).off()},bz(m).on("mousedown touchstart",e)}var Cz,Oz,Mz,Hz=0,Vz=function(e){var l=Km({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),f=Ct(1),d=Ct(P.none()),m=Ct({x:0,y:0,w:1,h:1}),c=Ct({x:0,y:0,w:1,h:1}),s=function(t,s){h.getOpt(t).each(function(t){var n=f.get(),o=eu(t.element()),r=ru(t.element()),i=s.dom().naturalWidth*n,a=s.dom().naturalHeight*n,u=Math.max(0,o/2-i/2),c=Math.max(0,r/2-a/2),e={left:u.toString()+"px",top:c.toString()+"px",width:i.toString()+"px",height:a.toString()+"px",position:"absolute"};Gi(s,e),l.getOpt(t).each(function(t){Gi(t.element(),e)}),d.get().each(function(t){var e=m.get();t.setRect({x:e.x*n+u,y:e.y*n+c,w:e.w*n,h:e.h*n}),t.setClampRect({x:u,y:c,w:i,h:a}),t.setViewPortRect({x:0,y:0,w:o,h:r})})})},n=function(t,e){var n,u=Ne.fromTag("img");return Cn(u,"src",e),(n=u.dom(),new lh(function(t){var e=function(){n.removeEventListener("load",e),t(n)};n.complete?t(n):n.addEventListener("load",e)})).then(function(){return h.getOpt(t).map(function(t){var e=ua({element:u});Yd.replaceAt(t,1,P.some(e));var n=c.get(),o={x:0,y:0,w:u.dom().naturalWidth,h:u.dom().naturalHeight};c.set(o);var r,a,i=yz.inflate(o,-20,-20);return m.set(i),n.w===o.w&&n.h===o.h||(r=t,a=u,h.getOpt(r).each(function(t){var e=eu(t.element()),n=ru(t.element()),o=a.dom().naturalWidth,r=a.dom().naturalHeight,i=Math.min(e/o,n/r);1<=i?f.set(1):f.set(i)})),s(t,u),u})})},t=pv.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[l.asSpec(),{dom:{tag:"img",attributes:{src:e}}},{dom:{tag:"div"},behaviours:_a([Tm("image-panel-crop-events",[Qr(function(t){h.getOpt(t).each(function(t){var e=function z(s,n,l,o,r){var f,a,e,i,u="tox-",c="tox-crid-"+Hz++;function d(t,e){return{x:e.x-t.x,y:e.y-t.y,w:e.w,h:e.h}}function m(t,e,n,o){var r,i,a,u,c;r=e.x,i=e.y,a=e.w,u=e.h,r+=n*t.deltaX,i+=o*t.deltaY,(a+=n*t.deltaW)<20&&(a=20),(u+=o*t.deltaH)<20&&(u=20),c=s=yz.clamp({x:r,y:i,w:a,h:u},l,"move"===t.name),c=d(l,c),f.fire("updateRect",{rect:c}),v(c)}function h(e){function t(t,e){e.h<0&&(e.h=0),e.w<0&&(e.w=0),bz("#"+c+"-"+t,o).css({left:e.x,top:e.y,width:e.w,height:e.h})}wz.each(a,function(t){bz("#"+c+"-"+t.name,o).css({left:e.w*t.xMul+e.x,top:e.h*t.yMul+e.y})}),t("top",{x:n.x,y:n.y,w:n.w,h:e.y-n.y}),t("right",{x:e.x+e.w,y:e.y,w:n.w-e.x-e.w+n.x,h:e.h}),t("bottom",{x:n.x,y:e.y+e.h,w:n.w,h:n.h-e.y-e.h+n.y}),t("left",{x:n.x,y:e.y,w:e.x-n.x,h:e.h}),t("move",e)}function g(t){h(s=t)}function v(t){g(function n(t,e){return{x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}}(l,t))}return a=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],i=["top","right","bottom","left"],function p(){bz('<div id="'+c+'" class="'+u+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),wz.each(i,function(t){bz("#"+c,o).append('<div id="'+c+"-"+t+'"class="'+u+'croprect-block" style="display: none" data-mce-bogus="all">')}),wz.each(a,function(t){bz("#"+c,o).append('<div id="'+c+"-"+t.name+'" class="'+u+"croprect-handle "+u+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false" title="'+t.label+'">')}),e=wz.map(a,function t(e){var n;return new kz(c,{document:o.ownerDocument,handle:c+"-"+e.name,start:function(){n=s},drag:function(t){m(e,n,t.deltaX,t.deltaY)}})}),h(s),bz(o).on("focusin focusout",function(t){bz(t.target).attr("aria-grabbed","focus"===t.type)}),bz(o).on("keydown",function(e){var i;function t(t,e,n,o,r){t.stopPropagation(),t.preventDefault(),m(i,n,o,r)}switch(wz.each(a,function(t){if(e.target.id===c+"-"+t.name)return i=t,!1}),e.keyCode){case zz.LEFT:t(e,0,s,-10,0);break;case zz.RIGHT:t(e,0,s,10,0);break;case zz.UP:t(e,0,s,0,-10);break;case zz.DOWN:t(e,0,s,0,10);break;case zz.ENTER:case zz.SPACEBAR:e.preventDefault(),r()}})}(),f=wz.extend({toggleVisibility:function b(t){var e;e=wz.map(a,function(t){return"#"+c+"-"+t.name}).concat(wz.map(i,function(t){return"#"+c+"-"+t})).join(","),t?bz(e,o).show():bz(e,o).hide()},setClampRect:function y(t){l=t,h(s)},setRect:g,getInnerRect:function t(){return d(l,s)},setInnerRect:v,setViewPortRect:function x(t){n=t,h(s)},destroy:function w(){wz.each(e,function(t){t.destroy()}),e=[]}},xz)}({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},t.element().dom(),function(){});e.toggleVisibility(!1),e.on("updateRect",function(t){var e=t.rect,n=f.get(),o={x:Math.round(e.x/n),y:Math.round(e.y/n),w:Math.round(e.w/n),h:Math.round(e.h/n)};m.set(o)}),d.set(P.some(e))})})])])}],containerBehaviours:_a([Yd.config({}),Tm("image-panel-events",[Qr(function(t){n(t,e)})])])}),h=Km(t);return{memContainer:h,updateSrc:n,zoom:function(t,e){var n=f.get(),o=0<e?Math.min(2,n+.1):Math.max(.1,n-.1);f.set(o),h.getOpt(t).each(function(t){var e=t.components()[1].element();s(t,e)})},showCrop:function(){d.get().each(function(t){t.toggleVisibility(!0)})},hideCrop:function(){d.get().each(function(t){t.toggleVisibility(!1)})},getRect:function(){return m.get()},getMeasurements:function(){var t=c.get();return{width:t.w,height:t.h}}}},Ez=function(t,e,n,o,r){return Zw({name:t,icon:P.some(e),disabled:n,tooltip:P.some(t)},o,r)},Tz=function(t,e){e?Ih.enable(t):Ih.disable(t)},Az=function(){return Ye.getOrDie("URL")},Bz=function(t){return Az().createObjectURL(t)},Dz=function(t){Az().revokeObjectURL(t)},_z=function(t){var e=Ct(t),n=Ct(P.none()),r=function s(){var n=[],o=-1;function t(){return 0<o}function e(){return-1!==o&&o<n.length-1}return{data:n,add:function r(t){var e;return e=n.splice(++o),n.push(t),{state:t,removed:e}},undo:function i(){if(t())return n[--o]},redo:function a(){if(e())return n[++o]},canUndo:t,canRedo:e}}();r.add(t);var i=function(t){e.set(t)},a=function(t){return{blob:t,url:Bz(t)}},u=function(t){Dz(t.url)},o=function(){n.get().each(u),n.set(P.none())},c=function(t){var e=a(t);i(e);var n,o=r.add(e).removed;return n=o,wz.each(n,u),e.url};return{getBlobState:function(){return e.get()},setBlobState:i,addBlobState:c,getTempState:function(){return n.get().fold(function(){return e.get()},function(t){return t})},updateTempState:function(t){var e=a(t);return o(),n.set(P.some(e)),e.url},addTempState:function(t){var e=a(t);return n.set(P.some(e)),e.url},applyTempState:function(e){return n.get().fold(function(){},function(t){c(t.blob),e()})},destroyTempState:o,undo:function(){var t=r.undo();return i(t),t.url},redo:function(){var t=r.redo();return i(t),t.url},getHistoryStates:function(){return{undoEnabled:r.canUndo(),redoEnabled:r.canRedo()}}}},Fz=function(t,e){var n,o,r,a=_z(t.currentState),i=function(t){var e=a.getHistoryStates();g.updateButtonUndoStates(t,e.undoEnabled,e.redoEnabled),Cr(t,vz.formActionEvent,{name:vz.saveState(),value:e.undoEnabled})},u=function(t){return t.toBlob()},c=function(t){Cr(t,vz.formActionEvent,{name:vz.disable(),value:{}})},s=function(t){v.getApplyButton(t).each(function(t){Ih.enable(t)}),Cr(t,vz.formActionEvent,{name:vz.enable(),value:{}})},l=function(t,e){return c(t),h.updateSrc(t,e)},f=function(e,t,n,o,r){return c(e),Sw(t).then(n).then(u).then(o).then(function(t){return l(e,t).then(function(t){return i(e),r(),s(e),t})})["catch"](function(t){console.log(t),s(e)})},d=function(t,e,n){var o=a.getBlobState().blob;f(t,o,e,function(t){return a.updateTempState(t)},n)},m=function(t){var e=a.getBlobState().url;return a.destroyTempState(),i(t),e},h=Vz(t.currentState.url),g=(o=Km(Ez("Undo","undo",!0,function(t){Cr(t,dz.undo(),{direction:1})},n=e)),r=Km(Ez("Redo","redo",!0,function(t){Cr(t,dz.redo(),{direction:1})},n)),{container:pv.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[o.asSpec(),r.asSpec(),Ez("Zoom in","zoom-in",!1,function(t){Cr(t,dz.zoom(),{direction:1})},n),Ez("Zoom out","zoom-out",!1,function(t){Cr(t,dz.zoom(),{direction:-1})},n)]}),updateButtonUndoStates:function(t,e,n){o.getOpt(t).each(function(t){Tz(t,e)}),r.getOpt(t).each(function(t){Tz(t,n)})}}),v=pz(h,e);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[v.memContainer.asSpec(),h.memContainer.asSpec(),g.container],behaviours:_a([am.config({store:{mode:"manual",getValue:function(){return a.getBlobState()}}}),Tm("image-tools-events",[Wr(dz.undo(),function(e,t){var n=a.undo();l(e,n).then(function(t){s(e),i(e)})}),Wr(dz.redo(),function(e,t){var n=a.redo();l(e,n).then(function(t){s(e),i(e)})}),Wr(dz.zoom(),function(t,e){var n=e.event().direction();h.zoom(t,n)}),Wr(dz.back(),function(t,e){var n,o;o=m(n=t),l(n,o).then(function(t){s(n)}),e.event().swap()(),h.hideCrop()}),Wr(dz.apply(),function(t,e){a.applyTempState(function(){m(t),e.event().swap()()})}),Wr(dz.transform(),function(t,e){return d(t,e.event().transform(),N)}),Wr(dz.tempTransform(),function(t,e){return n=t,o=e.event().transform(),r=a.getTempState().blob,void f(n,r,o,function(t){return a.addTempState(t)},N);var n,o,r}),Wr(dz.transformApply(),function(t,e){return n=t,o=e.event().transform(),r=e.event().swap(),i=a.getBlobState().blob,void f(n,i,o,function(t){var e=a.addBlobState(t);return m(n),e},r);var n,o,r,i}),Wr(dz.swap(),function(e,t){var n;n=e,g.updateButtonUndoStates(n,!1,!1);var o=t.event().transform(),r=t.event().swap();o.fold(function(){r()},function(t){d(e,t,r)})})]),Lx()])}},Iz=Al({name:"HtmlSelect",configFields:[Zo("options"),Es("selectBehaviours",[fm,am]),dr("selectClasses",[]),dr("selectAttributes",{}),ur("data")],factory:function(n,t){var e=E(n.options,function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}}),o=n.data.map(function(t){return wt("initialValue",t)}).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:e,behaviours:As(n.selectBehaviours,[fm.config({}),am.config({store:Gn({mode:"manual",getValue:function(t){return Qi(t.element())},setValue:function(t,e){_(n.options,function(t){return t.value===e}).isSome()&&Zi(t.element(),e)}},o)})])}}}),Lz=function(n,e){var t=n.label.map(function(t){return yp(t,e)}),o=[jd.config({mode:"execution",useEnter:!0!==n.multiline,useControlEnter:!0===n.multiline,execute:function(t){return kr(t,Hv),P.some(!0)}}),Tm("textfield-change",[Wr(Nt(),function(t,e){Cr(t,kv,{name:n.name})}),Wr(we(),function(t,e){Cr(t,kv,{name:n.name})})]),Up.config({})],r=n.validation.map(function(o){return Np.config({getRoot:function(t){return an(t.element())},invalidClass:"tox-invalid",validator:{validate:function(t){var e=am.getValue(t),n=o.validator(e);return Yv.pure(!0===n?ft.value(e):ft.error(n))},validateOnLoad:o.validateOnLoad}})}).toArray(),i=_v.parts().field({tag:!0===n.multiline?"textarea":"input",inputAttributes:n.placeholder.fold(function(){},function(t){return{placeholder:e.translate(t)}}),inputClasses:[n.classname],inputBehaviours:_a(R([o,r])),selectOnFocus:!1,factory:Op}),a=n.flex?["tox-form__group--stretched"]:[];return gp(t,i,a)},Rz=function(i){return Gn({},i,{toCached:function(){return Rz(i.toCached())},bindFuture:function(e){return Rz(i.bind(function(t){return t.fold(function(t){return Yv.pure(ft.error(t))},function(t){return e(t)})}))},bindResult:function(e){return Rz(i.map(function(t){return t.bind(e)}))},mapResult:function(e){return Rz(i.map(function(t){return t.map(e)}))},mapError:function(e){return Rz(i.map(function(t){return t.mapError(e)}))},foldResult:function(e,n){return i.map(function(t){return t.fold(e,n)})},withTimeout:function(t,r){return Rz(Yv.nu(function(e){var n=!1,o=window.setTimeout(function(){n=!0,e(ft.error(r()))},t);i.get(function(t){n||(window.clearTimeout(o),e(t))})}))}})},Nz=function(t){return Rz(Yv.nu(t))},Pz=Nz,jz={type:"separator"},Uz=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:function(){}}},Wz=function(t,e){return{type:"menuitem",value:e,text:t,meta:{attach:N},onAction:function(){}}},Gz=function(t,e){return o=t,n=A(e,function(t){return t.type===o}),E(n,Uz);var n,o},Xz=function(t,e){var n=t.toLowerCase();return A(e,function(t){var e=t.meta!==undefined&&t.meta.text!==undefined?t.meta.text:t.text;return le(e.toLowerCase(),n)||le(t.value.toLowerCase(),n)})},Yz=function(c,t,s){var e=am.getValue(t),l=e.meta.text!==undefined?e.meta.text:e.value;return s.getLinkInformation().fold(function(){return[]},function(t){var e,n,o,r,i,a,u=Xz(l,(e=s.getHistory(c),E(e,function(t){return Wz(t,t)})));return"file"===c?(n=[u,Xz(l,(a=t,Gz("header",a.targets))),Xz(l,R([(i=t,i.anchorTop.map(function(t){return Wz("<top>",t)}).toArray()),(r=t,Gz("anchor",r.targets)),(o=t,o.anchorBottom.map(function(t){return Wz("<bottom>",t)}).toArray())]))],D(n,function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(jz,e)},[])):u})},qz=function(i,a,o){var t,r=function(t){var e=am.getValue(t);o.addToHistory(e.value,i.filetype)},e=_v.parts().field({factory:hp,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],minChars:0,responseTime:0,fetch:function(t){var e=Yz(i.filetype,t,o),n=Cp(e,fg.BUBBLE_TO_SANDBOX,a.providers);return Yv.pure(n)},getHotspot:function(t){return f.getOpt(t)},onSetValue:function(t,e){t.hasConfigured(Np)&&Np.run(t).get(N)},typeaheadBehaviours:_a(R([o.getValidationHandler().map(function(o){return Np.config({getRoot:function(t){return an(t.element())},invalidClass:"tox-control-wrap--status-invalid",notify:{},validator:{validate:function(e){var n=am.getValue(e);return Pz(function(t){o({type:i.filetype,url:n.value},function(n){f.getOpt(e).each(function(t){var e=function(t,e,n){(n?_i:Ii)(t.element(),e)};e(t,"tox-control-wrap--status-valid","valid"===n.status),e(t,"tox-control-wrap--status-unknown","unknown"===n.status)}),t(("invalid"===n.status?ft.error:ft.value)(n.message))})})},validateOnLoad:!1}})}).toArray(),[Up.config({}),Tm("urlinput-events",R(["file"===i.filetype?[Wr(Nt(),function(t){Cr(t,kv,{name:i.name})})]:[],[Wr(Pt(),function(t){Cr(t,kv,{name:i.name}),r(t)}),Wr(we(),function(t){Cr(t,kv,{name:i.name}),r(t)})]]))]])),eventOrder:(t={},t[Nt()]=["streaming","urlinput-events","invalidating"],t),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"dog"},lazySink:a.getSink,parts:{menu:Tg(0,0,"normal")},onExecute:function(t,e,n){Cr(e,Hv,{})},onItemExecute:function(t,e,n,o){r(t),Cr(t,kv,{name:i.name})}}),n=i.label.map(function(t){return yp(t,a.providers)}),u=function(t,e,n){return void 0===e&&(e=t),void 0===n&&(n=t),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+t],innerHtml:Qm(e,a.providers.icons),attributes:{title:a.providers.translate(n)}}}},c=Km({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[u("valid","checkmark","valid"),u("unknown","warning"),u("invalid","warning")]}),s=o.getUrlPicker(i.filetype),l=Un("browser.url.event"),f=Km({dom:{tag:"div",classes:["tox-control-wrap"]},components:[e,c.asSpec()]});return _v.sketch({dom:bp([]),components:n.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:R([[f.asSpec()],s.map(function(){return t=i.label,e=l,n="tox-browse-url",o="browse",r=a.providers,qm.sketch({dom:{tag:"button",classes:["tox-tbtn",n],innerHtml:Qm(o,r.icons),attributes:{title:r.translate(t.getOr(""))}},buttonBehaviours:_a([Up.config({})]),action:function(t){kr(t,e)}});var t,e,n,o,r}).toArray()])}]),fieldBehaviours:_a([Tm("url-input-events",[Wr(l,function(o){Il.getCurrent(o).each(function(e){var n=am.getValue(e);s.each(function(t){t(n).get(function(t){am.setValue(e,t),Cr(o,kv,{name:i.name})})})})})])])})},Kz=function(a,e){var t,n,o=a.label.map(function(t){return yp(t,e)}),r=function(n){return function(e,t){ma(t.event().target(),"[data-collection-item-value]").each(function(t){n(e,t,Mn(t,"data-collection-item-value"))})}},i=[Wr(_t(),r(function(t,e){cf(e)})),Wr(jt(),r(function(t,e,n){Cr(t,Mv,{name:a.name,value:n})})),Wr(Ft(),r(function(t,e,n){da(t.element(),"."+Gh).each(function(t){Ii(t,Gh)}),_i(e,Gh)})),Wr(It(),r(function(t,e,n){da(t.element(),"."+Gh).each(function(t){Ii(t,Gh)})})),ei(r(function(t,e,n){Cr(t,Mv,{name:a.name,value:n})}))],u=_v.parts().field({dom:{tag:"div",classes:["tox-collection"].concat(1!==a.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:d},behaviours:_a([Yd.config({}),am.config({store:{mode:"memory",initialValue:[]},onSetValue:function(o,t){var e,n,r,i;e=o,n=E(t,function(t){var e,n=1===a.columns?t.text.map(function(t){return'<span class="tox-collection__item-label">'+t+"</span>"}).getOr(""):"",o=t.icon.map(function(t){return'<span class="tox-collection__item-icon">'+t+"</span>"}).getOr(""),r={_:" "," - ":" ","-":" "},i=t.text.getOr("").replace(/\_| \- |\-/g,function(t){return r[t]});return'<div class="tox-collection__item" tabindex="-1" data-collection-item-value="'+('"'===(e=t.value)?"&quot;":e)+'" title="'+i+'" aria-label="'+i+'">'+o+n+"</div>"}),r=1<a.columns&&"auto"!==a.columns?V(n,a.columns):[n],i=E(r,function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"}),bn(e.element(),i.join("")),"auto"===a.columns&&zh(o,5,"tox-collection__item").each(function(t){var e=t.numRows,n=t.numColumns;jd.setGridSize(o,e,n)}),kr(o,Av)}}),Up.config({}),jd.config((t=a.columns,n="normal",1===t?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===t?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===n?".tox-swatches__row":".tox-collection__group",cell:"color"===n?"."+Nh:"."+Rh}})),Tm("collection-events",i)])});return gp(o,u,["tox-form__group--collection"])},Jz=function(r){return function(e,n,o){return xt(n,"name").fold(function(){return r(n,o)},function(t){return e.field(t,r(n,o))})}},$z={bar:Jz(function(t,e){return n=t,o=e.shared,{dom:{tag:"div",classes:["tox-bar"]},components:E(n.items,o.interpreter)};var n,o}),collection:Jz(function(t,e){return Kz(t,e.shared.providers)}),alloy:Jz(d),alertbanner:Jz(function(t,e){return n=t,o=e.shared.providers,pv.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+n.level]},components:[{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:o.translate(n.text)}},qm.sketch({dom:{tag:"button",classes:["tox-notification__right-icon","tox-button","tox-button--naked","tox-button--icon"],innerHtml:Qm(n.icon,o.icons),attributes:{title:o.translate(n.actionLabel)}},action:function(t){Cr(t,Mv,{name:"alert-banner",value:n.url})}})]});var n,o}),input:Jz(function(t,e){return n=t,o=e.shared.providers,Lz({name:n.name,multiline:!1,label:n.label,placeholder:n.placeholder,flex:!1,classname:"tox-textfield",validation:P.none()},o);var n,o}),textarea:Jz(function(t,e){return n=t,o=e.shared.providers,Lz({name:n.name,multiline:!0,label:n.label,placeholder:n.placeholder,flex:!0,classname:"tox-textarea",validation:P.none()},o);var n,o}),listbox:Jz(function(t,e){return n=t,o=e.shared.providers,r=yp(n.label,o),i=_v.parts().field({factory:Iz,dom:{classes:["mce-select-field"]},selectBehaviours:_a([Up.config({})]),options:n.values,data:n.initialValue.getOr(undefined)}),vp(P.some(r),i);var n,o,r,i}),label:Jz(function(t,e){return n=t,o=e.shared,r={dom:{tag:"label",innerHtml:o.providers.translate(n.label),classes:["tox-label"]}},i=E(n.items,o.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[r].concat(i),behaviours:_a([Lx(),Yd.config({}),qx(P.none()),jd.config({mode:"acyclic"})])};var n,o,r,i}),iframe:(Cz=function(t,e){return iw(t,e.shared.providers)},function(t,e,n){var o=gt(e,{source:"dynamic"});return Jz(Cz)(t,o,n)}),autocomplete:Jz(function(t,e){return r=t,i=e.shared,n=yp(r.label.getOr("?"),i.providers),o=_v.parts().field({factory:hp,dismissOnBlur:!1,inputClasses:["tox-textfield"],minChars:1,fetch:function(t){var e=am.getValue(t),n=r.getItems(e),o=Cp(n,fg.BUBBLE_TO_SANDBOX,i.providers);return Yv.pure(o)},markers:{openClass:"dog"},lazySink:i.getSink,parts:{menu:Tg(0,0,"normal")}}),vp(P.some(n),o);var r,i,n,o}),button:Jz(function(t,e){return n=t,o=e.shared.providers,r=ez(n.name,"custom"),tz(n,r,o,[Kx(""),Lx()]);var n,o,r}),checkbox:Jz(function(t,e){return n=t,o=e.shared.providers,r=am.config({store:{mode:"manual",getValue:function(t){return t.element().dom().checked},setValue:function(t,e){t.element().dom().checked=e}}}),i=function(t){return t.element().dom().click(),P.some(!0)},a=_v.parts().field({factory:{sketch:d},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:_a([Lx(),Up.config({}),fm.config({}),r,jd.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Tm("checkbox-events",[Wr(Pt(),function(t,e){Cr(t,kv,{name:n.name})})])])}),u=_v.parts().label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:o.translate(n.label)},behaviours:_a([Ab.config({})])}),s=Km({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[(c=function(t){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:Qm("checked"===t?"selected":"unselected",o.icons)}}})("checked"),c("unchecked")]}),_v.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[a,s.asSpec(),u]});var n,o,r,i,a,u,c,s}),colorinput:Jz(function(t,e){return Fb(t,e.shared,e.colorinput)}),colorpicker:Jz(function(t){var e=function(t){return"tox-"+t},n=Ix(jx,e),r=Km(n.sketch({dom:{tag:"div",classes:[e("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function(t){Cr(t,Mv,{name:"hex-valid",value:!0})},onInvalidHex:function(t){Cr(t,Mv,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[r.asSpec()],behaviours:_a([am.config({store:{mode:"manual",getValue:function(t){var e=r.get(t);return Il.getCurrent(e).bind(function(t){return am.getValue(t).hex}).map(function(t){return"#"+t}).getOr("")},setValue:function(t,e){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(e),o=r.get(t);Il.getCurrent(o).fold(function(){console.log("Can not find form")},function(t){am.setValue(t,{hex:P.from(n[1]).getOr("")}),Ex.getField(t,"hex").each(function(t){kr(t,Nt())})})}}}),Lx()])}}),dropzone:Jz(function(t,e){return Jx(t,e.shared.providers)}),grid:Jz(function(t,e){return n=t,o=e.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+n.columns+"col"]},components:E(n.items,o.interpreter)};var n,o}),selectbox:Jz(function(t,e){return n=t,o=e.shared.providers,r=n.label.map(function(t){return yp(t,o)}),i=_v.parts().field({dom:{},selectAttributes:{size:n.size},options:n.items,factory:Iz,selectBehaviours:_a([Up.config({}),Tm("selectbox-change",[Wr(Pt(),function(t,e){Cr(t,kv,{name:n.name})})])])}),a=1<n.size?P.none():P.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:Qm("chevron-down",o.icons)}}),u={dom:{tag:"div",classes:["tox-selectfield"]},components:R([[i],a.toArray()])},_v.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:R([r.toArray(),[u]])});var n,o,r,i,a,u}),sizeinput:Jz(function(t,e){return fz(t,e.shared.providers)}),urlinput:Jz(function(t,e){return qz(t,e.shared,e.urlinput)}),customeditor:Jz(function(e){var n=Ct(P.none()),o=Km({dom:{tag:e.tag}}),r=Ct(P.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:_a([Tm("editor-foo-events",[Qr(function(t){o.getOpt(t).each(function(t){e.init(t.element().dom()).then(function(e){r.get().each(function(t){e.setValue(t)}),r.set(P.none()),n.set(P.some(e))})})})]),am.config({store:{mode:"manual",getValue:function(){return n.get().fold(function(){return r.get().getOr("")},function(t){return t.getValue()})},setValue:function(t,e){n.get().fold(function(){r.set(P.some(e))},function(t){return t.setValue(e)})}}}),Lx()]),components:[o.asSpec()]}}),htmlpanel:Jz(function(t){return pv.sketch({dom:{tag:"div",innerHtml:t.html},containerBehaviours:_a([Up.config({}),fm.config({})])})}),imagetools:Jz(function(t,e){return Fz(t,e.shared.providers)}),table:Jz(function(t,e){return n=t,o=e.shared.providers,a=function(t){return{dom:{tag:"th",innerHtml:o.translate(t)}}},u=function(t){return{dom:{tag:"td",innerHtml:o.translate(t)}}},c=function(t){return{dom:{tag:"tr"},components:E(t,u)}},{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(i=n.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:E(i,a)}]}),(r=n.cells,{dom:{tag:"tbody"},components:E(r,c)})],behaviours:_a([Up.config({}),fm.config({})])};var n,o,r,i,a,u,c})},Qz={field:function(t,e){return e}},Zz=function(e,t,n){var o=gt(n,{shared:{interpreter:function(t){return tS(e,t,o)}}});return tS(e,t,o)},tS=function(e,n,o){return xt($z,n.type).fold(function(){return console.error('Unknown factory type "'+n.type+'", defaulting to container: ',n),n},function(t){return t(e,n,o)})},eS=function(t){return{colorPicker:(o=t,function(t,e){Hb.colorPickerDialog(o)(t,e)}),hasCustomColors:(n=t,function(){return pb(n)}),getColors:(e=t,function(){return bb(e)})};var e,n,o},nS=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strike-through",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}]}],oS=function(t){return D(t,function(t,e){if(it(e,"items")){var n=oS(e.items);return{customFormats:t.customFormats.concat(n.customFormats),formats:t.formats.concat([{title:e.title,items:n.formats}])}}if(it(e,"inline")||it(e,"block")||it(e,"selector")){var o="custom-"+e.title.toLowerCase();return{customFormats:t.customFormats.concat([{name:o,format:e}]),formats:t.formats.concat([{title:e.title,format:o,icon:e.icon}])}}return Gn({},t,{formats:t.formats.concat(e)})},{customFormats:[],formats:[]})},rS=function(i){return(t=i,P.from(t.getParam("style_formats")).filter(O)).map(function(t){var e,n,o,r=(e=i,n=oS(t),o=function(t){T(t,function(t){e.formatter.has(t.name)||e.formatter.register(t.name,t.format)})},e.formatter?o(n.customFormats):e.on("init",function(){o(n.customFormats)}),n.formats);return i.getParam("style_formats_merge",!1,"boolean")?nS.concat(r):r}).getOr(nS);var t},iS=function(t,e,n){var o={type:"formatter",isSelected:e(t.format),getStylePreview:n(t.format)};return gt(t,o)},aS=function(s,t,l,f){var d=function(t){return E(t,function(t){var e,n,o,r,i,a,u=Q(t);if(kt(t,"items")){var c=d(t.items);return gt((i=t,a={type:"submenu",isSelected:U(!1),getStylePreview:function(){return P.none()}},gt(i,a)),{getStyleItems:function(){return c}})}return kt(t,"format")?iS(t,l,f):1===u.length&&M(u,"title")?gt(t,{type:"separator"}):(n=Un((e=t).title),o={type:"formatter",format:n,isSelected:l(n),getStylePreview:f(n)},r=gt(e,o),s.formatter.register(n,r),r)})};return d(t)},uS=wz.trim,cS=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},sS=cS("true"),lS=cS("false"),fS=function(t,e,n,o,r){return{type:t,title:e,url:n,level:o,attach:r}},dS=function(t){return t.innerText||t.textContent},mS=function(t){return(e=t)&&"A"===e.nodeName&&(e.id||e.name)!==undefined&&gS(t);var e},hS=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},gS=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return sS(t)}return!1}(t)&&!lS(t)},vS=function(t){return hS(t)&&gS(t)},pS=function(t){var e,n,o=(e=t).id?e.id:Un("h");return fS("header",dS(t),"#"+o,hS(n=t)?parseInt(n.nodeName.substr(1),10):0,function(){t.id=o})},bS=function(t){var e=t.id||t.name,n=dS(t);return fS("anchor",n||"#"+e,"#"+e,0,N)},yS=function(t){var e,n;return e="h1,h2,h3,h4,h5,h6,a:not([href])",n=t,E(Oc(Ne.fromDom(n),e),function(t){return t.dom()})},xS=function(t){return 0<uS(t.title).length},wS=function(t){var e,n=yS(t);return A((e=n,E(A(e,vS),pS)).concat(E(A(n,mS),bS)),xS)},zS="tinymce-url-history",SS=function(t){return x(t)&&/^https?/.test(t)},kS=function(t){return w(t)&&function(t,e){for(var n=Q(t),o=0,r=n.length;o<r;o++){var i=n[o],a=t[i];if(e(a,i,t))return P.some(a)}return P.none()}(t,function(t){return!(O(e=t)&&e.length<=5&&W(e,SS));var e}).isNone()},CS=function(){var t,e=localStorage.getItem(zS);if(null===e)return{};try{t=JSON.parse(e)}catch(n){if(n instanceof SyntaxError)return console.log("Local storage "+zS+" was not valid JSON",n),{};throw n}return kS(t)?t:(console.log("Local storage "+zS+" was not valid format",t),{})},OS=function(t){var e=CS();return Object.prototype.hasOwnProperty.call(e,t)?e[t]:[]},MS=function(e,t){if(SS(e)){var n=CS(),o=Object.prototype.hasOwnProperty.call(n,t)?n[t]:[],r=A(o,function(t){return t!==e});n[t]=[e].concat(r).slice(0,5),function(t){if(!kS(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));localStorage.setItem(zS,JSON.stringify(t))}(n)}},HS=Object.prototype.hasOwnProperty,VS=function(t){return!!t},ES=function(t){return et(wz.makeMap(t,/[, ]/),VS)},TS=function(t,e){return HS.call(t,e)?P.some(t[e]):P.none()},AS=function(t,e,n){var o=TS(t,e).getOr(n);return x(o)?P.some(o):P.none()},BS=function(u){return function(r){return(t=u.settings,e=r,n=P.some(t.file_picker_types).filter(VS),o=P.some(t.file_browser_callback_types).filter(VS),i=n.or(o).map(ES).fold(function(){return!0},function(t){return TS(t,e).getOr(!1)}),a=P.some(t.file_picker_callback).filter(S),i?a:P.none()).map(function(o){return function(e){return Yv.nu(function(n){var t=wz.extend({filetype:r},P.from(e.meta).getOr({}));o.call(u,function(t,e){if(!x(t))throw new Error("Expected value to be string");if(e!==undefined&&!w(e))throw new Error("Expected meta to be a object");n({value:t,meta:e})},e.value,t)})}});var t,e,n,o,i,a}},DS=function(t){return{getHistory:OS,addToHistory:MS,getLinkInformation:(n=t,function(){return!1===n.settings.typeahead_urls?P.none():P.some({targets:wS(n.getBody()),anchorTop:AS(n.settings,"anchor_top","#top"),anchorBottom:AS(n.settings,"anchor_bottom","#bottom")})}),getValidationHandler:(e=t,function(){var t=e.settings.filepicker_validator_handler;return S(t)?P.some(t):P.none()}),getUrlPicker:BS(t)};var e,n},_S={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},FS=function(t,e,n){var o,r,i,a,u,c,s,l,f,d={shared:{providers:{icons:function(){return e.ui.registry.getAll().icons},menuItems:function(){return e.ui.registry.getAll().menuItems},translate:Yh.translate},interpreter:function(t){return tS(Qz,t,d)},anchors:{toolbar:function(){return{anchor:"hotspot",hotspot:n(),bubble:ju(-12,12,_S),layouts:{onRtl:function(){return[$u]},onLtr:function(){return[Qu]}}}},banner:function(){return{anchor:"hotspot",hotspot:n(),layouts:{onRtl:function(){return[nc]},onLtr:function(){return[nc]}}}},cursor:function(){return{anchor:"selection",root:Ne.fromDom(e.getBody()),getSelection:function(){var t=e.selection.getRng();return P.some(gc(Ne.fromDom(t.startContainer),t.startOffset,Ne.fromDom(t.endContainer),t.endOffset))}}},node:function(t){return{anchor:"node",root:Ne.fromDom(e.getBody()),node:t}}},getSink:function(){return ft.value(t)}},urlinput:DS(e),styleselect:(o=e,r=function(t){return function(){return o.formatter.match(t)}},i=function(e){return function(){var t=o.formatter.get(e);return t!==undefined?P.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styleAttr:o.formatter.getCssText(e)}):P.none()}},a=function(t){var e=t.items;return e!==undefined&&0<e.length?j(e,a):[t.format]},u=Ct([]),c=Ct([]),s=Ct([]),l=Ct([]),f=Ct(!1),o.on("init",function(){var t=rS(o),e=aS(o,t,r,i);u.set(e),c.set(j(e,a))}),o.on("addStyleModifications",function(t){var e=aS(o,t.items,r,i);s.set(e),f.set(t.replace),l.set(j(e,a))}),{getData:function(){var t=f.get()?[]:u.get(),e=s.get();return t.concat(e)},getFlattenedKeys:function(){var t=f.get()?[]:c.get(),e=l.get();return t.concat(e)}}),colorinput:eS(e)};return d},IS=tinymce.util.Tools.resolve("tinymce.util.Delay"),LS=U([dr("shell",!0),Es("toolbarBehaviours",[Yd])]),RS=U([al({name:"groups",overrides:function(t){return{behaviours:_a([Yd.config({})])}}})]),NS=Bl({name:"Toolbar",configFields:LS(),partFields:RS(),factory:function(e,t,n,o){var r=function(t){return e.shell?P.some(t):bl(t,e,"groups")},i=e.shell?{behaviours:[Yd.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:i.components,behaviours:As(e.toolbarBehaviours,i.behaviours),apis:{setGroups:function(t,e){r(t).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(t){Yd.set(t,e)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)}}}),PS=U([Zo("items"),wa(["itemSelector"]),Es("tgroupBehaviours",[jd])]),jS=U([ul({name:"items",unit:"item"})]),US=Bl({name:"ToolbarGroup",configFields:PS(),partFields:jS(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:As(t.tgroupBehaviours,[jd.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),WS=function(t){var e=t.title.fold(function(){return{}},function(t){return{attributes:{title:t}}});return US.sketch({dom:Gn({tag:"div",classes:["tox-toolbar__group"]},e),components:[US.parts().items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:_a([Up.config({}),fm.config({})])})},GS=function(n){var t=n.cyclicKeying?"cyclic":"acyclic";return NS.sketch({uid:n.uid,dom:{tag:"div",classes:["tox-toolbar"]},components:[NS.parts().groups({})],toolbarBehaviours:_a([jd.config({mode:t,onEscape:n.onEscape,selector:".tox-toolbar__group"}),Tm("toolbar-events",[Qr(function(t){var e=E(n.initGroups,WS);NS.setGroups(t,e)})])])})},XS=[pr("disabled",!1),sr("tooltip"),sr("icon"),sr("text"),br("onSetup",function(){return N})],YS=Vo([er("type"),or("onAction")].concat(XS)),qS=function(t){return Po("toolbarbutton",YS,t)},KS=Vo([er("type"),sr("tooltip"),sr("icon"),sr("text"),or("fetch"),br("onSetup",function(){return N})]),JS=Vo([er("type"),sr("tooltip"),sr("icon"),sr("text"),lr("select"),or("fetch"),br("onSetup",function(){return N}),vr("presets","normal",["normal","color","toolbar"]),dr("columns",1),or("onAction"),or("onItemAction")]),$S=[pr("active",!1)].concat(XS),QS=Vo($S.concat([er("type"),or("onAction")])),ZS=function(t){return Po("ToggleButton",QS,t)},tk=[br("predicate",function(){return!1}),vr("scope","node",["node","editor"]),vr("position","selection",["node","selection","line"])],ek=XS.concat([dr("type","contextformbutton"),dr("primary",!1),or("onAction"),xr("original",d)]),nk=$S.concat([dr("type","contextformbutton"),dr("primary",!1),or("onAction"),xr("original",d)]),ok=XS.concat([dr("type","contextformbutton")]),rk=$S.concat([dr("type","contextformtogglebutton")]),ik=Go("type",{contextformbutton:ek,contextformtogglebutton:nk}),ak=Vo([dr("type","contextform"),br("initValue",function(){return""}),sr("label"),ar("commands",ik),cr("launch",Go("type",{contextformbutton:ok,contextformtogglebutton:rk}))].concat(tk)),uk=Vo([dr("type","contexttoolbar"),er("items")].concat(tk)),ck=Un("toolbar.button.execute"),sk={"alloy.execute":["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},lk=Object.freeze({getState:function(t,e,n){return n}}),fk=Object.freeze({events:function(r,i){var o=function(n,o){r.updateState.each(function(t){var e=t(n,o);i.set(e)}),r.renderComponents.each(function(t){var e=t(o,i.get());ds(n),T(e,function(t){cs(n,n.getSystem().build(t))})})};return Pr([Wr(ze(),function(t,e){var n=r.channel;M(e.channels(),n)&&o(t,e.data())}),Qr(function(e,t){r.initialData.each(function(t){o(e,t)})})])}}),dk=Object.freeze({init:function(t){var e=Ct(P.none());return{readState:function(){return e.get().getOr("none")},get:function(){return e.get()},set:function(t){return e.set(t)},clear:function(){return e.set(P.none())}}}}),mk=[Zo("channel"),ur("renderComponents"),ur("updateState"),ur("initialData")],hk=Ia({fields:mk,name:"reflecting",active:fk,apis:lk,state:dk}),gk=U([Zo("toggleClass"),Zo("fetch"),Ca("onExecute"),dr("getHotspot",P.some),dr("layouts",P.none()),Ca("onItemExecute"),ur("lazySink"),Zo("dom"),Sa("onOpen"),Es("splitDropdownBehaviours",[Lv,jd,fm]),dr("matchWidth",!1),dr("useMinWidth",!1),dr("eventOrder",{}),ur("role")].concat(fp())),vk=rl({factory:qm,schema:[Zo("dom")],name:"arrow",defaults:function(t){return{buttonBehaviours:_a([fm.revoke()])}},overrides:function(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(e.uid).each(Or)},buttonBehaviours:_a([km.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])}}}),pk=rl({factory:qm,schema:[Zo("dom")],name:"button",defaults:function(t){return{buttonBehaviours:_a([fm.revoke()])}},overrides:function(n){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(n.uid).each(function(t){n.onExecute(t,e)})}}}}),bk=U([vk,pk,al({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[Zo("text")],name:"aria-descriptor"}),il({schema:[xa()],name:"menu",defaults:function(o){return{onExecute:function(e,n){e.getSystem().getByUid(o.uid).each(function(t){o.onItemExecute(t,e,n)})}}}}),Kv()]),yk=Bl({name:"SplitDropdown",configFields:gk(),partFields:bk(),factory:function(o,t,e,n){var r=function(t){Il.getCurrent(t).each(function(t){Jl.highlightFirst(t),jd.focusIn(t)})},i=function(t){Zv(o,function(t){return t},t,n,r,gv.HighlightFirst).get(N)},a=function(t){var e=yl(t,o,"button");return Or(e),P.some(!0)},u=vt(Pr([Qr(function(n,t){bl(n,o,"aria-descriptor").each(function(t){var e=Un("aria");Cn(t.element(),"id",e),Cn(n.element(),"aria-describedby",e)})})]),Ym(P.some(i)));return{uid:o.uid,dom:o.dom,components:t,eventOrder:Gn({},o.eventOrder,{"alloy.execute":["disabling","toggling","alloy.base.behaviour"]}),events:u,behaviours:As(o.splitDropdownBehaviours,[Lv.config({others:{sandbox:function(t){var e=yl(t,o,"arrow");return np(o,t,{onOpen:function(){km.on(e),km.on(t)},onClose:function(){km.off(e),km.off(t)}})}}}),jd.config({mode:"special",onSpace:a,onEnter:a,onDown:function(t){return i(t),P.some(!0)}}),fm.config({}),km.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:o.role.getOr("button"),"aria-haspopup":!0}}}}}),xk=function(e){return{isDisabled:function(){return Ih.isDisabled(e)},setDisabled:function(t){return t?Ih.disable(e):Ih.enable(e)}}},wk=function(e){return{setActive:function(t){km.set(e,t)},isActive:function(){return km.isOn(e)},isDisabled:function(){return Ih.isDisabled(e)},setDisabled:function(t){return t?Ih.disable(e):Ih.enable(e)}}},zk=function(t,e){return t.map(function(t){return{"aria-label":e.translate(t),title:e.translate(t)}}).getOr({})},Sk=Un("focus-button"),kk=function(e,n,t,o,r,i){var a;return{dom:{tag:"button",classes:["tox-tbtn"].concat(n.isSome()?["tox-tbtn--select"]:[]),attributes:zk(t,i)},components:mg([e.map(function(t){return Kw(t,i.icons)}),n.map(function(t){return $w(t,"tox-tbtn",i)})]),eventOrder:(a={},a[Tt()]=["focusing","alloy.base.behaviour","common-button-display-events"],a),buttonBehaviours:_a([Tm("common-button-display-events",[Wr(Tt(),function(t,e){e.event().prevent(),kr(t,Sk)})])].concat(o.map(function(t){return hk.config({channel:t,initialData:{icon:e,text:n},renderComponents:function(t,e){return mg([t.icon.map(function(t){return Kw(t,i.icons)}),t.text.map(function(t){return $w(t,"tox-tbtn",i)})])}})}).toArray()).concat(r.getOr([])))}},Ck=function(t,e,n){var o,r=Ct(N),i=kk(t.icon,t.text,t.tooltip,P.none(),P.none(),n);return qm.sketch({dom:i.dom,components:i.components,eventOrder:sk,buttonBehaviours:_a([Tm("toolbar-button-events",[(o={onAction:t.onAction,getApi:e.getApi},ei(function(e,t){ag(o,e)(function(t){Cr(e,ck,{buttonApi:t}),o.onAction(t)})})),ug(e,r),cg(e,r)]),rg(t.disabled)].concat(e.toolbarButtonBehaviours))})},Ok=function(t,e,n){return Ck(t,{toolbarButtonBehaviours:[].concat(0<n.length?[Tm("toolbarButtonWith",n)]:[]),getApi:xk,onSetup:t.onSetup},e)},Mk=function(t,e,n){return gt(Ck(t,{toolbarButtonBehaviours:[Yd.config({}),km.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<n.length?[Tm("toolbarToggleButtonWith",n)]:[]),getApi:wk,onSetup:t.onSetup},e))},Hk=function(e,t){var n,o,r,i,a=Un("channel-update-split-dropdown-display"),u=function(n){return{isDisabled:function(){return Ih.isDisabled(n)},setDisabled:function(t){return t?Ih.disable(n):Ih.enable(n)},setIconFill:function(t,e){da(n.element(),'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(t){Cn(t,"fill",e)})},setIconStroke:function(t,e){da(n.element(),'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(t){Cn(t,"stroke",e)})},setActive:function(e){Cn(n.element(),"aria-pressed",e),da(n.element(),"span").each(function(t){n.getSystem().getByDom(t).each(function(t){return km.set(t,e)})})},isActive:function(){return da(n.element(),"span").exists(function(t){return n.getSystem().getByDom(t).exists(km.isOn)})}}},c=Ct(N),s={getApi:u,onSetup:e.onSetup};return yk.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:vt({"aria-pressed":!1},zk(e.tooltip,t.providers))},onExecute:function(t){e.onAction(u(t))},onItemExecute:function(t,e,n){},splitDropdownBehaviours:_a([ig(!1),Tm("split-dropdown-events",[Wr(Sk,fm.focus),ug(s,c),cg(s,c)])]),eventOrder:(n={},n[Ae()]=["alloy.base.behaviour","split-dropdown-events"],n),toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:(o=u,r=e,i=t.providers,function(e){return Yv.nu(function(t){return r.fetch(t)}).map(function(t){return Wg(gt(jg(Un("menu-value"),t,function(t){r.onItemAction(o(e),t)},r.columns,r.presets,fg.CLOSE_ON_EXECUTE,r.select.getOr(function(){return!1}),i),{movement:Ag(r.columns,r.presets),menuBehaviours:kh("auto"!==r.columns?[]:[Qr(function(o,t){zh(o,4,Xh(r.presets)).each(function(t){var e=t.numRows,n=t.numColumns;jd.setGridSize(o,e,n)})})])}))})}),parts:{menu:Tg(0,e.columns,e.presets)},components:[yk.parts().button(kk(e.icon,e.text,P.none(),P.some(a),P.some([km.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),yk.parts().arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Qm("chevron-down",t.providers.icons)}}),yk.parts()["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})},Vk=function(i,a){return Wr(ck,function(t,e){var n,o=i.get(t),r=(n=o,{hide:function(){return kr(n,He())},getValue:function(){return am.getValue(n)}});a.onAction(r,e.event().buttonApi())})},Ek=function(t,e,n){var o,r,i,a,u,c,s,l,f,d,m,h,g={backstage:{shared:{providers:n}}};return"contextformtogglebutton"===e.type?(s=t,f=g,(d=(l=e).original).primary,m=Xn(d,["primary"]),h=jo(ZS(Gn({},m,{type:"togglebutton",onAction:function(){}}))),Mk(h,f.backstage.shared.providers,[Vk(s,l)])):(o=t,i=g,(a=(r=e).original).primary,u=Xn(a,["primary"]),c=jo(qS(Gn({},u,{type:"button",onAction:function(){}}))),Ok(c,i.backstage.shared.providers,[Vk(o,r)]))},Tk=function(t,e){var n,o,r,i,a=t.label.fold(function(){return{}},function(t){return{"aria-label":t}}),u=Km(Op.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:_a([jd.config({mode:"special",onEnter:function(t){return c.findPrimary(t).map(function(t){return Or(t),!0})},onLeft:function(t,e){return e.cut(),P.none()},onRight:function(t,e){return e.cut(),P.none()}})])})),c=(n=u,o=t.commands,r=e,i=E(o,function(t){return Km(Ek(n,t,r))}),{asSpecs:function(){return E(i,function(t){return t.asSpec()})},findPrimary:function(n){return Mt(o,function(t,e){return t.primary?P.from(i[e]).bind(function(t){return t.getOpt(n)}).filter(m(Ih.isDisabled)):P.none()})}});return GS({uid:Un("context-toolbar"),initGroups:[{title:P.none(),items:[u.asSpec()]},{title:P.none(),items:c.asSpecs()}],onEscape:P.none,cyclicKeying:!0})},Ak=Un("forward-slide"),Bk=Un("backward-slide"),Dk=Un("change-slide-event"),_k="tox-pop--resizing",Fk=function(e,t){return Mt(t,function(t){return t.predicate(e.dom())?P.some({toolbarApi:t,elem:e}):P.none()})},Ik=function(e,n){var t=function(t){return t.dom()===n.getBody()},o=Ne.fromDom(n.selection.getNode());return Fk(o,e.inNodeScope).orThunk(function(){return Fk(o,e.inEditorScope).orThunk(function(){return function(t,e,n){for(var o=t.dom(),r=S(n)?n:U(!1);o.parentNode;){o=o.parentNode;var i=Ne.fromDom(o),a=e(i);if(a.isSome())return a;if(r(i))break}return P.none()}(o,function(t){return Fk(t,e.inNodeScope)},t)})})},Lk=function(n,r){var t={},i=[],a=[],u={},c={},o=function(e,n){var o=jo(Po("ContextForm",ak,n));(t[e]=o).launch.map(function(t){u["form:"+e]=Gn({},n.launch,{type:"contextformtogglebutton"===t.type?"togglebutton":"button",onAction:function(){r(o)}})}),"editor"===o.scope?a.push(o):i.push(o),c[e]=o},s=function(e,n){var t;(t=n,Po("ContextToolbar",uk,t)).each(function(t){"editor"===n.scope?a.push(t):i.push(t),c[e]=t})},e=Q(n);return T(e,function(t){var e=n[t];"contextform"===e.type?o(t,e):"contexttoolbar"===e.type&&s(t,e)}),{forms:t,inNodeScope:i,inEditorScope:a,lookupTable:c,formNavigators:u}},Rk=Un("update-menu-text"),Nk=Un("update-menu-icon"),Pk=function(t,e,o){var r=t.text.map(function(t){return Km($w(t,e,o.providers))}),i=t.icon.map(function(t){return Km(Jw(t,o.providers.icons))}),n=function(t,e){var n=am.getValue(t);return fm.focus(n),Cr(n,"keydown",{raw:e.event().raw()}),Tb.close(n),P.some(!0)},a=t.role.fold(function(){return{}},function(t){return{role:t}}),u=t.tooltip.fold(function(){return{}},function(t){var e=o.providers.translate(t);return{title:e,"aria-label":e}});return Km(Tb.sketch(Gn({},a,{dom:{tag:"button",classes:[e,e+"--select"].concat(E(t.classes,function(t){return e+"--"+t})),attributes:Gn({},u)},components:mg([i.map(function(t){return t.asSpec()}),r.map(function(t){return t.asSpec()}),P.some({dom:{tag:"div",classes:[e+"__select-chevron"],innerHtml:Qm("chevron-down",o.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:_a([rg(t.disabled),Ab.config({}),Yd.config({}),Tm("menubutton-update-display-text",[Qr(t.onAttach),Zr(t.onDetach),Wr(Rk,function(e,n){r.bind(function(t){return t.getOpt(e)}).each(function(t){Yd.set(t,[aa(o.providers.translate(n.event().text()))])})}),Wr(Nk,function(e,n){i.bind(function(t){return t.getOpt(e)}).each(function(t){Yd.set(t,[Jw(n.event().icon(),o.providers.icons)])})})])]),eventOrder:gt(sk,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:_a([jd.config({mode:"special",onLeft:n,onRight:n})]),lazySink:o.getSink,toggleClass:e+"--active",parts:{menu:Tg(0,t.columns,t.presets)},fetch:function(){return Yv.nu(t.fetch)}}))).asSpec()},jk=function(t,e,n,o){var r,i,a,u,c,s="basic"===n.type?function(){return E(n.data,function(t){return iS(t,o.isSelectedFor,o.getPreviewFor)})}:n.getData;return{items:(r=e,i=o,a=function(t,e,n){var o=r.shared.providers.translate(t.title);return"separator"===t.type?{type:"separator",text:o}:"submenu"===t.type?{type:"nestedmenuitem",text:o,disabled:n,getSubmenuItems:function(){return j(t.getStyleItems(),function(t){return u(t,e)})}}:Gn({type:"togglemenuitem",text:o,active:t.isSelected(),disabled:n,onAction:i.onAction(t)},t.getStylePreview().fold(function(){return{}},function(t){return{meta:{style:t}}}))},u=function(t,e){var n="formatter"===t.type&&i.isInvalid(t);return 0===e?n?[]:[a(t,e,!1)]:[a(t,e,n)]},c=function(t){var e=i.shouldHide?0:1;return j(t,function(t){return u(t,e)})},{validateItems:c,getFetch:function(o,r){return function(t){var e=r(),n=c(e);t(Cp(n,fg.CLOSE_ON_EXECUTE,o.shared.providers))}}}),getStyleItems:s}},Uk=function(n,t,e,o){var r=jk(0,t,e,o),i=r.items,a=r.getStyleItems;return Pk({text:o.icon.isSome()?P.none():P.some(""),icon:o.icon,tooltip:P.from(o.tooltip),role:P.none(),fetch:i.getFetch(t,a),onAttach:o.nodeChangeHandler.map(function(e){return function(t){return n.on("nodeChange",e(t))}}).getOr(function(){}),onDetach:o.nodeChangeHandler.map(function(e){return function(t){return n.off("nodeChange",e(t))}}).getOr(function(){}),columns:1,presets:"normal",classes:o.icon.isSome()?[]:["bespoke"]},"tox-tbtn",t.shared)};(Mz=Oz||(Oz={}))[Mz.SemiColon=0]="SemiColon",Mz[Mz.Space=1]="Space";var Wk,Gk,Xk=function(t,e,n,o){var r,i,a=xt(t.settings,e).getOr(n);return{type:"basic",data:(i=a,r=o===Oz.SemiColon?i.replace(/;$/,"").split(";"):i.split(" "),E(r,function(t){var e=t,n=t,o=t.split("=");return 1<o.length&&(e=o[0],n=o[1]),{title:e,format:n}}))}},Yk=[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}],qk=function(n){var t=P.some(function(e){return function(){var t=_(Yk,function(t){return n.formatter.match(t.format)}).fold(function(){return"left"},function(t){return t.title.toLowerCase()});Cr(e,Nk,{icon:"align-"+t})}}),e={type:"basic",data:Yk};return{tooltip:"Align",icon:P.some("align-left"),isSelectedFor:function(t){return function(){return n.formatter.match(t)}},getPreviewFor:function(t){return function(){return P.none()}},onAction:function(t){return function(){n.undoManager.transact(function(){n.focus(),n.formatter.match(t.format)?n.formatter.remove(t.format):n.formatter.apply(t.format)})}},nodeChangeHandler:t,dataset:e,shouldHide:!1,isInvalid:function(t){return!n.formatter.canApply(t.format)}}},Kk=["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Helvetica Neue","sans-serif"],Jk=function(r){var o=function(){var n=function(t){return t?t.split(",")[0]:""},t=r.queryCommandValue("FontName"),e=i.data,o=t?t.toLowerCase():"";return _(e,function(t){var e=t.format;return e.toLowerCase()===o||n(e).toLowerCase()===n(o).toLowerCase()}).orThunk(function(){return 0===(t=o).indexOf("-apple-system")&&(e=t.toLowerCase().split(/['"]?\s*,\s*['"]?/),W(Kk,function(t){return-1<e.indexOf(t.toLowerCase())}))?P.from({title:"System Font",format:o}):P.none();var t,e})},t=P.some(function(n){return function(){var t=r.queryCommandValue("FontName"),e=o().fold(function(){return t},function(t){return t.title});Cr(n,Rk,{text:e})}}),i=Xk(r,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",Oz.SemiColon);return{tooltip:"Fonts",icon:P.none(),isSelectedFor:function(e){return function(){return o().exists(function(t){return t.format===e})}},getPreviewFor:function(t){return function(){return P.some({tag:"div",styleAttr:-1===t.indexOf("dings")?"font-family:"+t:""})}},onAction:function(t){return function(){r.undoManager.transact(function(){r.focus(),r.execCommand("FontName",!1,t.format)})}},nodeChangeHandler:t,dataset:i,shouldHide:!1,isInvalid:function(){return!1}}},$k=function(t,e){return/[0-9.]+px$/.test(t)?(n=72*parseInt(t,10)/96,o=e||0,r=Math.pow(10,o),Math.round(n*r)/r+"pt"):t;var n,o,r},Qk=function(i){var a=function(){var n=P.none(),o=u.data,r=i.queryCommandValue("FontSize");if(r)for(var t=function(t){var e=$k(r,t);n=_(o,function(t){return t.format===r||t.format===e})},e=3;n.isNone()&&0<=e;e--)t(e);return{matchOpt:n,px:r}},t=P.some(function(r){return function(){var t=a(),e=t.matchOpt,n=t.px,o=e.fold(function(){return n},function(t){return t.title});Cr(r,Rk,{text:o})}}),u=Xk(i,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",Oz.Space);return{tooltip:"Font Sizes",icon:P.none(),isSelectedFor:function(e){return function(){return a().matchOpt.exists(function(t){return t.format===e})}},getPreviewFor:function(){return function(){return P.none()}},onAction:function(t){return function(){i.undoManager.transact(function(){i.focus(),i.execCommand("FontSize",!1,t.format)})}},nodeChangeHandler:t,dataset:u,shouldHide:!1,isInvalid:function(){return!1}}},Zk=function(n,t,e){var o=e.parents,r=t();return Mt(o,function(e){return _(r,function(t){return n.formatter.matchNode(e,t.format)})}).orThunk(function(){return n.formatter.match("p")?P.some({title:"Paragraph",format:"p"}):P.none()})},tC=function(o){var t=P.some(function(n){return function(t){var e=Zk(o,function(){return r.data},t).fold(function(){return"Paragraph"},function(t){return t.title});Cr(n,Rk,{text:e})}}),r=Xk(o,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",Oz.SemiColon);return{tooltip:"Blocks",icon:P.none(),isSelectedFor:function(t){return function(){return o.formatter.match(t)}},getPreviewFor:function(e){return function(){var t=o.formatter.get(e);return P.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styleAttr:o.formatter.getCssText(e)})}},onAction:function(t){return function(){o.undoManager.transact(function(){o.focus(),o.formatter.match(t.format)?o.formatter.remove(t.format):o.formatter.apply(t.format)})}},nodeChangeHandler:t,dataset:r,shouldHide:!1,isInvalid:function(t){return!o.formatter.canApply(t.format)}}},eC=function(i){var t=P.some(function(n){var o=function(t){var e=t.items;return e!==undefined&&0<e.length?j(e,o):[{title:t.title,format:t.format}]},r=j(rS(i),o);return function(t){var e=Zk(i,function(){return r},t).fold(function(){return"Paragraph"},function(t){return t.title});Cr(n,Rk,{text:e})}});return{tooltip:"Formats",icon:P.none(),isSelectedFor:function(t){return function(){return i.formatter.match(t)}},getPreviewFor:function(e){return function(){var t=i.formatter.get(e);return t!==undefined?P.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styleAttr:i.formatter.getCssText(e)}):P.none()}},onAction:function(t){return function(){i.undoManager.transact(function(){i.focus(),i.formatter.match(t.format)?i.formatter.remove(t.format):i.formatter.apply(t.format)})}},nodeChangeHandler:t,shouldHide:i.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(t){return!i.formatter.canApply(t.format)}}},nC={file:{title:"File",items:"newdocument restoredraft | preview | print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable tableprops deletetable row column cell"},help:{title:"Help",items:"help"}},oC=function(t,e,n,o){return Pk({text:t.text,icon:t.icon,tooltip:t.tooltip,role:o,fetch:function(e){t.fetch(function(t){e(Cp(t,fg.CLOSE_ON_EXECUTE,n.providers))})},onAttach:function(){},onDetach:function(){},columns:1,presets:"normal",classes:[]},e,n)},rC=function(t){return"string"==typeof t?t.split(" "):t},iC=function(a,u,t){var c=vt(nC,u.menus),e=0<Q(u.menus).length,n=u.menubar===undefined||!0===u.menubar?rC("file edit view insert format tools table help"):rC(!1===u.menubar?"":u.menubar),o=A(n,function(t){return e&&u.menus.hasOwnProperty(t)&&u.menus[t].hasOwnProperty("items")||nC.hasOwnProperty(t)}),r=E(o,function(t){var e,n,o,r,i=c[t];return e={title:i.title,items:rC(i.items)},n=u,r=(o=a,o.getParam("removed_menuitems","")).split(/[ ,]/),{text:e.title,getItems:function(){return j(e.items,function(e){return 0===e.trim().length?[]:H(r,function(t){return t===e})?[]:"separator"===e||"|"===e?[{type:"separator"}]:n.menuItems[e]?[n.menuItems[e]]:[]})}}});return A(r,function(t){return 0<t.getItems().length})},aC=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],uC=function(o,r){return function(t,e){var n=o(t).fold(g(ft.error,Wo),ft.value).getOrDie();return r(n,e)}},cC={button:uC(qS,function(t,e){return n=t,o=e.backstage.shared.providers,Ok(n,o,[]);var n,o}),togglebutton:uC(ZS,function(t,e){return n=t,o=e.backstage.shared.providers,Mk(n,o,[]);var n,o}),menubutton:uC(function(t){return Po("menubutton",KS,t)},function(t,e){return oC(t,"tox-tbtn",e.backstage.shared,P.none())}),splitbutton:uC(function(t){return Po("SplitButton",JS,t)},function(t,e){return Hk(t,e.backstage.shared)}),styleSelectButton:function(t,e){return n=t,o=e.backstage,r=o.styleselect,Uk(n,o,r,eC(n));var n,o,r},fontsizeSelectButton:function(t,e){return n=t,o=e.backstage,r=Qk(n),Uk(n,o,r.dataset,r);var n,o,r},fontSelectButton:function(t,e){return n=t,o=e.backstage,r=Jk(n),Uk(n,o,r.dataset,r);var n,o,r},formatButton:function(t,e){return n=t,o=e.backstage,r=tC(n),Uk(n,o,r.dataset,r);var n,o,r},alignMenuButton:function(t,e){return n=t,o=e.backstage,r=qk(n),Uk(n,o,r.dataset,r);var n,o,r}},sC={styleselect:cC.styleSelectButton,fontsizeselect:cC.fontsizeSelectButton,fontselect:cC.fontSelectButton,formatselect:cC.formatButton,align:cC.alignMenuButton},lC=function(t){var e=t.split("|");return E(e,function(t){return{items:t.trim().split(" ")}})},fC=function(t){return!1===t.toolbar?[]:t.toolbar===undefined||!0===t.toolbar?(n=t.buttons,e=E(aC,function(t){var e=A(t.items,function(t){return it(n,t)||it(sC,t)});return{name:t.name,items:e}}),A(e,function(t){return 0<t.items.length})):x(t.toolbar)?lC(t.toolbar):O(t.toolbar)&&x(t.toolbar[0])?lC(t.toolbar.join(" | ")):t.toolbar;var n,e},dC=function(n,o,r){var t=fC(o),e=E(t,function(t){var e=j(t.items,function(t){return 0===t.trim().length?[]:xt(o.buttons,t.toLowerCase()).fold(function(){return xt(sC,t.toLowerCase()).map(function(t){return t(n,r)}).orThunk(function(){return console.error("No representation for toolbarItem: "+t),P.none()})},function(t){return n=r,xt(cC,(e=t).type).fold(function(){return console.error("skipping button defined by",e),P.none()},function(t){return P.some(t(e,n))});var e,n}).toArray()});return{title:P.from(n.translate(t.name)),items:e}});return A(e,function(t){return 0<t.items.length})},mC=function(i,t,a,c){var n,o,s=sa((n={sink:a,onEscape:function(){return i.focus(),P.some(!0)}},o=Ct([]),Xm.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){o.set([]),Xm.getContent(t).each(function(t){Ji(t.element(),"visibility")}),Ii(t.element(),_k),Ji(t.element(),"width")},inlineBehaviours:_a([Tm("context-toolbar-events",[$r(Ut(),function(t,e){Xm.getContent(t).each(function(t){}),Ii(t.element(),_k),Ji(t.element(),"width")}),Wr(Dk,function(e,n){Ji(e.element(),"width");var t=eu(e.element());Xm.setContent(e,n.event().contents()),_i(e.element(),_k);var o=eu(e.element());Wi(e.element(),"width",t+"px"),Xm.getContent(e).each(function(t){n.event().focus().bind(function(t){return cf(t),lf(e.element())}).orThunk(function(){return jd.focusIn(t),sf()})}),setTimeout(function(){Wi(e.element(),"width",o+"px")},0)}),Wr(Ak,function(t,e){Xm.getContent(t).each(function(t){o.set(o.get().concat([{bar:t,focus:sf()}]))}),Cr(t,Dk,{contents:e.event().forwardContents(),focus:P.none()})}),Wr(Bk,function(e,t){J(o.get()).each(function(t){o.set(o.get().slice(0,o.get().length-1)),Cr(e,Dk,{contents:la(t.bar),focus:t.focus})})})]),jd.config({mode:"special",onEscape:function(e){return J(o.get()).fold(function(){return n.onEscape()},function(t){return kr(e,Bk),P.some(!0)})}})]),lazySink:function(){return ft.value(n.sink)}}))),l=function(){return P.some(Ne.fromDom(i.contentAreaContainer))};i.on("init",function(){var t=i.getBody().ownerDocument.defaultView,e=Jg(Ne.fromDom(t),"scroll",function(){f.get().each(function(t){var e=d.get().getOr(i.selection.getNode()).getBoundingClientRect(),n=i.contentAreaContainer.getBoundingClientRect(),o=e.bottom<0,r=e.top>n.height;o||r?Wi(s.element(),"display","none"):(Ji(s.element(),"display"),is.positionWithin(a,t,s,l()))})});i.on("remove",function(){e.unbind()})});var f=Ct(P.none()),d=Ct(P.none()),e=Ct(null),m=function(t){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:_a([jd.config({mode:"acyclic"}),Tm("pop-dialog-wrap-events",[Qr(function(t){i.shortcuts.add("ctrl+F9","focus statusbar",function(){return jd.focusIn(t)})}),Zr(function(t){i.shortcuts.remove("ctrl+F9")})])])}},u=Gt(function(){return Lk(t,function(t){var e=h(t);Cr(s,Ak,{forwardContents:m(e)})})}),h=function(t){var e,n,o=i.ui.registry.getAll().buttons,r=u();return"contexttoolbar"===t.type?(e=vt(o,r.formNavigators),n=dC(i,{buttons:e,toolbar:t.items},c),GS({uid:Un("context-toolbar"),initGroups:n,onEscape:P.none,cyclicKeying:!0})):Tk(t,c.backstage.shared.providers)};i.on("contexttoolbar-show",function(e){var t=u();xt(t.lookupTable,e.toolbarKey).each(function(t){b(t,e.target===i?P.none():P.some(e)),Xm.getContent(s).each(jd.focusIn)})});var r={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},g={maxHeightFunction:Iu()},v={bubble:ju(12,0,r),layouts:{onLtr:function(){return[oc]},onRtl:function(){return[rc]}},overrides:g},p={bubble:ju(0,12,r),layouts:{onLtr:function(){return[ec,nc,Zu,$u,tc,Qu]},onRtl:function(){return[ec,nc,tc,Qu,Zu,$u]}},overrides:g},b=function(t,e){x();var n,o,r,i=h(t),a=e.map(Ne.fromDom),u=(n=t.position,o=a,r="node"===n?c.backstage.shared.anchors.node(o):c.backstage.shared.anchors.cursor(),gt(r,"line"===n?v:p));f.set(P.some(u)),d.set(e),Xm.showWithin(s,u,m(i),l()),Ji(s.element(),"display")},y=function(){var t=u();Ik(t,i).fold(function(){f.set(P.none()),Xm.hide(s)},function(t){b(t.toolbarApi,P.some(t.elem.dom()))})},x=function(){var t=e.get();null!==t&&(clearTimeout(t),e.set(null))},w=function(t){x(),e.set(t)};i.on("click keyup setContent ObjectResized ResizeEditor",function(t){w(IS.setEditorTimeout(i,y,0))}),i.on("nodeChange",function(t){lf(s.element()).fold(function(){w(IS.setEditorTimeout(i,y,0))},function(t){})})},hC=function(t,n,o){var e=Jg(Ne.fromDom(document),"mousedown",function(e){T([n,o],function(t){t.broadcastOn([Cs()],{target:e.target()})})}),r=Jg(Ne.fromDom(document),"touchstart",function(e){T([n,o],function(t){t.broadcastOn([Cs()],{target:e.target()})})}),i=Jg(Ne.fromDom(document),"mouseup",function(e){0===e.raw().button&&T([n,o],function(t){t.broadcastOn([Os()],{target:e.target()})})}),a=function(e){T([n,o],function(t){t.broadcastOn([Cs()],{target:Ne.fromDom(e.target)})})};t.on("mousedown",a),t.on("touchstart",a);var u=function(e){0===e.button&&T([n,o],function(t){t.broadcastOn([Os()],{target:Ne.fromDom(e.target)})})};t.on("mouseup",u);var c=Jg(Ne.fromDom(window),"scroll",function(e){T([n,o],function(t){t.broadcastEvent(Te(),e)})});t.on("remove",function(){t.off("mousedown",a),t.off("touchstart",a),t.off("mouseup",u),e.unbind(),r.unbind(),i.unbind(),c.unbind()}),t.on("detach",function(){gs(n),gs(o),n.destroy(),o.destroy()})},gC=Ol,vC=sl,pC=Al({factory:function(o,t){var e={focus:jd.focusIn,setMenus:function(t,e){var n=E(e,function(e){var t={text:P.some(e.text),icon:P.none(),tooltip:P.none(),fetch:function(t){t(e.getItems())}};return oC(t,"tox-mbtn",{getSink:o.getSink,providers:o.providers},P.some("menuitem"))});Yd.set(t,n)}};return{uid:o.uid,dom:o.dom,components:[],behaviours:_a([Yd.config({}),Tm("menubar-events",[Qr(function(t){o.onSetup(t)}),Wr(_t(),function(n,t){da(n.element(),".tox-mbtn--active").each(function(e){ma(t.event().target(),".tox-mbtn").each(function(t){nn(e,t)||n.getSystem().getByDom(e).each(function(e){n.getSystem().getByDom(t).each(function(t){Tb.expand(t),Tb.close(e),fm.focus(t)})})})})}),Wr(_e(),function(n,t){t.event().prevFocus().bind(function(t){return n.getSystem().getByDom(t).toOption()}).each(function(e){t.event().newFocus().bind(function(t){return n.getSystem().getByDom(t).toOption()}).each(function(t){Tb.isOpen(e)&&(Tb.expand(t),Tb.close(e))})})})]),jd.config({mode:"flow",selector:".tox-mbtn",onEscape:function(t){return o.onEscape(t),P.some(!0)}}),Up.config({})]),apis:e,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Zo("dom"),Zo("uid"),Zo("onEscape"),Zo("getSink"),Zo("providers"),dr("onSetup",N)],apis:{focus:function(t,e){t.focus(e)},setMenus:function(t,e,n){t.setMenus(e,n)}}}),bC=function(e,t){return t.getAnimationRoot.fold(function(){return e.element()},function(t){return t(e)})},yC=function(t){return t.dimension.property},xC=function(t,e){return t.dimension.getDimension(e)},wC=function(t,e){var n=bC(t,e);Ni(n,[e.shrinkingClass,e.growingClass])},zC=function(t,e){Ii(t.element(),e.openClass),_i(t.element(),e.closedClass),Wi(t.element(),yC(e),"0px"),$i(t.element())},SC=function(t,e){Ii(t.element(),e.closedClass),_i(t.element(),e.openClass),Ji(t.element(),yC(e))},kC=function(t,e,n,o){n.setCollapsed(),Wi(t.element(),yC(e),xC(e,t.element())),$i(t.element()),wC(t,e),zC(t,e),e.onStartShrink(t),e.onShrunk(t)},CC=function(t,e,n,o){var r=o.getOrThunk(function(){return xC(e,t.element())});n.setCollapsed(),Wi(t.element(),yC(e),r),$i(t.element());var i=bC(t,e);Ii(i,e.growingClass),_i(i,e.shrinkingClass),zC(t,e),e.onStartShrink(t)},OC=function(t,e,n){var o=xC(e,t.element());("0px"===o?kC:CC)(t,e,n,P.some(o))},MC=function(t,e,n){var o=bC(t,e),r=Li(o,e.shrinkingClass),i=xC(e,t.element());SC(t,e);var a=xC(e,t.element());(r?function(){Wi(t.element(),yC(e),i),$i(t.element())}:function(){zC(t,e)})(),Ii(o,e.shrinkingClass),_i(o,e.growingClass),SC(t,e),Wi(t.element(),yC(e),a),n.setExpanded(),e.onStartGrow(t)},HC=function(t,e,n){var o=bC(t,e);return!0===Li(o,e.growingClass)},VC=function(t,e,n){var o=bC(t,e);return!0===Li(o,e.shrinkingClass)},EC=Object.freeze({grow:function(t,e,n){n.isExpanded()||MC(t,e,n)},shrink:function(t,e,n){n.isExpanded()&&OC(t,e,n)},immediateShrink:function(t,e,n){n.isExpanded()&&kC(t,e,n,P.none())},hasGrown:function(t,e,n){return n.isExpanded()},hasShrunk:function(t,e,n){return n.isCollapsed()},isGrowing:HC,isShrinking:VC,isTransitioning:function(t,e,n){return!0===HC(t,e)||!0===VC(t,e)},toggleGrow:function(t,e,n){(n.isExpanded()?OC:MC)(t,e,n)},disableTransitions:wC}),TC=Object.freeze({exhibit:function(t,e){var n=e.expanded;return zi(n?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:wt(e.dimension.property,"0px")})},events:function(n,o){return Pr([$r(Ut(),function(t,e){e.event().raw().propertyName===n.dimension.property&&(wC(t,n),o.isExpanded()&&Ji(t.element(),n.dimension.property),(o.isExpanded()?n.onGrown:n.onShrunk)(t))})])}}),AC=[Zo("closedClass"),Zo("openClass"),Zo("shrinkingClass"),Zo("growingClass"),ur("getAnimationRoot"),Sa("onShrunk"),Sa("onStartShrink"),Sa("onGrown"),Sa("onStartGrow"),dr("expanded",!1),tr("dimension",Go("property",{width:[Ma("property","width"),Ma("getDimension",function(t){return eu(t)+"px"})],height:[Ma("property","height"),Ma("getDimension",function(t){return ru(t)+"px"})]}))],BC=Ia({fields:AC,name:"sliding",active:TC,apis:EC,state:Object.freeze({init:function(t){var e=Ct(t.expanded);return xi({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:v(e.set,!1),setExpanded:v(e.set,!0),readState:function(){return"expanded: "+e.get()}})}})}),DC="container",_C=[Es("slotBehaviours",[])],FC=function(t){return"<alloy.field."+t+">"},IC=function(r,t,e){var n,o=function(t){return zl(r)},i=function(n,o){return void 0===o&&(o=undefined),function(t,e){return bl(t,r,e).map(function(t){return n(t,e)}).getOr(o)}},a=function(t,e){return"true"!==Mn(t.element(),"aria-hidden")},u=i(a,!1),c=i(function(t,e){if(a(t)){var n=t.element();Wi(n,"display","none"),Cn(n,"aria-hidden","true"),Cr(t,Fe(),{name:e,visible:!1})}}),s=(n=c,function(e,t){T(t,function(t){return n(e,t)})}),l=i(function(t,e){if(!a(t)){var n=t.element();Ji(n,"display"),Vn(n,"aria-hidden"),Cr(t,Fe(),{name:e,visible:!0})}}),f={getSlotNames:o,getSlot:function(t,e){return bl(t,r,e)},isShowing:u,hideSlot:c,hideAllSlots:function(t){return s(t,o())},showSlot:l};return{uid:r.uid,dom:r.dom,components:t,behaviours:Ts(r.slotBehaviours),apis:f}},LC=et({getSlotNames:function(t,e){return t.getSlotNames(e)},getSlot:function(t,e,n){return t.getSlot(e,n)},isShowing:function(t,e,n){return t.isShowing(e,n)},hideSlot:function(t,e,n){return t.hideSlot(e,n)},hideAllSlots:function(t,e){return t.hideAllSlots(e)},showSlot:function(t,e,n){return t.showSlot(e,n)}},bi),RC=Gn({},LC,{sketch:function(t){var n,e=(n=[],{slot:function(t,e){return n.push(t),ml(DC,FC(t),e)},record:function(){return n}}),o=t(e),r=e.record(),i=E(r,function(t){return rl({name:t,pname:FC(t)})});return Hl(DC,_C,i,IC,o)}}),NC=function(t){return{element:function(){return t.element().dom()}}},PC=function(e){return RC.sketch(function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:(o=t,i=e,E(i,function(t){var e=t.name,n=t.settings;return o.slot(e,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:kh([Qr(function(t){n.onrender&&n.onrender(NC(t))}),Wr(Fe(),function(o,t){var r=t.event();_(i,function(t){return t.name===r.name()}).each(function(t){var e=t.settings,n=r.visible()?e.onshow:e.onhide;n&&n(NC(o))})})])})})),slotBehaviours:kh([Qr(function(t){return RC.hideAllSlots(t)})])};var o,i})},jC=Un("FixSizeEvent"),UC=Un("AutoSizeEvent"),WC={setSidebar:function(t,e){Il.getCurrent(t).each(function(t){return Yd.set(t,[PC(e)])})},toggleSidebar:function(t,n){Il.getCurrent(t).each(function(e){Il.getCurrent(e).each(function(t){BC.hasGrown(e)?RC.isShowing(t,n)?BC.shrink(e):(RC.hideAllSlots(t),RC.showSlot(t,n)):(RC.hideAllSlots(t),RC.showSlot(t,n),BC.grow(e))})})},whichSidebar:function(t){return Il.getCurrent(t).bind(function(t){return BC.isGrowing(t)||BC.hasGrown(t)?Il.getCurrent(t).bind(function(e){return _(RC.getSlotNames(e),function(t){return RC.isShowing(e,t)})}):P.none()})},renderSidebar:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:_a([Up.config({}),fm.config({}),BC.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){Il.getCurrent(t).each(RC.hideAllSlots),kr(t,UC)},onGrown:function(t){kr(t,UC)},onStartGrow:function(t){Cr(t,jC,{width:qi(t.element(),"width").getOr("")})},onStartShrink:function(t){Cr(t,jC,{width:eu(t.element())+"px"})}}),Yd.config({}),Il.config({find:function(t){var e=Yd.contents(t);return K(e)}})])}],behaviours:_a([Nx(0),Tm("sidebar-sliding-events",[Wr(jC,function(t,e){Wi(t.element(),"width",e.event().width())}),Wr(UC,function(t,e){Ji(t.element(),"width")})])])}}},GC=vC.optional({factory:pC,name:"menubar",schema:[Zo("dom"),Zo("getSink")]}),XC=vC.optional({factory:{sketch:function(t){return GS({uid:t.uid,onEscape:function(){return t.onEscape(),P.some(!0)},cyclicKeying:!1,initGroups:[]})}},name:"toolbar",schema:[Zo("dom"),Zo("onEscape")]}),YC=vC.optional({name:"socket",schema:[Zo("dom")]}),qC=vC.optional({factory:{sketch:WC.renderSidebar},name:"sidebar",schema:[Zo("dom")]}),KC=Bl({name:"OuterContainer",factory:function(n,t,e){var o={getSocket:function(t){return gC.getPart(t,n,"socket")},setSidebar:function(t,e){gC.getPart(t,n,"sidebar").each(function(t){return WC.setSidebar(t,e)})},toggleSidebar:function(t,e){gC.getPart(t,n,"sidebar").each(function(t){return WC.toggleSidebar(t,e)})},whichSidebar:function(t){return gC.getPart(t,n,"sidebar").bind(WC.whichSidebar).getOrNull()},getToolbar:function(t){return gC.getPart(t,n,"toolbar")},setToolbar:function(t,e){gC.getPart(t,n,"toolbar").each(function(t){NS.setGroups(t,e)})},focusToolbar:function(t){gC.getPart(t,n,"toolbar").each(function(t){jd.focusIn(t)})},setMenubar:function(t,e){gC.getPart(t,n,"menubar").each(function(t){pC.setMenus(t,e)})},focusMenubar:function(t){gC.getPart(t,n,"menubar").each(function(t){pC.focus(t)})}};return{uid:n.uid,dom:n.dom,components:t,apis:o,behaviours:n.behaviours}},configFields:[Zo("dom"),Zo("behaviours")],partFields:[GC,XC,YC,qC],apis:{getSocket:function(t,e){return t.getSocket(e)},setSidebar:function(t,e,n){t.setSidebar(e,n)},toggleSidebar:function(t,e,n){t.toggleSidebar(e,n)},whichSidebar:function(t,e){return t.whichSidebar(e)},getToolbar:function(t,e){return t.getToolbar(e)},setToolbar:function(t,e,n){var o=E(n,function(t){return WS(t)});t.setToolbar(e,o)},setMenubar:function(t,e,n){t.setMenubar(e,n)},focusMenubar:function(t,e){t.focusMenubar(e)},focusToolbar:function(t,e){t.focusToolbar(e)}}}),JC=function(t){return t.fire("SkinLoaded")},$C=function(t){return t.fire("ResizeEditor")},QC=function(t){var e=function(){t._skinLoaded=!0,JC(t)};return function(){t.initialized?e():t.on("init",e)}},ZC=function(t,e){var n,o=function(t){var e=t.settings,n=e.skin,o=e.skin_url;if(!1!==n){var r=n||"oxide";o=o?t.documentBaseURI.toAbsolute(o):xv.baseURL+"/skins/ui/"+r}return o}(e);o&&(n=o+"/skin.min.css",e.contentCSS.push(o+(t?"/content.inline":"/content")+".min.css")),0==(!1===e.getParam("skin"))&&n?yv.DOM.styleSheetLoader.load(n,QC(e)):QC(e)()},tO=v(ZC,!1),eO=v(ZC,!0),nO=function(t){return function(e){var n=t.outerContainer;en("*",n.element()).forEach(function(t){n.getSystem().getByDom(t).each(function(t){t.hasConfigured(Ih)&&("readonly"===e.mode?Ih.disable(t):Ih.enable(t))})})}},oO={render:function(n,o,t,e,r){var i,a;tO(n),i=Ne.fromDom(r.targetNode),a=o.mothership,hs(i,a,fn),ms(_r(),o.uiMothership),n.on("init",function(){KC.setToolbar(o.outerContainer,dC(n,t,{backstage:e})),KC.setMenubar(o.outerContainer,iC(n,t)),KC.setSidebar(o.outerContainer,n.sidebars||[]),n.readonly&&nO(o)({mode:"readonly"})});var u=KC.getSocket(o.outerContainer).getOrDie("Could not find expected socket element");return n.on("SwitchMode",nO(o)),n.getParam("readonly",!1,"boolean")&&n.setMode("readonly"),n.addCommand("ToggleSidebar",function(t,e){KC.toggleSidebar(o.outerContainer,e),n.fire("ToggleSidebar")}),n.addQueryValueHandler("ToggleSidebar",function(){return KC.whichSidebar(o.outerContainer)}),{iframeContainer:u.element().dom(),editorContainer:o.outerContainer.element().dom()}},getBehaviours:function(t){return[]}},rO=function(n,e){return un(n).orThunk(function(){var t=Ne.fromTag("span");ln(n,t);var e=un(t);return vn(t),e}).map(function(t){return qa(t).translate(-e.left(),-e.top())}).getOrThunk(function(){return Xa(0,0)})},iO=dt([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),aO=function(e){return function(t){return t.translate(-e.left(),-e.top())}},uO=function(e){return function(t){return t.translate(e.left(),e.top())}},cO=function(n){return function(t,e){return D(n,function(t,e){return e(t)},Xa(t,e))}},sO=function(t,e,n){return t.fold(cO([uO(n),aO(e)]),cO([aO(e)]),cO([]))},lO=function(t,e,n){return t.fold(cO([uO(n)]),cO([]),cO([uO(e)]))},fO=function(t,e,n){return t.fold(cO([]),cO([aO(n)]),cO([uO(e),aO(n)]))},dO=function(t,e,n){return t.fold(function(t,e){return{position:"absolute",left:t+"px",top:e+"px"}},function(t,e){return{position:"absolute",left:t-n.left()+"px",top:e-n.top()+"px"}},function(t,e){return{position:"fixed",left:t+"px",top:e+"px"}})},mO=iO.offset,hO=iO.absolute,gO=iO.fixed,vO=function(t,e){_i(t.element(),e.transitionClass),Ii(t.element(),e.fadeOutClass),_i(t.element(),e.fadeInClass)},pO=function(t,e){_i(t.element(),e.transitionClass),Ii(t.element(),e.fadeInClass),_i(t.element(),e.fadeOutClass)},bO=function(t,e){return t.y()>=e.y()&&t.bottom()<=e.bottom()},yO=function(t,e){return Hn(t,e)?P.some(parseInt(Mn(t,e),10)):P.none()},xO=function(o,r,i){return(a=o,t=r,e=a.element(),yO(e,t.leftAttr).bind(function(o){return yO(e,t.topAttr).map(function(t){var e=eu(a.element()),n=ru(a.element());return yu(o,t,e,n)})})).bind(function(t){return bO(t,i)?(e=r,n=o.element(),Vn(n,e.leftAttr),Vn(n,e.topAttr),P.some(hO(t.x(),t.y()))):P.none();var e,n});var a,t,e},wO=function(t,e,n,o,r){var i=qa(t.element()),a=yu(i.left(),i.top(),eu(t.element()),ru(t.element()));if(bO(a,n))return P.none();u=t,c=e,s=i.left(),l=i.top(),f=u.element(),Cn(f,c.leftAttr,s),Cn(f,c.topAttr,l);var u,c,s,l,f,d=hO(i.left(),i.top()),m=sO(d,o,r),h=hO(n.x(),n.y()),g=sO(h,o,r),v=a.y()<=n.y()?g.top():g.top()+n.height()-a.height();return P.some(gO(m.left(),v))},zO=function(i,t,e){var a=t.lazyViewport(i);t.contextual.each(function(r){r.lazyContext(i).each(function(t){var e,n,o=xu(t);n=a,((e=o).y()<n.bottom()&&e.bottom()>n.y()?vO:pO)(i,r)})});var n,o,r,u,c,s=on(i.element()),l=Ja(s),f=rO(i.element(),l);(n=i,o=t,r=a,u=l,c=f,qi(n.element(),"position").is("fixed")?xO(n,o,r):wO(n,o,r,u,c)).each(function(t){var e=dO(t,0,f);Gi(i.element(),e)})},SO=Object.freeze({refresh:zO}),kO=Object.freeze({events:function(o,t){return Pr([Wr(Ut(),function(e,n){o.contextual.each(function(t){nn(e.element(),n.event().target())&&(Ii(e.element(),t.transitionClass),n.stop())})}),Wr(Te(),function(t,e){zO(t,o)})])}}),CO=[fr("contextual",[Zo("fadeInClass"),Zo("fadeOutClass"),Zo("transitionClass"),Zo("lazyContext")]),dr("lazyViewport",function(t){var e=Ja();return yu(e.left(),e.top(),window.innerWidth,window.innerHeight)}),Zo("leftAttr"),Zo("topAttr")],OO=Ia({fields:CO,name:"docking",active:kO,apis:SO}),MO={render:function(t,e,n,o,r){var i,a=yv.DOM;eO(t);var u=function(){qi(i.element(),"position").is("fixed")||Gi(i.element(),{top:qa(Ne.fromDom(t.getBody())).top()-ru(i.element())+"px",left:qa(Ne.fromDom(t.getBody())).left()+"px"}),OO.refresh(i)},c=function(){Wi(e.outerContainer.element(),"display","flex"),a.addClass(t.getBody(),"mce-edit-focus"),u(),OO.refresh(i)},s=function(){e.outerContainer&&(Wi(e.outerContainer.element(),"display","none"),a.removeClass(t.getBody(),"mce-edit-focus"))};return t.on("focus",function(){i?c():(i=e.outerContainer,ms(_r(),e.mothership),ms(_r(),e.uiMothership),KC.setToolbar(e.outerContainer,dC(t,n,{backstage:o})),KC.setMenubar(e.outerContainer,iC(t,n)),Gi(i.element(),{position:"absolute",top:qa(Ne.fromDom(t.getBody())).top()-ru(i.element())+"px",left:qa(Ne.fromDom(t.getBody())).left()+"px"}),u(),c(),t.on("nodeChange ResizeWindow",u),t.on("activate",c),t.on("deactivate",s),t.nodeChanged())}),t.on("blur hide",s),{editorContainer:e.outerContainer.element().dom()}},getBehaviours:function(e){return[OO.config({leftAttr:"data-dock-left",topAttr:"data-dock-top",contextual:{lazyContext:function(t){return P.from(e).map(function(t){return Ne.fromDom(t.getBody())})},fadeInClass:"tox-toolbar-dock-fadein",fadeOutClass:"tox-toolbar-dock-fadeout",transitionClass:"tox-toolbar-dock-transition"}}),fm.config({})]}},HO=function(t,e){return{anchor:"makeshift",x:t,y:e}},VO=function(t,e){var n,o,r,i=yv.DOM.getPos(t);return n=e,o=i.x,r=i.y,HO(n.x+o,n.y+r)},EO=function(t,e){return"contextmenu"===e.type?t.inline?HO((o=e).pageX,o.pageY):VO(t.getContentAreaContainer(),HO((n=e).clientX,n.clientY)):TO(t);var n,o},TO=function(t){return{anchor:"selection",root:Ne.fromDom(t.selection.getNode())}},AO=function(t){return"string"==typeof t?t.split(/[ ,]/):t},BO=function(t,e,n){var o,r,i=t.ui.registry.getAll().contextMenus;return(o=t.settings,r=e,it(o,r)?P.some(o[r]):P.none()).map(AO).getOrThunk(function(){return A(AO(n),function(t){return it(i,t)})})},DO=function(t){return t.settings.contextmenu_never_use_native||!1},_O=function(t){return BO(t,"contextmenu","link image imagetools table spellchecker configurepermanentpen")},FO=function(t){return x(t)?"|"===t:"separator"===t.type},IO={type:"separator"},LO=function(e){if(x(e))return e;switch(e.type){case"separator":return IO;case"submenu":return{type:"nestedmenuitem",text:e.text,icon:e.icon,getSubmenuItems:function(){var t=e.getSubmenuItems();return x(t)?t:E(t,LO)}};default:return{type:"menuitem",text:e.text,icon:e.icon,onAction:(n=e.onAction,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n()})}}var n},RO=function(t,e){if(0===e.length)return t;var n=J(t).filter(function(t){return!FO(t)}).fold(function(){return[]},function(t){return[IO]});return t.concat(n).concat(e).concat([IO])},NO=function(d,t,m){var h=sa(Xm.sketch({dom:{tag:"div"},lazySink:t,onEscape:function(){return d.focus()},fireDismissalEventInstead:{},inlineBehaviours:_a([Tm("dismissContextMenu",[Wr(De(),function(t,e){ks.close(t),d.focus()})])])}));d.on("contextmenu",function(t){if(e=d,!t.ctrlKey||DO(e)){var e,n,r,i,o,a=2!==t.button||t.target===d.getBody(),u=a?(n=d,{anchor:"node",node:P.some(Ne.fromDom(n.selection.getNode())),root:Ne.fromDom(n.getBody())}):EO(d,t),c=d.ui.registry.getAll(),s=_O(d),l=a?d.selection.getStart(!0):t.target,f=(r=c.contextMenus,i=l,0<(o=D(s,function(t,e){if(it(r,e)){var n=r[e].update(i);if(x(n))return RO(t,n.split(" "));if(0<n.length){var o=E(n,LO);return RO(t,o)}return t}return t.concat([e])},[])).length&&FO(o[o.length-1])&&o.pop(),o);0<f.length&&(t.preventDefault(),Xm.showMenuAt(h,u,{menu:{markers:Vg("normal")},data:Cp(f,fg.CLOSE_ON_EXECUTE,m.providers)}))}})},PO=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?P.some(parseInt(t,10)):P.none()},jO=function(t){return k(t)?t+"px":t},UO="data-initial-z-index",WO=function(t,e){var n;t.getSystem().addToGui(e),an((n=e).element()).each(function(e){qi(e,"z-index").each(function(t){Cn(e,UO,t)}),Wi(e,"z-index",Xi(n.element(),"z-index"))})},GO=function(t){an(t.element()).each(function(t){var e=Mn(t,UO);Hn(t,UO)?Wi(t,"z-index",e):Ji(t,"z-index"),Vn(t,UO)}),t.getSystem().removeFromGui(t)},XO=function(t,e,n,o){return(r=t,i=e,a=r.element(),u=parseInt(Mn(a,i.leftAttr),10),c=parseInt(Mn(a,i.topAttr),10),isNaN(u)||isNaN(c)?P.none():P.some(Xa(u,c))).fold(function(){return n},function(t){return gO(t.left()+o.left(),t.top()+o.top())});var r,i,a,u,c},YO=function(t,e,n,o,r,i){var a,u,c,s=XO(t,e,n,o),l=KO(t,e,s,r,i),f=sO(s,r,i);return a=e,u=f,c=t.element(),Cn(c,a.leftAttr,u.left()+"px"),Cn(c,a.topAttr,u.top()+"px"),l.fold(function(){return{coord:gO(f.left(),f.top()),extra:P.none()}},function(t){return{coord:t.output(),extra:t.extra()}})},qO=function(t,e){var n,o;n=e,o=t.element(),Vn(o,n.leftAttr),Vn(o,n.topAttr)},KO=function(t,e,g,v,p){var n=e.getSnapPoints(t);return Mt(n,function(t){var e,n,o,r,i,a,u,c,s,l,f,d,m,h=t.sensor();return e=g,n=h,o=t.range().left(),r=t.range().top(),u=lO(e,i=v,a=p),c=lO(n,i,a),Math.abs(u.left()-c.left())<=o&&Math.abs(u.top()-c.top())<=r?P.some({output:U((s=t.output(),l=g,f=v,d=p,m=function(o,r){return function(t,e){var n=o(l,f,d);return r(t.getOr(n.left()),e.getOr(n.top()))}},s.fold(m(fO,iO.offset),m(lO,iO.absolute),m(sO,iO.fixed)))),extra:t.extra}):P.none()})},JO=function(n,t,i,a,u,c){return t.fold(function(){var t,n,o,e=(t=i,n=c.left(),o=c.top(),t.fold(function(t,e){return iO.offset(t+n,e+o)},function(t,e){return iO.absolute(t+n,e+o)},function(t,e){return iO.fixed(t+n,e+o)})),r=sO(e,a,u);return gO(r.left(),r.top())},function(e){var t=YO(n,e,i,c,a,u);return t.extra.each(function(t){e.onSensor(n,t)}),t.coord})},$O=function(t,e,n){var o,r=e.getTarget(t.element());if(e.repositionTarget){var i=on(t.element()),a=Ja(i),u=rO(r,a),c=qi(o=r,"left").bind(function(n){return qi(o,"top").bind(function(e){return qi(o,"position").map(function(t){return("fixed"===t?gO:mO)(parseInt(n,10),parseInt(e,10))})})}).getOrThunk(function(){var t=qa(o);return hO(t.left(),t.top())}),s=JO(t,e.snaps,c,a,u,n),l=dO(s,0,u);Gi(r,l)}e.onDrag(t,r,n)},QO=fr("snaps",[Zo("getSnapPoints"),Sa("onSensor"),Zo("leftAttr"),Zo("topAttr"),dr("lazyViewport",function(){var t=Ja();return{x:t.left,y:t.top,width:U(window.innerWidth),height:U(window.innerHeight),bottom:U(t.top()+window.innerHeight),right:U(t.left()+window.innerWidth)}})]),ZO=Object.freeze({getData:function(t){return P.from(Xa(t.x(),t.y()))},getDelta:function(t,e){return Xa(e.left()-t.left(),e.top()-t.top())}}),tM=[dr("useFixed",!1),Zo("blockerClass"),dr("getTarget",d),dr("onDrag",N),dr("repositionTarget",!0),Sa("onDrop"),QO,Ma("dragger",{handlers:function(u,c){return Pr([Wr(Tt(),function(e,t){if(0===t.event().raw().button){t.stop();var n,o={drop:function(){i()},delayDrop:function(){a.schedule()},forceDrop:function(){i()},move:function(t){a.cancel(),c.update(ZO,t).each(function(t){$O(e,u,t)})}},r=e.getSystem().build(pv.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[u.blockerClass]},events:(n=o,Pr([Wr(Tt(),n.forceDrop),Wr(Dt(),n.drop),Wr(At(),function(t,e){n.move(e.event())}),Wr(Bt(),n.delayDrop)]))})),i=function(){GO(r),u.snaps.each(function(t){qO(e,t)});var t=u.getTarget(e.element());u.onDrop(e,t)},a=Zg(i,200);c.reset(),WO(e,r)}})])}})],eM=Object.freeze({getData:function(t){var e,n=t.raw().touches;return 1===n.length?(e=n[0],P.some(Xa(e.clientX,e.clientY))):P.none()},getDelta:function(t,e){return Xa(e.left()-t.left(),e.top()-t.top())}}),nM=tM,oM=[dr("useFixed",!1),dr("getTarget",d),dr("onDrag",N),dr("repositionTarget",!0),dr("onDrop",N),QO,Ma("dragger",{handlers:function(o,r){return Pr([Jr(Ht()),Wr(Vt(),function(e,t){t.stop(),r.update(eM,t.event()).each(function(t){$O(e,o,t)})}),Wr(Et(),function(e,t){o.snaps.each(function(t){qO(e,t)});var n=o.getTarget(e.element());r.reset(),o.onDrop(e,n)})])}})],rM=Object.freeze({mouse:nM,touch:oM}),iM=Object.freeze({init:function(){var i=P.none(),t=U({});return xi({readState:t,reset:function(){i=P.none()},update:function(r,t){return r.getData(t).bind(function(t){return e=r,n=t,o=i.map(function(t){return e.getDelta(t,n)}),i=P.some(n),o;var e,n,o})}})}}),aM=Ra({branchKey:"mode",branches:rM,name:"dragging",active:{events:function(t,e){return t.dragger.handlers(t,e)}},extra:{snap:We(["sensor","range","output"],["extra"])},state:iM});(Gk=Wk||(Wk={}))[Gk.None=0]="None",Gk[Gk.Both=1]="Both",Gk[Gk.Vertical=2]="Vertical";var uM,cM,sM,lM,fM,dM=function(t,e,n,o){var r=t+e,i=n.filter(function(t){return r<t}),a=o.filter(function(t){return t<r});return i.or(a).getOr(r)},mM=function(t,e,n,o,r){var i,a,u={};return u.height=dM(o,e.top(),zv(t),(i=t,P.from(i.getParam("max_height")).filter(k))),n===Wk.Both&&(u.width=dM(r,e.left(),wv(t),(a=t,P.from(a.getParam("max_width")).filter(k)))),u},hM=function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1},gM=function(i,a){return a.delimiter||(a.delimiter="\xbb"),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:_a([jd.config({mode:"flow",selector:"div[role=button]"}),Up.config({}),Yd.config({}),Tm("elementPathEvents",[Qr(function(r,t){i.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return jd.focusIn(r)}),i.on("nodeChange",function(t){var e,o,n=function(t){for(var e=[],n=t.length;0<n--;){var o=t[n];if(1===o.nodeType&&!hM(o)){var r=i.fire("ResolveName",{name:o.nodeName.toLowerCase(),target:o});if(r.isDefaultPrevented()||e.push({name:r.name,element:o}),r.isPropagationStopped())break}}return e}(t.parents);0<n.length&&Yd.set(r,(e=E(n||[],function(e,t){return qm.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":t,"tab-index":-1,"aria-level":t+1},innerHtml:e.name},action:function(t){i.focus(),i.selection.select(e.element),i.nodeChanged()}})}),o={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+a.delimiter+" "}},D(e.slice(1),function(t,e){var n=t;return n.push(o),n.push(e),n},[e[0]])))})})])]),components:[]}},vM=function(s,t){var e,n,o,r,i,a,u,c,l,f,d,m=function(c){return{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize")},innerHtml:Qm("resize-handle",t.icons)},behaviours:_a([aM.config({mode:"mouse",repositionTarget:!1,onDrag:function(t,e,n){var o,r,i,a,u;o=s,r=n,i=c,a=Ne.fromDom(o.getContainer()),u=mM(o,r,i,o.getContainer().scrollHeight,eu(a)),tt(u,function(t,e){return Wi(a,e,t+"px")}),$C(o)},blockerClass:"tox-blocker"})])}};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(d=[],s.getParam("elementpath",!0,"boolean")&&d.push(gM(s,{})),le(s.settings.plugins,"wordcount")&&d.push((a=s,u=t,l=function(t,e,n){return Yd.set(t,[aa(u.translate(["{0} "+n,e[n]]))])},qm.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:_a([Up.config({}),Yd.config({}),am.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Tm("wordcount-events",[Wr(jt(),function(t){var e=am.getValue(t),n="words"===e.mode?"characters":"words";am.setValue(t,{mode:n,count:e.count}),l(t,e.count,n)}),Qr(function(n){a.on("wordCountUpdate",function(t){var e=am.getValue(n).mode;am.setValue(n,{mode:e,count:t.wordCount}),l(n,t.wordCount,e)})})])]),eventOrder:(c={},c[jt()]=["wordcount-events","alloy.base.behaviour"],c)}))),s.getParam("branding",!0,"boolean")&&d.push((f='<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+Yh.translate(["Powered by {0}","Tiny"])+'">Tiny</a>',{dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:Yh.translate(["Powered by {0}",f])}})),r=0<d.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:d}]:[],n=!le((e=s).settings.plugins,"autoresize"),i=!1===(o=e.getParam("resize",n))?Wk.None:"both"===o?Wk.Both:Wk.Vertical,i!==Wk.None&&r.push(m(i)),r)}},pM=function(f){var t,e,n=f.getParam("inline",!1,"boolean"),s=n?MO:oO,o=P.none(),r=Yh.isRtl()?{attributes:{dir:"rtl"}}:{},l=sa({dom:Gn({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"]},r),behaviours:_a([is.config({useFixed:!1})])}),i=Km({dom:{tag:"div",classes:["tox-anchorbar"]}}),d=FS(l,f,function(){return o.bind(function(t){return i.getOpt(t)}).getOrDie("Could not find a toolbar element")}),m=function(){return ft.value(l)},a=KC.parts().menubar({dom:{tag:"div",classes:["tox-menubar"]},getSink:m,providers:d.shared.providers,onEscape:function(){f.focus()}}),u=KC.parts().toolbar({dom:{tag:"div",classes:["tox-toolbar"]},onEscape:function(){f.focus()}}),c=KC.parts().socket({dom:{tag:"div",classes:["tox-edit-area"]}}),h=KC.parts().sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),g=f.getParam("statusbar",!0,"boolean")&&!n?P.some(vM(f,d.shared.providers)):P.none(),v={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[c,h]},p=(e=(t=f).getParam("toolbar"),(O(e)?0<e.length:!1!==t.getParam("toolbar",!0,"boolean"))||Sv(f).isSome()),b=!1!==f.getParam("menubar",!0,"boolean"),y=R([b?[a]:[],p?[u]:[],[i.asSpec()],n?[]:[v]]),x=R([[{dom:{tag:"div",classes:["tox-editor-container"]},components:y}],n?[]:g.toArray()]),w=Gn({role:"application"},Yh.isRtl()?{dir:"rtl"}:{}),z=sa(KC.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(n?["tox-tinymce-inline"]:[]),styles:{visibility:"hidden"},attributes:w},components:x,behaviours:_a(s.getBehaviours(f).concat([jd.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-sidebar--sliding-open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a"})]))}));o=P.some(z),f.shortcuts.add("alt+F9","focus menubar",function(){KC.focusMenubar(z)}),f.shortcuts.add("alt+F10","focus toolbar",function(){KC.focusToolbar(z)});var S=bv(z),k=bv(l);hC(f,S,k);var C=function(t){var e,n=yv.DOM,o=f.getParam("width",n.getStyle(t,"width")),r=(e=f).getParam("height",Math.max(e.getElement().offsetHeight,200)),i=wv(f),a=zv(f),u=PO(o).bind(function(e){return jO(i.map(function(t){return Math.max(e,t)}))}).getOr(jO(o)),c=PO(r).bind(function(e){return a.map(function(t){return Math.max(e,t)})}).getOr(r),s=jO(u);if(Ki("div","width",s)&&Wi(z.element(),"width",s),!f.inline){var l=jO(c);Ki("div","height",l)?Wi(z.element(),"height",l):Wi(z.element(),"height","200px")}return c};return{mothership:S,uiMothership:k,backstage:d,renderUI:function(){NO(f,m,d.shared);var t=f.ui.registry.getAll(),e=t.buttons,n=t.menuItems,o=t.contextToolbars,r={menuItems:n,buttons:e,menus:f.settings.menu?et(f.settings.menu,function(t){return vt(t,{items:t.items})}):{},menubar:f.settings.menubar,toolbar:Sv(f).getOr(f.getParam("toolbar",!0)),sidebar:f.sidebars?f.sidebars:[]};mC(f,o,l,{backstage:d});var i=f.getElement(),a=C(i),u={mothership:S,uiMothership:k,outerContainer:z},c={targetNode:i,height:a};return s.render(f,u,r,d,c)},getUi:function(){return{channels:{broadcastAll:k.broadcast,broadcastOn:k.broadcastOn,register:function(){}}}}}},bM=function(n){var e=function(e){return function(t){return n.formatter?n.formatter.formatChanged(e.name,t.setActive):n.on("init",function(){n.formatter.formatChanged(e.name,t.setActive)}),function(){}}};wz.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,onAction:function(){return n.execCommand(t.cmd)},icon:t.icon,onSetup:e(t)})});var t={name:"alignnone",text:"No alignment",cmd:"JustifyNone",icon:"align-justify"};n.ui.registry.addButton(t.name,{tooltip:t.text,onAction:function(){return n.execCommand(t.cmd)},icon:t.icon,onSetup:e(t)})},yM=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},xM=function(i,a){return function(e){var t,n,o,r;return n=a,o=function(t){e.setActive(t)},r=function(t){o(t,n)},(t=i).formatter?t.formatter.formatChanged(n,r):t.on("init",function(){t.formatter.formatChanged(n,r)}),function(){}}},wM=function(t){var e,n,o;e=t,wz.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:xM(e,t.name),onAction:yM(e,t.name)})}),n=t,wz.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(t){n.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return n.execCommand(t.action)}})}),o=t,wz.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(t){o.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return o.execCommand(t.action)},onSetup:xM(o,t.name)})})},zM=function(t){var e;wM(t),e=t,wz.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(t){e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:function(){return e.execCommand(t.action)}})}),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:yM(e,"code")})},SM=function(t,e,n){var o=function(){return!!e.undoManager&&e.undoManager[n]()},r=function(){t.setDisabled(e.readonly||!o())};return t.setDisabled(!o()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r),function(){return e.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r)}},kM=function(t){var e,n;(e=t).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(t){return SM(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(t){return SM(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}}),(n=t).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(t){return SM(t,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(t){return SM(t,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})},CM=function(t){var e,n;(e=t).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return e.execCommand("mceToggleVisualAid")}}),(n=t).ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(t){return function(e,t){e.setActive(t.hasVisual);var n=function(t){e.setActive(t.hasVisual)};return t.on("VisualAid",n),function(){return t.off("VisualAid",n)}}(t,n)},onAction:function(){n.execCommand("mceToggleVisualAid")}})},OM=function(t){var r;(r=t).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(t){return e=t,o=function(){e.setDisabled(!n.queryCommandState("outdent"))},(n=r).on("NodeChange",o),function(){return n.off("NodeChange",o)};var e,n,o},onAction:function(){return r.execCommand("outdent")}}),r.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return r.execCommand("indent")}})},MM=function(t,e){var n,o,r,i,a,u,c,s,l,f,d,m,h,g,v,p,b,y,x,w;o=e,r=qk(n=t),i=jk(0,o,r.dataset,r),n.ui.registry.addNestedMenuItem("align",{text:o.shared.providers.translate("Align"),getSubmenuItems:function(){return i.items.validateItems(i.getStyleItems())}}),u=e,c=Jk(a=t),s=jk(0,u,c.dataset,c),a.ui.registry.addNestedMenuItem("fontformats",{text:u.shared.providers.translate("Fonts"),getSubmenuItems:function(){return s.items.validateItems(s.getStyleItems())}}),l=t,d=(f=e).styleselect,m=jk(0,f,d,eC(l)),l.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return m.items.validateItems(m.getStyleItems())}}),g=e,v=tC(h=t),p=jk(0,g,v.dataset,v),h.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return p.items.validateItems(p.getStyleItems())}}),y=e,x=Qk(b=t),w=jk(0,y,x.dataset,x),b.ui.registry.addNestedMenuItem("fontsizes",{text:"Font Sizes",getSubmenuItems:function(){return w.items.validateItems(w.getStyleItems())}})},HM=function(t,e){bM(t),zM(t),MM(t,e),kM(t),Hb.register(t),CM(t),OM(t)},VM=function(t,e){var n=P.from(Mn(t,"id")).fold(function(){var t=Un("dialog-label");return Cn(e,"id",t),t},d);Cn(t,"aria-labelledby",n)},EM=U([Zo("lazySink"),ur("dragBlockClass"),dr("useTabstopAt",U(!0)),dr("eventOrder",{}),Es("modalBehaviours",[jd]),ka("onExecute"),Oa("onEscape")]),TM={sketch:d},AM=U([al({name:"draghandle",overrides:function(t,e){return{behaviours:_a([aM.config({mode:"mouse",getTarget:function(t){return fa(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+xo(e,null,2)).message)})])}}}),rl({schema:[Zo("dom")],name:"title"}),rl({factory:TM,schema:[Zo("dom")],name:"close"}),rl({factory:TM,schema:[Zo("dom")],name:"body"}),rl({factory:TM,schema:[Zo("dom")],name:"footer"}),il({factory:{sketch:function(t,e){return Gn({},t,{dom:e.dom,components:e.components})}},schema:[dr("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),dr("components",[])],name:"blocker"})]),BM=Bl({name:"ModalDialog",configFields:EM(),partFields:AM(),factory:function(o,t,e,r){var u=Un("alloy.dialog.busy"),c=Un("alloy.dialog.idle"),s=_a([jd.config({mode:"special",onTab:function(){return P.some(!0)},onShiftTab:function(){return P.some(!0)}}),fm.config({})]),n=Un("modal-events"),i=Gn({},o.eventOrder,{"alloy.system.attached":[n].concat(o.eventOrder["alloy.system.attached"]||[])});return{uid:o.uid,dom:o.dom,components:t,apis:{show:function(i){var t=o.lazySink(i).getOrDie(),a=Ct(P.none()),e=r.blocker(),n=t.getSystem().build(Gn({},e,{components:e.components.concat([la(i)]),behaviours:_a([Tm("dialog-blocker-events",[Wr(c,function(t,e){Hn(i.element(),"aria-busy")&&(Vn(i.element(),"aria-busy"),a.get().each(function(t){return Yd.remove(i,t)}))}),Wr(u,function(t,e){Cn(i.element(),"aria-busy","true");var n=e.event().getBusySpec();a.get().each(function(t){Yd.remove(i,t)});var o=n(i,s),r=t.getSystem().build(o);a.set(P.some(r)),Yd.append(i,la(r)),r.hasConfigured(jd)&&jd.focusIn(r)})])])}));cs(t,n),jd.focusIn(i)},hide:function(e){an(e.element()).each(function(t){e.getSystem().getByDom(t).each(function(t){fs(t)})})},getBody:function(t){return yl(t,o,"body")},getFooter:function(t){return yl(t,o,"footer")},setIdle:function(t){kr(t,c)},setBusy:function(t,e){Cr(t,u,{getBusySpec:e})}},eventOrder:i,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:As(o.modalBehaviours,[Yd.config({}),jd.config({mode:"cyclic",onEnter:o.onExecute,onEscape:o.onEscape,useTabstopAt:o.useTabstopAt}),Tm(n,[Qr(function(t){VM(t.element(),yl(t,o,"title").element())})])])}},apis:{show:function(t,e){t.show(e)},hide:function(t,e){t.hide(e)},getBody:function(t,e){return t.getBody(e)},getFooter:function(t,e){return t.getFooter(e)},setBusy:function(t,e,n){t.setBusy(e,n)},setIdle:function(t,e){t.setIdle(e)}}}),DM=[er("type"),er("text"),nr("level",["info","warn","error","success"]),er("icon"),dr("url","")],_M=[er("type"),er("text"),pr("primary",!1),_o("name","name",Zn(function(){return Un("button-name")}),Ko),sr("icon")],FM=[er("type"),er("name"),er("label")],IM=Jo,LM=[er("type"),er("name"),sr("label")],RM=LM,NM=Ko,PM=LM,jM=Ko,UM=LM,WM=Eo(Lo),GM=LM.concat([pr("sandboxed",!0)]),XM=Ko,YM=LM.concat([sr("placeholder")]),qM=Ko,KM=LM.concat([ir("items",[er("text"),er("value")]),hr("size",1)]),JM=Ko,$M=LM.concat([pr("constrain",!0)]),QM=Vo([er("width"),er("height")]),ZM=LM.concat([sr("placeholder")]),tH=Ko,eH=LM.concat([vr("filetype","file",["image","media","file"])]),nH=Vo([er("value"),dr("meta",{})]),oH=LM.concat([er("type"),gr("tag","textarea"),or("init")]),rH=Ko,iH=[er("type"),er("html")],aH=LM.concat([tr("currentState",Vo([Zo("blob"),er("url")]))]),uH=LM.concat([dr("columns",1)]),cH=(uM=[er("value"),sr("text"),sr("icon")],Bo(uM)),sH=[er("type"),ar("header",Ko),ar("cells",Eo(Ko))],lH=function(e){return _o("items","items",$n(),Eo(Ro(function(t){return Po("Checking item of "+e,fH,t).fold(function(t){return ft.error(Wo(t))},function(t){return ft.value(t)})})))},fH=Go("type",{alertbanner:DM,bar:(fM=lH("bar"),[er("type"),fM]),button:_M,checkbox:FM,colorinput:RM,colorpicker:PM,dropzone:UM,grid:(sM=lH("grid"),[er("type"),(lM="columns",tr(lM,qo)),sM]),iframe:GM,input:YM,selectbox:KM,sizeinput:$M,textarea:ZM,urlinput:eH,customeditor:oH,htmlpanel:iH,imagetools:aH,collection:uH,label:(cM=lH("label"),[er("type"),er("label"),cM]),table:sH}),dH=[er("type"),ar("items",fH)],mH=[er("title"),ar("items",fH)],hH=[er("type"),ir("tabs",mH)],gH=Vo([nr("type",["submit","cancel","custom"]),_o("name","name",Zn(function(){return Un("button-name")}),Ko),er("text"),sr("icon"),vr("align","end",["start","end"]),pr("primary",!1),pr("disabled",!1)]),vH=Vo([er("title"),tr("body",Go("type",{panel:dH,tabpanel:hH})),gr("size","normal"),ar("buttons",gH),dr("initialData",{}),br("onAction",N),br("onChange",N),br("onSubmit",N),br("onClose",N),br("onCancel",N),dr("onTabChange",N)]),pH=function(t){return w(t)?[t].concat(j(rt(t),pH)):O(t)?j(t,pH):[]},bH=function(t){return x(t.type)&&x(t.name)},yH={checkbox:IM,colorinput:NM,colorpicker:jM,dropzone:WM,input:qM,iframe:XM,sizeinput:QM,selectbox:JM,size:QM,textarea:tH,urlinput:nH,customeditor:rH,collection:cH},xH=function(t){var e=j(A(pH(t),bH),function(e){return(t=e,P.from(yH[t.type])).fold(function(){return[]},function(t){return[tr(e.name,t)]});var t});return Vo(e)},wH=function(t){return{internalDialog:jo(Po("dialog",vH,t)),dataValidator:xH(t),initialData:t.initialData}},zH={open:function(t,e){var n=wH(e);return t(n.internalDialog,n.initialData,n.dataValidator)},redial:function(t){return wH(t)}},SH=Un("update-dialog"),kH=Un("update-title"),CH=Un("update-body"),OH=Un("update-footer"),MH=function(t){var n=[],o={};return tt(t,function(t,e){t.fold(function(){n.push(e)},function(t){o[e]=t})}),0<n.length?ft.error(n):ft.value(o)},HH=Al({name:"TabButton",configFields:[dr("uid",undefined),Zo("value"),_o("dom","dom",to(function(t){return{attributes:{role:"tab",id:Un("aria"),"aria-selected":"false"}}}),Xo()),ur("action"),dr("domModification",{}),Es("tabButtonBehaviours",[fm,jd,am]),Zo("view")],factory:function(t,e){return{uid:t.uid,dom:t.dom,components:t.components,events:Ym(t.action),behaviours:As(t.tabButtonBehaviours,[fm.config({}),jd.config({mode:"execution",useSpace:!0,useEnter:!0}),am.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),VH=U([Zo("tabs"),Zo("dom"),dr("clickToDismiss",!1),Es("tabbarBehaviours",[Jl,jd]),wa(["tabClass","selectedClass"])]),EH=ul({factory:HH,name:"tabs",unit:"tab",overrides:function(o,t){var r=function(t,e){Jl.dehighlight(t,e),Cr(t,Le(),{tabbar:t,button:e})},i=function(t,e){Jl.highlight(t,e),Cr(t,Ie(),{tabbar:t,button:e})};return{action:function(t){var e=t.getSystem().getByUid(o.uid).getOrDie(),n=Jl.isHighlighted(e,t);(n&&o.clickToDismiss?r:n?N:i)(e,t)},domModification:{classes:[o.markers.tabClass]}}}}),TH=U([EH]),AH=Bl({name:"Tabbar",configFields:VH(),partFields:TH(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:As(t.tabbarBehaviours,[Jl.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,e){Cn(e.element(),"aria-selected","true")},onDehighlight:function(t,e){Cn(e.element(),"aria-selected","false")}}),jd.config({mode:"flow",getInitial:function(t){return Jl.getHighlighted(t).map(function(t){return t.element()})},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),BH=Al({name:"Tabview",configFields:[Es("tabviewBehaviours",[Yd])],factory:function(t,e){return{uid:t.uid,dom:t.dom,behaviours:As(t.tabviewBehaviours,[Yd.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),DH=U([dr("selectFirst",!0),Sa("onChangeTab"),Sa("onDismissTab"),dr("tabs",[]),Es("tabSectionBehaviours",[])]),_H=rl({factory:AH,schema:[Zo("dom"),rr("markers",[Zo("tabClass"),Zo("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),FH=rl({factory:BH,name:"tabview"}),IH=U([_H,FH]),LH=Bl({name:"TabSection",configFields:DH(),partFields:IH(),factory:function(i,t,e,n){var o=function(t,e){bl(t,i,"tabbar").each(function(t){e(t).each(Or)})};return{uid:i.uid,dom:i.dom,components:t,behaviours:Ts(i.tabSectionBehaviours),events:Pr(R([i.selectFirst?[Qr(function(t,e){o(t,Jl.getFirst)})]:[],[Wr(Ie(),function(t,e){var o,r,n=e.event().button();o=n,r=am.getValue(o),bl(o,i,"tabview").each(function(n){_(i.tabs,function(t){return t.value===r}).each(function(t){var e=t.view();Cn(n.element(),"aria-labelledby",Mn(o.element(),"id")),Yd.set(n,e),i.onChangeTab(n,o,e)})})}),Wr(Le(),function(t,e){var n=e.event().button();i.onDismissTab(t,n)})]])),apis:{getViewItems:function(t){return bl(t,i,"tabview").map(function(t){return Yd.contents(t)}).getOr([])},showTab:function(t,n){o(t,function(e){var t=Jl.getCandidates(e);return _(t,function(t){return am.getValue(t)===n}).filter(function(t){return!Jl.isHighlighted(e,t)})})}}}},apis:{getViewItems:function(t,e){return t.getViewItems(e)},showTab:function(t,e,n){t.showTab(e,n)}}}),RH=function(t){return K((e=t,n=function(t,e){return e<t?-1:t<e?1:0},(o=G.call(e,0)).sort(n),o));var e,n,o},NH=function(a){return{smartTabHeight:{extraEvents:[Qr(function(t){da(t.element(),'[role="tabpanel"]').each(function(n){var e;Wi(n,"visibility","hidden"),t.getSystem().getByDom(n).toOption().bind(function(t){var o,r,i,e=(r=n,i=t,E(o=a,function(t,e){Yd.set(i,o[e].view());var n=r.dom().getBoundingClientRect();return Yd.set(i,[]),n.height}));return RH(e)}).each(function(t){Wi(n,"height",t+"px")}),Ji(n,"visibility"),e=t,K(a).each(function(t){return LH.showTab(e,t.value)})})}),Wr(Av,function(t,e){da(t.element(),'[role="tabpanel"]').each(function(e){var t=sf();Wi(e,"visibility","hidden");var n=qi(e,"height").map(function(t){return parseInt(t,10)});Ji(e,"height");var o=e.dom().getBoundingClientRect().height;n.forall(function(t){return t<o})?Wi(e,"height",o+"px"):n.each(function(t){Wi(e,"height",t+"px")}),Ji(e,"visibility"),t.each(cf)})})],selectFirst:!1},naiveTabHeight:{extraEvents:[],selectFirst:!0}}},PH="send-data-to-section",jH="send-data-to-view",UH=function(t,d){return{dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[],behaviours:_a([Nx(0),hk.config({channel:CH,updateState:function(t,e){return P.some({isTabPanel:function(){return"tabpanel"===e.body.type}})},renderComponents:function(t){switch(t.body.type){case"tabpanel":return[(r={tabs:t.body.tabs},i=d,a=Ct({}),u=function(t){var e=am.getValue(t),n=MH(e).getOr({}),o=a.get(),r=gt(o,n);a.set(r)},c=function(t){var e=a.get();am.setValue(t,e)},s=Ct(null),l=E(r.tabs,function(t){return{value:t.title,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:i.shared.providers.translate(t.title)},view:function(){return[Ex.sketch(function(e){return{dom:{tag:"div",classes:["tox-form"]},components:E(t.items,function(t){return Zz(e,t,i)}),formBehaviours:_a([jd.config({mode:"acyclic",useTabstopAt:m(ew)}),Tm("TabView.form.events",[Qr(c),Zr(u)]),Ua.config({channels:zt([{key:PH,value:{onReceive:u}},{key:jH,value:{onReceive:c}}])})])}})]}}}),f=NH(l).smartTabHeight,LH.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,e,n){var o=am.getValue(e);Cr(t,Tv,{title:o,oldTitle:s.get()}),s.set(o)},tabs:l,components:[LH.parts().tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[AH.parts().tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:_a([Up.config({})])}),LH.parts().tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:f.selectFirst,tabSectionBehaviours:_a([Tm("tabpanel",f.extraEvents),jd.config({mode:"acyclic"}),Il.config({find:function(t){return K(LH.getViewItems(t))}}),am.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([PH],{}),a.get()},setValue:function(t,e){a.set(e),t.getSystem().broadcastOn([jH],{})}}})])}))];default:return[(n={items:t.body.items},o=d,e=Km(Ex.sketch(function(e){return{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:E(n.items,function(t){return Zz(e,t,o)})}})),{dom:{tag:"div",classes:["tox-dialog__body"]},components:[e.asSpec()],behaviours:_a([jd.config({mode:"acyclic",useTabstopAt:m(ew)}),Rx(e),Xx(e,{postprocess:function(t){return MH(t).fold(function(t){return console.error(t),{}},function(t){return t})}})])})]}var n,o,e,r,i,a,u,c,s,l,f},initialData:t})])}},WH=function(o,n){var t=function(t,r){return Wr(t,function(n,o){e(n,function(t,e){r(t,o.event(),n)})})},e=function(e,n){hk.getState(e).get().each(function(t){n(t.internalDialog,e)})};return[qr(Ft(),nw),t(Hv,function(t){return t.onSubmit(o())}),t(kv,function(t,e){t.onChange(o(),{name:e.name()})}),t(Mv,function(t,e){t.onAction(o(),{name:e.name(),value:e.value()})}),t(Tv,function(t,e){t.onTabChange(o(),e.title())}),t(Cv,function(t){n.onClose(),t.onClose()}),t(Ov,function(t,e,n){t.onCancel(o()),kr(n,Cv)}),Zr(function(t){var e=o();am.setValue(t,e.getData())}),Wr(Ev,function(t,e){return n.onUnblock()}),Wr(Vv,function(t,e){return n.onBlock(e.event())})]},GH=function(t,e){var n=function(t,e){for(var n=[],o=[],r=0,i=t.length;r<i;r++){var a=t[r];(e(a,r,t)?n:o).push(a)}return{pass:n,fail:o}}(e.map(function(t){return t.footerButtons}).getOr([]),function(t){return"start"===t.align}),o=function(t,e){return pv.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:E(e,function(t){return t.memento.asSpec()})})};return[o("start",n.pass),o("end",n.fail)]},XH=function(t,i){return{dom:eg('<div class="tox-dialog__footer"></div>'),components:[],behaviours:_a([hk.config({channel:OH,initialData:t,updateState:function(t,e){var r=E(e.buttons,function(t){var e,n,o=Km((n=i,nz(e=t,e.type,n)));return{name:t.name,align:t.align,memento:o}});return P.some({lookupByName:function(t,e){return n=t,o=e,_(r,function(t){return t.name===o}).bind(function(t){return t.memento.getOpt(n)});var n,o},footerButtons:r})},renderComponents:GH})])}},YH=function(t){return qm.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M17.953 7.453L13.422 12l4.531 4.547-1.406 1.406L12 13.422l-4.547 4.531-1.406-1.406L10.578 12 6.047 7.453l1.406-1.406L12 10.578l4.547-4.531z" fill-rule="evenodd"></path></svg>'}}],action:function(t){kr(t,Ov)}})},qH=function(t,e,n){var o=function(t){return[aa(n.translate(t.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:Gn({},e.map(function(t){return{id:t}}).getOr({}))},components:o(t),behaviours:_a([hk.config({channel:kH,renderComponents:o})])}},KH=function(e,n){if(e.getRoot().getSystem().isConnected()){var o=Il.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return Ex.getField(o,n).fold(function(){var t=e.getFooter();return hk.getState(t).get().bind(function(t){return t.lookupByName(o,n)})},function(t){return P.some(t)})}return P.none()},JH=function(c,o){var t=function(t){var e=c.getRoot();e.getSystem().isConnected()&&t(e)},s={getData:function(){var t=c.getRoot(),e=t.getSystem().isConnected()?c.getFormWrapper():t;return am.getValue(e)},setData:function(u){t(function(t){var e,n,o=s.getData(),r=vt(o,u),i=(e=r,n=c.getRoot(),hk.getState(n).get().map(function(t){return jo(Po("data",t.dataValidator,e))}).getOr(e)),a=c.getFormWrapper();am.setValue(a,i)})},disable:function(t){KH(c,t).each(Ih.disable)},enable:function(t){KH(c,t).each(Ih.enable)},focus:function(t){KH(c,t).each(fm.focus)},block:function(e){t(function(t){Cr(t,Vv,{message:e})})},unblock:function(){t(function(t){kr(t,Ev)})},showTab:function(n){t(function(t){var e=c.getBody();hk.getState(e).get().exists(function(t){return t.isTabPanel()})&&Il.getCurrent(e).each(function(t){LH.showTab(t,n)})})},redial:function(n){t(function(t){var e=o(n);t.getSystem().broadcastOn([SH],e),t.getSystem().broadcastOn([kH],e.internalDialog),t.getSystem().broadcastOn([CH],e.internalDialog),t.getSystem().broadcastOn([OH],e.internalDialog),s.setData(e.initialData)})},close:function(){t(function(t){kr(t,Cv)})}};return s},$H=function(t,e,n){var o,r,i,a,u,c,s,l,f,d,m,h=(r={title:n.shared.providers.translate(t.internalDialog.title),draggable:!0},i=n.shared.providers,a=BM.parts().title(qH(r,P.none(),i)),u=BM.parts().draghandle({dom:eg('<div class="tox-dialog__draghandle"></div>')}),c=BM.parts().close(YH(i)),s=[a].concat(r.draggable?[u]:[]).concat([c]),pv.sketch({dom:eg('<div class="tox-dialog__header"></div>'),components:s})),g=(l={body:t.internalDialog.body},f=n,BM.parts().body(UH(l,f))),v=(d={buttons:t.internalDialog.buttons},m=n.shared.providers,BM.parts().footer(XH(d,m))),p=WH(function(){return x},{onClose:function(){return e.closeWindow()},onBlock:function(n){BM.setBusy(y,function(t,e){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.message()},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:e,components:[{dom:eg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})},onUnblock:function(){BM.setIdle(y)}}),b="normal"!==t.internalDialog.size?"large"===t.internalDialog.size?"tox-dialog--width-lg":"tox-dialog--width-md":[],y=sa(BM.sketch({lazySink:n.shared.getSink,onEscape:function(t){return kr(t,Ov),P.some(!0)},useTabstopAt:function(t){return!ew(t)&&("button"!==yn(t)||"disabled"!==Mn(t,"disabled"))},modalBehaviours:_a([hk.config({channel:SH,updateState:function(t,e){return P.some(e)},initialData:t}),fm.config({}),Tm("execute-on-form",p.concat([$r(Ft(),function(t,e){jd.focusIn(t)})])),Kx({})]),eventOrder:(o={},o[Se()]=["execute-on-form"],o[Ae()]=["reflecting","execute-on-form"],o),dom:{tag:"div",classes:["tox-dialog"].concat(b),styles:{position:"relative"}},components:[h,g,v],dragBlockClass:"tox-dialog-wrap",parts:{blocker:{dom:eg('<div class="tox-dialog-wrap"></div>'),components:[{dom:{tag:"div",classes:["tox-dialog-wrap__backdrop"]}}]}}})),x=JH({getRoot:function(){return y},getBody:function(){return BM.getBody(y)},getFooter:function(){return BM.getFooter(y)},getFormWrapper:function(){var t=BM.getBody(y);return Il.getCurrent(t).getOr(t)}},e.redial);return{dialog:y,instanceApi:x}},QH=function(t,e,n){var o,r,i,a,u,c,s,l,f=Un("dialog-label"),d=Km((i={title:t.internalDialog.title,draggable:!0},a=f,u=n.shared.providers,pv.sketch({dom:eg('<div class="tox-dialog__header"></div>'),components:[qH(i,P.some(a),u),YH(u)],containerBehaviours:_a([aM.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return ma(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),m=Km((c={body:t.internalDialog.body},UH(c,n))),h=Km((s={buttons:t.internalDialog.buttons},l=n.shared.providers,XH(s,l))),g=WH(function(){return p},{onBlock:function(){},onUnblock:function(){},onClose:function(){return e.closeWindow()}}),v=sa({dom:{tag:"div",classes:["tox-dialog"],attributes:(o={role:"dialog"},o["aria-labelledby"]=f,o)},eventOrder:(r={},r[ze()]=[hk.name(),Ua.name()],r[Se()]=["execute-on-form"],r[Ae()]=["reflecting","execute-on-form"],r),behaviours:_a([jd.config({mode:"cyclic",onEscape:function(t){return kr(t,Cv),P.some(!0)},useTabstopAt:function(t){return!ew(t)&&("button"!==yn(t)||"disabled"!==Mn(t,"disabled"))}}),hk.config({channel:SH,updateState:function(t,e){return P.some(e)},initialData:t}),Tm("execute-on-form",g),Kx({})]),components:[d.asSpec(),m.asSpec(),h.asSpec()]}),p=JH({getRoot:function(){return v},getFooter:function(){return h.get(v)},getBody:function(){return m.get(v)},getFormWrapper:function(){var t=m.get(v);return Il.getCurrent(t).getOr(t)}},e.redial);return{dialog:v,instanceApi:p}},ZH=function(t,e){return BM.parts().close(qm.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close")}},action:t,buttonBehaviours:_a([Up.config({})])}))},tV=function(){return BM.parts().title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},eV=function(t,e){return BM.parts().body({dom:{tag:"div",classes:["tox-dialog__body","todo-tox-fit"]},components:[{dom:eg("<p>"+e.translate(t)+"</p>")}]})},nV=function(t){return BM.parts().footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},oV=function(t,e){return[pv.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),pv.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:e})]},rV=function(n){return BM.sketch({lazySink:n.lazySink,onEscape:function(){return n.onCancel(),P.some(!0)},dom:{tag:"div",classes:["tox-dialog"].concat(n.extraClasses)},components:[{dom:{tag:"div",classes:["tox-dialog__header"]},components:[n.partSpecs.title,n.partSpecs.close]},n.partSpecs.body,n.partSpecs.footer],parts:{blocker:{dom:eg('<div class="tox-dialog-wrap"></div>'),components:[{dom:{tag:"div",classes:["tox-dialog-wrap__backdrop"]}}]}},modalBehaviours:_a([Tm("basic-dialog-events",[Wr(Ov,function(t,e){n.onCancel()}),Wr(Hv,function(t,e){n.onSubmit()})])])})},iV=function(c){var a,u,n=(a=c.backstage.shared,{open:function(t,e){var n=function(){BM.hide(r),e()},o=Km(nz({name:"close-alert",text:"OK",primary:!0,icon:P.none()},"cancel",a.providers)),r=sa(rV({lazySink:function(){return a.getSink()},partSpecs:{title:tV(),close:ZH(function(){n()},a.providers),body:eV(t,a.providers),footer:nV(oV([],[o.asSpec()]))},onCancel:function(){return n()},onSubmit:N,extraClasses:["tox-alert-dialog"]}));BM.show(r);var i=o.get(r);fm.focus(i)}}),o=(u=c.backstage.shared,{open:function(t,e){var n=function(t){BM.hide(i),e(t)},o=Km(nz({name:"yes",text:"Yes",primary:!0,icon:P.none()},"submit",u.providers)),r=nz({name:"no",text:"No",primary:!0,icon:P.none()},"cancel",u.providers),i=sa(rV({lazySink:function(){return u.getSink()},partSpecs:{title:tV(),close:ZH(function(){n(!1)},u.providers),body:eV(t,u.providers),footer:nV(oV([],[r,o.asSpec()]))},onCancel:function(){return n(!1)},onSubmit:function(){return n(!0)},extraClasses:["tox-confirm-dialog"]}));BM.show(i);var a=o.get(i);fm.focus(a)}}),r=function(t,i){return zH.open(function(t,e,n){var o=e,r=$H({dataValidator:n,initialData:o,internalDialog:t},{redial:zH.redial,closeWindow:function(){BM.hide(r.dialog),i(r.instanceApi)}},c.backstage);return BM.show(r.dialog),r.instanceApi.setData(o),r.instanceApi},t)},i=function(t,a,u){return zH.open(function(t,e,n){var o=jo(Po("data",n,e)),r=QH({dataValidator:n,initialData:o,internalDialog:t},{redial:zH.redial,closeWindow:function(){Xm.hide(i),u(r.instanceApi)}},c.backstage),i=sa(Xm.sketch({lazySink:c.backstage.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},inlineBehaviours:_a([Tm("window-manager-inline-events",[Wr(De(),function(t,e){kr(r.dialog,Ov)})])])}));return Xm.showAt(i,a,la(r.dialog)),r.instanceApi.setData(o),jd.focusIn(r.dialog),r.instanceApi},t)};return{open:function(t,e,n){return e!==undefined&&"toolbar"===e.inline?i(t,c.backstage.shared.anchors.toolbar(),n):e!==undefined&&"cursor"===e.inline?i(t,c.backstage.shared.anchors.cursor(),n):r(t,n)},alert:function(t,e){n.open(t,function(){e()})},close:function(t){t.close()},confirm:function(t,e){o.open(t,function(t){e(t)})}}};Wn.add("silver",function(t){var e=pM(t),n=e.mothership,o=e.uiMothership,r=e.backstage,i=e.renderUI,a=e.getUi;HM(t,r),Nn(Un("silver-demo"),n),Nn(Un("silver-ui-demo"),o),Gg(t,r.shared);var u=iV({backstage:r});return{renderUI:i,getWindowManagerImpl:U(u),getNotificationManagerImpl:function(){return oh(t,{backstage:r},o)},ui:a()}}),function FV(){}}();